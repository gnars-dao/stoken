import{j as o,F as Z,s as K,a0 as De,I as ie,k as Q,a1 as Re,o as Ue,r as k,B,a2 as Ye,a3 as $e,a4 as Je,a5 as Ze,H as Oe,E as _e,a6 as Le,a7 as Xe,M as ue,g as me,h as fe,i as Fe,K as Ee,a8 as Qe,a9 as qe,aa as en,ab as nn,P as xe,R as Te,p as Ve,V as rn,ac as an,Y as sn,ad as tn,ae as on,af as ln,ag as cn,ah as pn,ai as hn,w as dn,aj as gn,y as je,ak as se,x as _n,z as J,al as un,am as mn,an as fn,ao as Se,ap as bn,aq as vn,ar as wn,as as kn,at as yn}from"./index-MtGPO_T6.js";import{a as Ne,v as He,M as Cn,C as jn,b as Sn}from"./MarkdownRenderers-Avr826kM.js";const Mn=({title:A,author:p,avatarUrl:v,permlink:f,postUrl:m,onClose:e})=>{const n=`https://peakd.com${m}`;return o.jsxs(Z,{justifyContent:"center",alignItems:"center",children:[o.jsx(K,{display:"flex",alignItems:"center",children:o.jsx(De,{to:`/profile/${p}`,children:o.jsxs(K,{borderRadius:"full",border:"1px solid limegreen",display:"flex",alignItems:"center",p:"4",children:[o.jsx(ie,{boxSize:"2rem",borderRadius:"full",src:v,alt:p,mr:"4"}),o.jsx(Q,{fontSize:"md",children:p})]})})}),o.jsx(K,{borderRadius:"10px",border:"1px solid limegreen",flex:"1",ml:"4",children:o.jsx(Re,{padding:"10px",as:"h5",size:"xs",children:A})}),o.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:o.jsx(ie,{src:"https://i.ibb.co/VpC46P5/image.png",boxSize:"1.5rem",ml:"4"})}),o.jsx(Ue,{onClick:e})]})},xn=({onClose:A,user:p,author:v,permlink:f,weight:m=1e4,userVote:e})=>{const[n,a]=k.useState(0),[t,s]=k.useState(null),[r,i]=k.useState(!1),[l,c]=k.useState(""),[h,d]=k.useState("Vote"),u=_=>_===-1e4?"I hate it":_===-5e3?"I don't care for it":_===0?"Skaters can do better":_===5e3?"That's kind of cool":_===1e4?"That's fucking awesome":"",b=async()=>{if(!p||!p.name){console.error("User not logged in or missing username");return}try{await He(p.name,f,v,n),console.log("Voting successful!"),e.isVoted=!0,e.percent=n,d("Already Voted");const _=u(n);c(_)}catch(_){console.error("Voting failed:",_),_.message,s("Error While Voting!"),i(!0)}};return k.useEffect(()=>{e.isVoted&&e.percent===n&&d("Already Voted"),e.isVoted&&e.percent!==n&&d("Change Vote");const _=u(n);c(_)},[n]),k.useEffect(()=>{e.isVoted&&a(e.percent);const _=u(e.percent);c(_)},[e]),o.jsxs(Z,{borderRadius:"10px",padding:"20px",justify:"space-between",children:[o.jsx(B,{bg:"black",color:"#fff",borderRadius:"4px",p:2,onClick:A,_hover:{bg:"black",color:"red"},border:"1px solid white",children:"Close"}),o.jsxs(K,{width:"40%",children:[o.jsx(Q,{textAlign:"center",children:" Your opinion on this post"}),o.jsxs(Ye,{min:-1e4,max:1e4,step:5e3,value:n,onChange:_=>a(_),children:[o.jsx($e,{bg:"white",children:o.jsx(Je,{bg:"yellow"})}),o.jsx(Ze,{boxSize:6})]}),o.jsx(Q,{color:"yellow",mt:2,textAlign:"center",children:l})]}),o.jsx(B,{bg:"black",color:"white",borderRadius:"4px",border:"1px solid limegreen",p:2,onClick:b,_hover:{bg:"black",color:"orange"},isDisabled:h==="Already Voted",children:h}),o.jsx(Ne,{isOpen:r,onClose:()=>i(!1),errorMessage:t||""})]})};var Be={exports:{}};(function(A){var p=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},v=-1,f=1,m=0;p.Diff=function(e,n){return[e,n]},p.prototype.diff_main=function(e,n,a,t){typeof t>"u"&&(this.Diff_Timeout<=0?t=Number.MAX_VALUE:t=new Date().getTime()+this.Diff_Timeout*1e3);var s=t;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e==n)return e?[new p.Diff(m,e)]:[];typeof a>"u"&&(a=!0);var r=a,i=this.diff_commonPrefix(e,n),l=e.substring(0,i);e=e.substring(i),n=n.substring(i),i=this.diff_commonSuffix(e,n);var c=e.substring(e.length-i);e=e.substring(0,e.length-i),n=n.substring(0,n.length-i);var h=this.diff_compute_(e,n,r,s);return l&&h.unshift(new p.Diff(m,l)),c&&h.push(new p.Diff(m,c)),this.diff_cleanupMerge(h),h},p.prototype.diff_compute_=function(e,n,a,t){var s;if(!e)return[new p.Diff(f,n)];if(!n)return[new p.Diff(v,e)];var r=e.length>n.length?e:n,i=e.length>n.length?n:e,l=r.indexOf(i);if(l!=-1)return s=[new p.Diff(f,r.substring(0,l)),new p.Diff(m,i),new p.Diff(f,r.substring(l+i.length))],e.length>n.length&&(s[0][0]=s[2][0]=v),s;if(i.length==1)return[new p.Diff(v,e),new p.Diff(f,n)];var c=this.diff_halfMatch_(e,n);if(c){var h=c[0],d=c[1],u=c[2],b=c[3],_=c[4],y=this.diff_main(h,u,a,t),S=this.diff_main(d,b,a,t);return y.concat([new p.Diff(m,_)],S)}return a&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,t):this.diff_bisect_(e,n,t)},p.prototype.diff_lineMode_=function(e,n,a){var t=this.diff_linesToChars_(e,n);e=t.chars1,n=t.chars2;var s=t.lineArray,r=this.diff_main(e,n,!1,a);this.diff_charsToLines_(r,s),this.diff_cleanupSemantic(r),r.push(new p.Diff(m,""));for(var i=0,l=0,c=0,h="",d="";i<r.length;){switch(r[i][0]){case f:c++,d+=r[i][1];break;case v:l++,h+=r[i][1];break;case m:if(l>=1&&c>=1){r.splice(i-l-c,l+c),i=i-l-c;for(var u=this.diff_main(h,d,!1,a),b=u.length-1;b>=0;b--)r.splice(i,0,u[b]);i=i+u.length}c=0,l=0,h="",d="";break}i++}return r.pop(),r},p.prototype.diff_bisect_=function(e,n,a){for(var t=e.length,s=n.length,r=Math.ceil((t+s)/2),i=r,l=2*r,c=new Array(l),h=new Array(l),d=0;d<l;d++)c[d]=-1,h[d]=-1;c[i+1]=0,h[i+1]=0;for(var u=t-s,b=u%2!=0,_=0,y=0,S=0,I=0,M=0;M<r&&!(new Date().getTime()>a);M++){for(var E=-M+_;E<=M-y;E+=2){var T=i+E,x;E==-M||E!=M&&c[T-1]<c[T+1]?x=c[T+1]:x=c[T-1]+1;for(var O=x-E;x<t&&O<s&&e.charAt(x)==n.charAt(O);)x++,O++;if(c[T]=x,x>t)y+=2;else if(O>s)_+=2;else if(b){var P=i+u-E;if(P>=0&&P<l&&h[P]!=-1){var j=t-h[P];if(x>=j)return this.diff_bisectSplit_(e,n,x,O,a)}}}for(var U=-M+S;U<=M-I;U+=2){var P=i+U,j;U==-M||U!=M&&h[P-1]<h[P+1]?j=h[P+1]:j=h[P-1]+1;for(var N=j-U;j<t&&N<s&&e.charAt(t-j-1)==n.charAt(s-N-1);)j++,N++;if(h[P]=j,j>t)I+=2;else if(N>s)S+=2;else if(!b){var T=i+u-U;if(T>=0&&T<l&&c[T]!=-1){var x=c[T],O=i+x-T;if(j=t-j,x>=j)return this.diff_bisectSplit_(e,n,x,O,a)}}}}return[new p.Diff(v,e),new p.Diff(f,n)]},p.prototype.diff_bisectSplit_=function(e,n,a,t,s){var r=e.substring(0,a),i=n.substring(0,t),l=e.substring(a),c=n.substring(t),h=this.diff_main(r,i,!1,s),d=this.diff_main(l,c,!1,s);return h.concat(d)},p.prototype.diff_linesToChars_=function(e,n){var a=[],t={};a[0]="";function s(c){for(var h="",d=0,u=-1,b=a.length;u<c.length-1;){u=c.indexOf(`
`,d),u==-1&&(u=c.length-1);var _=c.substring(d,u+1);(t.hasOwnProperty?t.hasOwnProperty(_):t[_]!==void 0)?h+=String.fromCharCode(t[_]):(b==r&&(_=c.substring(d),u=c.length),h+=String.fromCharCode(b),t[_]=b,a[b++]=_),d=u+1}return h}var r=4e4,i=s(e);r=65535;var l=s(n);return{chars1:i,chars2:l,lineArray:a}},p.prototype.diff_charsToLines_=function(e,n){for(var a=0;a<e.length;a++){for(var t=e[a][1],s=[],r=0;r<t.length;r++)s[r]=n[t.charCodeAt(r)];e[a][1]=s.join("")}},p.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!=n.charAt(0))return 0;for(var a=0,t=Math.min(e.length,n.length),s=t,r=0;a<s;)e.substring(r,s)==n.substring(r,s)?(a=s,r=a):t=s,s=Math.floor((t-a)/2+a);return s},p.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!=n.charAt(n.length-1))return 0;for(var a=0,t=Math.min(e.length,n.length),s=t,r=0;a<s;)e.substring(e.length-s,e.length-r)==n.substring(n.length-s,n.length-r)?(a=s,r=a):t=s,s=Math.floor((t-a)/2+a);return s},p.prototype.diff_commonOverlap_=function(e,n){var a=e.length,t=n.length;if(a==0||t==0)return 0;a>t?e=e.substring(a-t):a<t&&(n=n.substring(0,a));var s=Math.min(a,t);if(e==n)return s;for(var r=0,i=1;;){var l=e.substring(s-i),c=n.indexOf(l);if(c==-1)return r;i+=c,(c==0||e.substring(s-i)==n.substring(0,i))&&(r=i,i++)}},p.prototype.diff_halfMatch_=function(e,n){if(this.Diff_Timeout<=0)return null;var a=e.length>n.length?e:n,t=e.length>n.length?n:e;if(a.length<4||t.length*2<a.length)return null;var s=this;function r(y,S,I){for(var M=y.substring(I,I+Math.floor(y.length/4)),E=-1,T="",x,O,P,j;(E=S.indexOf(M,E+1))!=-1;){var U=s.diff_commonPrefix(y.substring(I),S.substring(E)),N=s.diff_commonSuffix(y.substring(0,I),S.substring(0,E));T.length<N+U&&(T=S.substring(E-N,E)+S.substring(E,E+U),x=y.substring(0,I-N),O=y.substring(I+U),P=S.substring(0,E-N),j=S.substring(E+U))}return T.length*2>=y.length?[x,O,P,j,T]:null}var i=r(a,t,Math.ceil(a.length/4)),l=r(a,t,Math.ceil(a.length/2)),c;if(!i&&!l)return null;l?i?c=i[4].length>l[4].length?i:l:c=l:c=i;var h,d,u,b;e.length>n.length?(h=c[0],d=c[1],u=c[2],b=c[3]):(u=c[0],b=c[1],h=c[2],d=c[3]);var _=c[4];return[h,d,u,b,_]},p.prototype.diff_cleanupSemantic=function(e){for(var n=!1,a=[],t=0,s=null,r=0,i=0,l=0,c=0,h=0;r<e.length;)e[r][0]==m?(a[t++]=r,i=c,l=h,c=0,h=0,s=e[r][1]):(e[r][0]==f?c+=e[r][1].length:h+=e[r][1].length,s&&s.length<=Math.max(i,l)&&s.length<=Math.max(c,h)&&(e.splice(a[t-1],0,new p.Diff(v,s)),e[a[t-1]+1][0]=f,t--,t--,r=t>0?a[t-1]:-1,i=0,l=0,c=0,h=0,s=null,n=!0)),r++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),r=1;r<e.length;){if(e[r-1][0]==v&&e[r][0]==f){var d=e[r-1][1],u=e[r][1],b=this.diff_commonOverlap_(d,u),_=this.diff_commonOverlap_(u,d);b>=_?(b>=d.length/2||b>=u.length/2)&&(e.splice(r,0,new p.Diff(m,u.substring(0,b))),e[r-1][1]=d.substring(0,d.length-b),e[r+1][1]=u.substring(b),r++):(_>=d.length/2||_>=u.length/2)&&(e.splice(r,0,new p.Diff(m,d.substring(0,_))),e[r-1][0]=f,e[r-1][1]=u.substring(0,u.length-_),e[r+1][0]=v,e[r+1][1]=d.substring(_),r++),r++}r++}},p.prototype.diff_cleanupSemanticLossless=function(e){function n(_,y){if(!_||!y)return 6;var S=_.charAt(_.length-1),I=y.charAt(0),M=S.match(p.nonAlphaNumericRegex_),E=I.match(p.nonAlphaNumericRegex_),T=M&&S.match(p.whitespaceRegex_),x=E&&I.match(p.whitespaceRegex_),O=T&&S.match(p.linebreakRegex_),P=x&&I.match(p.linebreakRegex_),j=O&&_.match(p.blanklineEndRegex_),U=P&&y.match(p.blanklineStartRegex_);return j||U?5:O||P?4:M&&!T&&x?3:T||x?2:M||E?1:0}for(var a=1;a<e.length-1;){if(e[a-1][0]==m&&e[a+1][0]==m){var t=e[a-1][1],s=e[a][1],r=e[a+1][1],i=this.diff_commonSuffix(t,s);if(i){var l=s.substring(s.length-i);t=t.substring(0,t.length-i),s=l+s.substring(0,s.length-i),r=l+r}for(var c=t,h=s,d=r,u=n(t,s)+n(s,r);s.charAt(0)===r.charAt(0);){t+=s.charAt(0),s=s.substring(1)+r.charAt(0),r=r.substring(1);var b=n(t,s)+n(s,r);b>=u&&(u=b,c=t,h=s,d=r)}e[a-1][1]!=c&&(c?e[a-1][1]=c:(e.splice(a-1,1),a--),e[a][1]=h,d?e[a+1][1]=d:(e.splice(a+1,1),a--))}a++}},p.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,p.whitespaceRegex_=/\s/,p.linebreakRegex_=/[\r\n]/,p.blanklineEndRegex_=/\n\r?\n$/,p.blanklineStartRegex_=/^\r?\n\r?\n/,p.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,a=[],t=0,s=null,r=0,i=!1,l=!1,c=!1,h=!1;r<e.length;)e[r][0]==m?(e[r][1].length<this.Diff_EditCost&&(c||h)?(a[t++]=r,i=c,l=h,s=e[r][1]):(t=0,s=null),c=h=!1):(e[r][0]==v?h=!0:c=!0,s&&(i&&l&&c&&h||s.length<this.Diff_EditCost/2&&i+l+c+h==3)&&(e.splice(a[t-1],0,new p.Diff(v,s)),e[a[t-1]+1][0]=f,t--,s=null,i&&l?(c=h=!0,t=0):(t--,r=t>0?a[t-1]:-1,c=h=!1),n=!0)),r++;n&&this.diff_cleanupMerge(e)},p.prototype.diff_cleanupMerge=function(e){e.push(new p.Diff(m,""));for(var n=0,a=0,t=0,s="",r="",i;n<e.length;)switch(e[n][0]){case f:t++,r+=e[n][1],n++;break;case v:a++,s+=e[n][1],n++;break;case m:a+t>1?(a!==0&&t!==0&&(i=this.diff_commonPrefix(r,s),i!==0&&(n-a-t>0&&e[n-a-t-1][0]==m?e[n-a-t-1][1]+=r.substring(0,i):(e.splice(0,0,new p.Diff(m,r.substring(0,i))),n++),r=r.substring(i),s=s.substring(i)),i=this.diff_commonSuffix(r,s),i!==0&&(e[n][1]=r.substring(r.length-i)+e[n][1],r=r.substring(0,r.length-i),s=s.substring(0,s.length-i))),n-=a+t,e.splice(n,a+t),s.length&&(e.splice(n,0,new p.Diff(v,s)),n++),r.length&&(e.splice(n,0,new p.Diff(f,r)),n++),n++):n!==0&&e[n-1][0]==m?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,t=0,a=0,s="",r="";break}e[e.length-1][1]===""&&e.pop();var l=!1;for(n=1;n<e.length-1;)e[n-1][0]==m&&e[n+1][0]==m&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&this.diff_cleanupMerge(e)},p.prototype.diff_xIndex=function(e,n){var a=0,t=0,s=0,r=0,i;for(i=0;i<e.length&&(e[i][0]!==f&&(a+=e[i][1].length),e[i][0]!==v&&(t+=e[i][1].length),!(a>n));i++)s=a,r=t;return e.length!=i&&e[i][0]===v?r:r+(n-s)},p.prototype.diff_prettyHtml=function(e){for(var n=[],a=/&/g,t=/</g,s=/>/g,r=/\n/g,i=0;i<e.length;i++){var l=e[i][0],c=e[i][1],h=c.replace(a,"&amp;").replace(t,"&lt;").replace(s,"&gt;").replace(r,"&para;<br>");switch(l){case f:n[i]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case v:n[i]='<del style="background:#ffe6e6;">'+h+"</del>";break;case m:n[i]="<span>"+h+"</span>";break}}return n.join("")},p.prototype.diff_text1=function(e){for(var n=[],a=0;a<e.length;a++)e[a][0]!==f&&(n[a]=e[a][1]);return n.join("")},p.prototype.diff_text2=function(e){for(var n=[],a=0;a<e.length;a++)e[a][0]!==v&&(n[a]=e[a][1]);return n.join("")},p.prototype.diff_levenshtein=function(e){for(var n=0,a=0,t=0,s=0;s<e.length;s++){var r=e[s][0],i=e[s][1];switch(r){case f:a+=i.length;break;case v:t+=i.length;break;case m:n+=Math.max(a,t),a=0,t=0;break}}return n+=Math.max(a,t),n},p.prototype.diff_toDelta=function(e){for(var n=[],a=0;a<e.length;a++)switch(e[a][0]){case f:n[a]="+"+encodeURI(e[a][1]);break;case v:n[a]="-"+e[a][1].length;break;case m:n[a]="="+e[a][1].length;break}return n.join("	").replace(/%20/g," ")},p.prototype.diff_fromDelta=function(e,n){for(var a=[],t=0,s=0,r=n.split(/\t/g),i=0;i<r.length;i++){var l=r[i].substring(1);switch(r[i].charAt(0)){case"+":try{a[t++]=new p.Diff(f,decodeURI(l))}catch{throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var c=parseInt(l,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+l);var h=e.substring(s,s+=c);r[i].charAt(0)=="="?a[t++]=new p.Diff(m,h):a[t++]=new p.Diff(v,h);break;default:if(r[i])throw new Error("Invalid diff operation in diff_fromDelta: "+r[i])}}if(s!=e.length)throw new Error("Delta length ("+s+") does not equal source text length ("+e.length+").");return a},p.prototype.match_main=function(e,n,a){if(e==null||n==null||a==null)throw new Error("Null input. (match_main)");return a=Math.max(0,Math.min(a,e.length)),e==n?0:e.length?e.substring(a,a+n.length)==n?a:this.match_bitap_(e,n,a):-1},p.prototype.match_bitap_=function(e,n,a){if(n.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var t=this.match_alphabet_(n),s=this;function r(x,O){var P=x/n.length,j=Math.abs(a-O);return s.Match_Distance?P+j/s.Match_Distance:j?1:P}var i=this.Match_Threshold,l=e.indexOf(n,a);l!=-1&&(i=Math.min(r(0,l),i),l=e.lastIndexOf(n,a+n.length),l!=-1&&(i=Math.min(r(0,l),i)));var c=1<<n.length-1;l=-1;for(var h,d,u=n.length+e.length,b,_=0;_<n.length;_++){for(h=0,d=u;h<d;)r(_,a+d)<=i?h=d:u=d,d=Math.floor((u-h)/2+h);u=d;var y=Math.max(1,a-d+1),S=Math.min(a+d,e.length)+n.length,I=Array(S+2);I[S+1]=(1<<_)-1;for(var M=S;M>=y;M--){var E=t[e.charAt(M-1)];if(_===0?I[M]=(I[M+1]<<1|1)&E:I[M]=(I[M+1]<<1|1)&E|((b[M+1]|b[M])<<1|1)|b[M+1],I[M]&c){var T=r(_,M-1);if(T<=i)if(i=T,l=M-1,l>a)y=Math.max(1,2*a-l);else break}}if(r(_+1,a)>i)break;b=I}return l},p.prototype.match_alphabet_=function(e){for(var n={},a=0;a<e.length;a++)n[e.charAt(a)]=0;for(var a=0;a<e.length;a++)n[e.charAt(a)]|=1<<e.length-a-1;return n},p.prototype.patch_addContext_=function(e,n){if(n.length!=0){if(e.start2===null)throw Error("patch not initialized");for(var a=n.substring(e.start2,e.start2+e.length1),t=0;n.indexOf(a)!=n.lastIndexOf(a)&&a.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)t+=this.Patch_Margin,a=n.substring(e.start2-t,e.start2+e.length1+t);t+=this.Patch_Margin;var s=n.substring(e.start2-t,e.start2);s&&e.diffs.unshift(new p.Diff(m,s));var r=n.substring(e.start2+e.length1,e.start2+e.length1+t);r&&e.diffs.push(new p.Diff(m,r)),e.start1-=s.length,e.start2-=s.length,e.length1+=s.length+r.length,e.length2+=s.length+r.length}},p.prototype.patch_make=function(e,n,a){var t,s;if(typeof e=="string"&&typeof n=="string"&&typeof a>"u")t=e,s=this.diff_main(t,n,!0),s.length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(e&&typeof e=="object"&&typeof n>"u"&&typeof a>"u")s=e,t=this.diff_text1(s);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof a>"u")t=e,s=n;else if(typeof e=="string"&&typeof n=="string"&&a&&typeof a=="object")t=e,s=a;else throw new Error("Unknown call format to patch_make.");if(s.length===0)return[];for(var r=[],i=new p.patch_obj,l=0,c=0,h=0,d=t,u=t,b=0;b<s.length;b++){var _=s[b][0],y=s[b][1];switch(!l&&_!==m&&(i.start1=c,i.start2=h),_){case f:i.diffs[l++]=s[b],i.length2+=y.length,u=u.substring(0,h)+y+u.substring(h);break;case v:i.length1+=y.length,i.diffs[l++]=s[b],u=u.substring(0,h)+u.substring(h+y.length);break;case m:y.length<=2*this.Patch_Margin&&l&&s.length!=b+1?(i.diffs[l++]=s[b],i.length1+=y.length,i.length2+=y.length):y.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(i,d),r.push(i),i=new p.patch_obj,l=0,d=u,c=h);break}_!==f&&(c+=y.length),_!==v&&(h+=y.length)}return l&&(this.patch_addContext_(i,d),r.push(i)),r},p.prototype.patch_deepCopy=function(e){for(var n=[],a=0;a<e.length;a++){var t=e[a],s=new p.patch_obj;s.diffs=[];for(var r=0;r<t.diffs.length;r++)s.diffs[r]=new p.Diff(t.diffs[r][0],t.diffs[r][1]);s.start1=t.start1,s.start2=t.start2,s.length1=t.length1,s.length2=t.length2,n[a]=s}return n},p.prototype.patch_apply=function(e,n){if(e.length==0)return[n,[]];e=this.patch_deepCopy(e);var a=this.patch_addPadding(e);n=a+n+a,this.patch_splitMax(e);for(var t=0,s=[],r=0;r<e.length;r++){var i=e[r].start2+t,l=this.diff_text1(e[r].diffs),c,h=-1;if(l.length>this.Match_MaxBits?(c=this.match_main(n,l.substring(0,this.Match_MaxBits),i),c!=-1&&(h=this.match_main(n,l.substring(l.length-this.Match_MaxBits),i+l.length-this.Match_MaxBits),(h==-1||c>=h)&&(c=-1))):c=this.match_main(n,l,i),c==-1)s[r]=!1,t-=e[r].length2-e[r].length1;else{s[r]=!0,t=c-i;var d;if(h==-1?d=n.substring(c,c+l.length):d=n.substring(c,h+this.Match_MaxBits),l==d)n=n.substring(0,c)+this.diff_text2(e[r].diffs)+n.substring(c+l.length);else{var u=this.diff_main(l,d,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(u)/l.length>this.Patch_DeleteThreshold)s[r]=!1;else{this.diff_cleanupSemanticLossless(u);for(var b=0,_,y=0;y<e[r].diffs.length;y++){var S=e[r].diffs[y];S[0]!==m&&(_=this.diff_xIndex(u,b)),S[0]===f?n=n.substring(0,c+_)+S[1]+n.substring(c+_):S[0]===v&&(n=n.substring(0,c+_)+n.substring(c+this.diff_xIndex(u,b+S[1].length))),S[0]!==v&&(b+=S[1].length)}}}}}return n=n.substring(a.length,n.length-a.length),[n,s]},p.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,a="",t=1;t<=n;t++)a+=String.fromCharCode(t);for(var t=0;t<e.length;t++)e[t].start1+=n,e[t].start2+=n;var s=e[0],r=s.diffs;if(r.length==0||r[0][0]!=m)r.unshift(new p.Diff(m,a)),s.start1-=n,s.start2-=n,s.length1+=n,s.length2+=n;else if(n>r[0][1].length){var i=n-r[0][1].length;r[0][1]=a.substring(r[0][1].length)+r[0][1],s.start1-=i,s.start2-=i,s.length1+=i,s.length2+=i}if(s=e[e.length-1],r=s.diffs,r.length==0||r[r.length-1][0]!=m)r.push(new p.Diff(m,a)),s.length1+=n,s.length2+=n;else if(n>r[r.length-1][1].length){var i=n-r[r.length-1][1].length;r[r.length-1][1]+=a.substring(0,i),s.length1+=i,s.length2+=i}return a},p.prototype.patch_splitMax=function(e){for(var n=this.Match_MaxBits,a=0;a<e.length;a++)if(!(e[a].length1<=n)){var t=e[a];e.splice(a--,1);for(var s=t.start1,r=t.start2,i="";t.diffs.length!==0;){var l=new p.patch_obj,c=!0;for(l.start1=s-i.length,l.start2=r-i.length,i!==""&&(l.length1=l.length2=i.length,l.diffs.push(new p.Diff(m,i)));t.diffs.length!==0&&l.length1<n-this.Patch_Margin;){var h=t.diffs[0][0],d=t.diffs[0][1];h===f?(l.length2+=d.length,r+=d.length,l.diffs.push(t.diffs.shift()),c=!1):h===v&&l.diffs.length==1&&l.diffs[0][0]==m&&d.length>2*n?(l.length1+=d.length,s+=d.length,c=!1,l.diffs.push(new p.Diff(h,d)),t.diffs.shift()):(d=d.substring(0,n-l.length1-this.Patch_Margin),l.length1+=d.length,s+=d.length,h===m?(l.length2+=d.length,r+=d.length):c=!1,l.diffs.push(new p.Diff(h,d)),d==t.diffs[0][1]?t.diffs.shift():t.diffs[0][1]=t.diffs[0][1].substring(d.length))}i=this.diff_text2(l.diffs),i=i.substring(i.length-this.Patch_Margin);var u=this.diff_text1(t.diffs).substring(0,this.Patch_Margin);u!==""&&(l.length1+=u.length,l.length2+=u.length,l.diffs.length!==0&&l.diffs[l.diffs.length-1][0]===m?l.diffs[l.diffs.length-1][1]+=u:l.diffs.push(new p.Diff(m,u))),c||e.splice(++a,0,l)}}},p.prototype.patch_toText=function(e){for(var n=[],a=0;a<e.length;a++)n[a]=e[a];return n.join("")},p.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var a=e.split(`
`),t=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;t<a.length;){var r=a[t].match(s);if(!r)throw new Error("Invalid patch string: "+a[t]);var i=new p.patch_obj;for(n.push(i),i.start1=parseInt(r[1],10),r[2]===""?(i.start1--,i.length1=1):r[2]=="0"?i.length1=0:(i.start1--,i.length1=parseInt(r[2],10)),i.start2=parseInt(r[3],10),r[4]===""?(i.start2--,i.length2=1):r[4]=="0"?i.length2=0:(i.start2--,i.length2=parseInt(r[4],10)),t++;t<a.length;){var l=a[t].charAt(0);try{var c=decodeURI(a[t].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+c)}if(l=="-")i.diffs.push(new p.Diff(v,c));else if(l=="+")i.diffs.push(new p.Diff(f,c));else if(l==" ")i.diffs.push(new p.Diff(m,c));else{if(l=="@")break;if(l!=="")throw new Error('Invalid patch mode "'+l+'" in: '+c)}t++}}return n},p.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},p.patch_obj.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1==1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2==1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var a=["@@ -"+e+" +"+n+` @@
`],t,s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case f:t="+";break;case v:t="-";break;case m:t=" ";break}a[s+1]=t+encodeURI(this.diffs[s][1])+`
`}return a.join("").replace(/%20/g," ")},A.exports=p,A.exports.diff_match_patch=p,A.exports.DIFF_DELETE=v,A.exports.DIFF_INSERT=f,A.exports.DIFF_EQUAL=m})(Be);var Dn=Be.exports;const En=["https://api.deathwing.me","https://api.hive.blog","https://api.openhive.network","https://api.hive.blog","https://anyx.io","https://api.pharesim.me"],Tn=({isOpen:A,onClose:p,title:v,content:f,author:m,permlink:e,weight:n,comments:a=[],postUrl:t,userVote:s,json_metadata:r,images:i,thumbnail:l})=>{const c=`https://images.ecency.com/webp/u/${m}/avatar/small`,{user:h}=Oe(),d=!!h;h&&h.name;const u=k.useRef(null),[b,_]=k.useState(!1),[y,S]=k.useState(f);k.useState(new _e.Client(En[0])),k.useState(0);const[I,M]=k.useState(!1),[E,T]=k.useState(null),[x,O]=k.useState([]);k.useState(null);function P(D){const F=/https:\/\/www\.youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/g;let L=D.replace(F,(z,G)=>`<div style="display: flex; justify-content: center; "><iframe width="560" height="315" src="https://www.youtube.com/embed/${G}" frameborder="0" allow="accelerometer;  encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`);return L=cn(L),L=pn(L),L}const j=D=>{const F=/!\[.*?\]\((.*?)\)/g,L=D.match(F);return L?L.map(z=>{const G=z.match(/\((.*?)\)/);return G?G[1]:""}):[]};k.useEffect(()=>{const F=JSON.parse(r).images||[],L=j(f),z=Array.from(new Set([...F,...L]));O(z)},[r,f]);const U=new Dn.diff_match_patch,N=(D,F)=>{const L=U.patch_make(D,F);if(L.length>0){const z=U.patch_toText(L);if(!U.patch_apply(L,D)[1].some(ne=>!ne))return z}return null},re=()=>{const D=h==null?void 0:h.name;if(D&&window.hive_keychain){const F=JSON.parse(r),L=F.tags||[],z=N(f,y);if(z){const G=z.length<new TextEncoder().encode(f).length?U.patch_apply(U.patch_fromText(z),f)[0]:y,ne=E||l||null,de={...F,thumbnail:ne,image:x},ye=[["comment",{parent_author:"",parent_permlink:L[0]||"",author:D,permlink:e,title:v,body:G,thumbnail:ne,json_metadata:JSON.stringify(de)}]];window.hive_keychain.requestBroadcast(D,ye,"posting",ge=>{ge.success?(_(!1),S(G)):console.error("Error updating the post:",ge.message)})}else alert("No changes detected, if you are trying to change the thumbnail, change at least one character on the post.")}else console.error("Hive Keychain extension not found or user not authenticated!");_(!1)},be=()=>{_(!1),S(f)},oe=()=>{_(!0)},Y=()=>`${window.location.origin}/post${t}`;k.useState(0);const[ae,ve]=k.useState(!1);k.useState(Date.now()),Le();const le={title:v,content:f,author:m,permlink:e,weight:n,comments:a,postUrl:t},we=Y().replace(window.location.origin,""),[q,ce]=k.useState(!1),pe=()=>{try{const D=Y();navigator.clipboard.writeText(D),ce(!0),setTimeout(()=>{ce(!1)},3e3)}catch(D){console.error("Failed to copy the link:",D)}},ke=()=>{try{const D=Y();window.open("https://warpcast.com/~/compose?text=I am shredding on my last SkateHive post, check it out: "+D,"_blank")}catch(D){console.error("Failed to share in WarpCast:",D)}},he=()=>{try{const D=Y();window.open("https://twitter.com/intent/tweet?text=I am shredding on my last SkateHive post, check it out: "+D,"_blank")}catch(D){console.error("Failed to share in WarpCast:",D)}};let ee=P(f);return ee=Xe(ee),o.jsxs(ue,{isOpen:A,onClose:p,size:"3xl",children:[o.jsx(me,{style:{background:"rgba(0, 0, 0, 0.8)"}}),o.jsxs(fe,{backgroundColor:"black",boxShadow:"0px 0px 10px 5px rgba(128,128,128,0.1)",children:[o.jsxs(Fe,{children:[o.jsx(Mn,{title:v,author:m,avatarUrl:c,postUrl:t,permlink:e,onClose:p}),o.jsxs(Ee,{justifyContent:"space-between",children:[o.jsx(B,{leftIcon:o.jsx(Qe,{}),color:"white",bg:"black",border:"1px solid orange",margin:"15px",display:{base:"none",md:"flex"},onClick:pe,children:q?"Link Copied!":"Share Post"}),o.jsx(B,{leftIcon:o.jsx("img",{src:"/assets/warpcast.png",alt:"WarpCast",style:{width:"20px",marginRight:"5px"}}),color:"white",bg:"black",border:"1px solid orange",margin:"15px",display:{base:"none",md:"flex"},onClick:ke,children:q?"Share it":"WarpCast"}),o.jsx(B,{leftIcon:o.jsx(qe,{}),color:"white",bg:"black",border:"1px solid orange",margin:"15px",display:{base:"none",md:"flex"},onClick:he,children:q?"Share it!":"Twitter"}),o.jsx(De,{to:{pathname:we,state:{post:le}},children:o.jsx(B,{leftIcon:o.jsx(en,{}),color:"white",bg:"black",margin:"15px",border:"1px solid orange",children:"View Page"})})]})]}),d&&h.name===m&&!b&&o.jsx(Z,{marginRight:"40px",justifyContent:"flex-end",marginTop:3,children:o.jsx(B,{id:"editButton",onClick:oe,leftIcon:o.jsx(nn,{}),colorScheme:"red",variant:"outline",mr:2,children:"Edit"})}),o.jsx(Z,{marginLeft:"20px",justifyContent:"flex-start",marginTop:3}),b?o.jsx("center",{children:o.jsx(xe,{label:"Optional. Select a thumbnail only if you wish to change the current one","aria-label":"A tooltip",children:o.jsx(Q,{fontSize:"42px",children:"Select New Thumbnail"})})}):null,x&&x.length>0&&o.jsx(Z,{borderRadius:"10px",m:"25px",marginBottom:"-25px",padding:"10px",alignItems:"center",marginTop:4,children:o.jsx(Z,{direction:"row",alignItems:"center",flexWrap:"wrap",children:b?x.map((D,F)=>o.jsxs(Te.Fragment,{children:[o.jsx("img",{src:D,alt:`Thumbnail ${F+1}`,style:{objectFit:"cover",cursor:"pointer",border:E===D?"2px solid teal":"none",width:"148px",marginRight:(F+1)%4===0?0:"10px",marginBottom:"10px",borderRadius:"5px"},onClick:()=>T(D)}),(F+1)%4===0&&o.jsx("br",{})]},F)):null})}),o.jsxs(Ve,{ref:u,children:[b?o.jsxs(rn,{children:[o.jsx(Q,{fontSize:"42px",children:"Change your Post"}),o.jsx(an,{value:y,onChange:D=>S(D.target.value),height:500})]}):o.jsx(Te.Fragment,{children:o.jsx(sn,{components:Cn,rehypePlugins:[tn],remarkPlugins:[on],children:ee})}),d&&h.name===m&&b&&o.jsx(Z,{marginTop:"10px",justifyContent:"center",children:o.jsxs(Ee,{children:[o.jsx(B,{onClick:re,colorScheme:"green",variant:"solid",marginRight:2,children:"Save"}),o.jsx(B,{onClick:be,colorScheme:"red",variant:"solid",children:"Cancel"})]})})]}),o.jsx(jn,{comments:a,commentPosted:ae,blockedUser:"hivebuzz",permlink:""}),d?o.jsxs("div",{children:[o.jsx(Sn,{user:h,parentAuthor:m,parentPermlink:e,onCommentPosted:()=>ve(!ae)}),o.jsx(xn,{onClose:p,user:h,author:m,permlink:e,weight:n,userVote:s})]}):o.jsx("center",{children:o.jsx(B,{color:"white",bg:"black",margin:"10px",border:"1px solid yellow",onClick:()=>M(!0),children:"Login to Comment | Vote"})}),o.jsx(ln,{isOpen:I,onClose:()=>M(!1)})]})]})};function In(A){return hn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}}]})(A)}function An(A){if(A==null)return A;let p=String(A);const v=p.charAt(0)==="-";p=v?p.substring(1):p;let f=Math.log10(parseFloat(p));return isNaN(f)&&(f=0),f=Math.max(f-9,0),f=(v?-1:1)*f,f=f*9+25,f=parseInt(f.toFixed(0)),f}const Pn=({isOpen:A,onClose:p,post:v})=>{const[f,m]=k.useState([]);let e=0;return k.useEffect(()=>{const n=parseFloat(v.pending_payout_value),t=v.active_votes.map(s=>{const r=An(s.reputation),i=parseFloat(s.percent)/1e4,l=r*i*n/1e4;return e+=l,{voter:s.voter,voting_power:(i*100).toFixed(2)+"%",contribution:l.toFixed(3),reputation:r,avatar:`https://images.hive.blog/u/${s.voter}/avatar/small`}}).sort((s,r)=>parseFloat(r.contribution)-parseFloat(s.contribution));m(t)},[v]),o.jsxs(ue,{isOpen:A,onClose:p,size:"3xl",children:[o.jsx(me,{}),o.jsxs(fe,{border:"1px solid limegreen",backgroundColor:"black",children:[o.jsx(Fe,{children:"Voters and Tips"}),o.jsx(Ue,{}),o.jsxs(Ve,{children:[o.jsxs(dn,{variant:"simple",colorScheme:"teal",size:"sm",overflowX:"auto",children:[o.jsx(gn,{children:o.jsxs(je,{children:[o.jsx(se,{children:"Avatar"}),o.jsx(se,{children:"Voter"}),o.jsx(se,{children:"Voting Power"}),o.jsx(se,{children:"Contribution"}),o.jsx(se,{children:"Reputation"})]})}),o.jsx(_n,{children:f.map((n,a)=>o.jsxs(je,{children:[o.jsx(J,{children:o.jsx(un,{size:"sm",name:n.voter,src:n.avatar})}),o.jsx(J,{children:n.voter}),o.jsx(J,{children:n.voting_power}),o.jsx(J,{children:n.contribution}),o.jsx(J,{children:n.reputation.toFixed(2)})]},a))}),o.jsx(mn,{children:o.jsxs(je,{children:[o.jsx(J,{colSpan:3}),o.jsx(J,{children:o.jsx("strong",{children:"Total Contribution:"})}),o.jsx(J,{children:o.jsx("strong",{children:e.toFixed(3)})})]})})]}),o.jsx(B,{colorScheme:"teal",variant:"outline",mt:4,leftIcon:o.jsx("img",{style:{width:"18px",height:"18px",marginBottom:"3px"},src:"https://cryptologos.cc/logos/hive-blockchain-hive-logo.png",alt:"Gift Icon"}),children:"Follow Skatehive Curation Trail"})]})]})]})};var Rn={OPENAI_API_KEY:"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",VITE_APP_COINGECKO_API_KEY:"CG-we5Z4KbdYMCgMUVAqDjQMWfc",VITE_RECAPTCHA_SITE_KEY:"6Lf6ZvgnAAAAAIa5o__Hpb0SU6UqOlM8gvd_fMx7",PINATA_API_KEY:"d2f6f2a1488052269329",PINATA_API_SECRET:"15c87a551e9fbdb21e1e6bf57e0ca18f2cff089e7b7941973b6a710412a772a6",PINATA_GATEWAY_TOKEN:"ILGh5Ktd7WAdVwav9EmOC8nFmEjN4bOmY4iXHYf-0jtkqDzr9A10_pSF9nkyZ4Mh",VITE_ETHERSCAN_API:"P4JAKWJAYVNCJNC9BWBKZHMT754MJAZ5VU",COMMUNITY:"hive-173115",NVM_INC:"/Users/web3warrior/.nvm/versions/node/v19.0.0/include/node",MANPATH:"/Users/web3warrior/.nvm/versions/node/v19.0.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Users/web3warrior/.nvm/versions/node/v19.0.0/share/man:/opt/homebrew/share/man::",npm_package_dependencies__hiveio_dhive:"^1.2.7",npm_package_dependencies_diff_match_patch:"^1.0.5",npm_package_dependencies_pioneer_platform:"^1.0.0",npm_package_devDependencies_prettier:"^3.0.2",TERM_PROGRAM:"vscode",npm_package_dependencies__fontsource_open_sans:"^5.0.14",NODE:"/Users/web3warrior/.nvm/versions/node/v19.0.0/bin/node",_P9K_TTY:"/dev/ttys001",TURBO_INVOCATION_DIR:"/Users/web3warrior/Documents/Code/pioneer/skateapp",NVM_CD_FLAGS:"-q",INIT_CWD:"/Users/web3warrior/Documents/Code/pioneer/skateapp",npm_package_dependencies__esbuild_plugins_node_globals_polyfill:"^0.2.3",npm_package_dependencies_axios:"^1.6.2",npm_package_dependencies_rehype_raw:"^6.1.1",npm_package_devDependencies__types_diff_match_patch:"^1.0.36",npm_package_devDependencies_typescript:"^5.3.3",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_package_devDependencies_vite:"^5.0.8",npm_package_dependencies__emotion_styled:"^11.11.0",TMPDIR:"/var/folders/jp/qc8nl4b54s133rs9v9v23b9m0000gn/T/",HOMEBREW_REPOSITORY:"/opt/homebrew",npm_package_dependencies__chakra_ui_icons:"^2.0.19",npm_package_dependencies_keychain_sdk:"^0.4.0",npm_package_devDependencies_esbuild:"^0.19.2",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_package_scripts_lint:"eslint src",npm_package_scripts_release:"standard-version",npm_config_global_prefix:"/Users/web3warrior/.nvm/versions/node/v19.0.0",TERM_PROGRAM_VERSION:"1.85.2",npm_package_engines_pnpm:">=8.0.0",npm_package_dependencies__ethersproject_contracts:"^5.7.0",npm_package_dependencies__fontsource_press_start_2p:"^5.0.14",npm_package_devDependencies__chakra_ui_system:"^2.6.0",npm_package_devDependencies__vitejs_plugin_react:"^4.0.0",npm_package_scripts_dev:"vite",ZDOTDIR:"/Users/web3warrior",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",npm_package_dependencies_remark_gfm:"^3.0.1",npm_package_dependencies_web3:"^4.1.0",COLOR:"1",npm_package_private:"true",npm_package_dependencies__fontsource_plus_jakarta_sans:"^5.0.11",npm_package_devDependencies_rollup_plugin_node_polyfills:"^0.2.1",npm_config_registry:"https://registry.npmjs.org/",ZSH:"/Users/web3warrior/.oh-my-zsh",PNPM_HOME:"/Users/web3warrior/Library/pnpm",npm_package_dependencies__opuscapita_react_markdown:"2.3.13",npm_package_dependencies_react_dom:"^18.2.0",npm_config_local_prefix:"/Users/web3warrior/Documents/Code/pioneer/skateapp",npm_package_dependencies_react_dropzone:"^14.2.3",npm_package_dependencies_react_html_parser:"^2.0.2",USER:"web3warrior",NVM_DIR:"/Users/web3warrior/.nvm",npm_package_scripts_up_latest:"pnpm up-interactive -L",npm_package_dependencies__uiw_react_md_editor:"^4.0.1",npm_package_dependencies_react_dnd:"^16.0.1",LS_COLORS:"di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",npm_package_scripts_type_check_turbo:"npx turbo type-check",npm_package_devDependencies__types_react:"^18.2.21",COMMAND_MODE:"unix2003",npm_package_dependencies_react_helmet_async:"^1.3.0",PNPM_SCRIPT_SRC_DIR:"/Users/web3warrior/Documents/Code/pioneer/skateapp",npm_package_dependencies__esbuild_plugins_node_modules_polyfill:"^0.2.2",npm_package_dependencies_react_qr_code:"^2.0.11",npm_config_globalconfig:"/Users/web3warrior/.nvm/versions/node/v19.0.0/etc/npmrc",npm_package_dependencies_react_icons:"^4.8.0",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.DjU4DjjTM6/Listeners",npm_package_dependencies__ethersproject_signing_key:"^5.7.0",npm_package_dependencies_pnpm:"^8.6.12",npm_package_dependencies_react_helmet:"^6.1.0",npm_package_devDependencies__types_cors:"^2.8.13",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_package_dependencies__pioneer_platform_pioneer_client:"9.0.6",npm_package_devDependencies_eslint:"^8.39.0",npm_package_devDependencies__typescript_eslint_eslint_plugin:"^6.4.1",npm_execpath:"/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/pnpm@8.12.1/node_modules/pnpm/bin/pnpm.cjs",PAGER:"less",npm_package_dependencies__ethersproject_abstract_provider:"^5.7.0",npm_package_dependencies__fontsource_londrina_solid:"^5.0.18",npm_package_dependencies_cors:"^2.8.5",npm_package_dependencies_get_blob_duration:"^1.2.0",LSCOLORS:"Gxfxcxdxbxegedabagacad",npm_package_scripts_type_check:"tsc",npm_package_dependencies__chakra_ui_react:"^2.8.1",npm_package_devDependencies__types_react_dom:"^18.2.1",npm_package_devDependencies_eslint_plugin_prettier:"^5.0.0",npm_config_frozen_lockfile:"",npm_package_scripts_push_release:"git push --follow-tags origin main",npm_package_devDependencies__babel_runtime:"^7.22.11",npm_package_devDependencies__typescript_eslint_parser:"^6.4.1",PATH:"/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.bin:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/pnpm@8.12.1/node_modules/pnpm/dist/node-gyp-bin:/Users/web3warrior/.npm/_npx/fbdd2f0c7d6dfb27/node_modules/.bin:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.bin:/Users/web3warrior/Documents/Code/pioneer/node_modules/.bin:/Users/web3warrior/Documents/Code/node_modules/.bin:/Users/web3warrior/Documents/node_modules/.bin:/Users/web3warrior/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/web3warrior/.nvm/versions/node/v19.0.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.bin:/Users/web3warrior/.nvm/versions/node/v19.0.0/lib/node_modules/pnpm/dist/node-gyp-bin:/Users/web3warrior/.rbenv/shims:/Users/web3warrior/.nvm/versions/node/v19.0.0/bin:/opt/homebrew/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Library/Frameworks/Python.framework/Versions/3.11/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/web3warrior/.rbenv/shims:/Users/web3warrior/Library/pnpm:/Users/web3warrior/.nvm/versions/node/v19.0.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Library/Frameworks/Python.framework/Versions/3.11/bin",npm_package_scripts_lint_fix:"eslint src --fix && pnpm format",npm_package_dependencies__ethersproject_providers:"^5.7.2",npm_package_dependencies_tus_js_client:"^3.1.1",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/web3warrior",npm_package_author:"skatehacker",npm_package_dependencies__react_google_maps_api:"^2.19.2",npm_config_userconfig:"/Users/web3warrior/.npmrc",npm_config_init_module:"/Users/web3warrior/.npm-init.js",PWD:"/Users/web3warrior/Documents/Code/pioneer/skateapp",npm_package_dependencies__ethersproject_abi:"^5.7.0",npm_package_dependencies_react_dnd_html5_backend:"^16.0.1",npm_command:"run-script",VSCODE_NONCE:"c1506fa0-02f8-40c1-9c1a-9e18c2fc4cbc",npm_package_dependencies__fontsource_creepster:"^5.0.8",npm_package_devDependencies_standard_version:"^9.5.0",P9K_SSH:"0",EDITOR:"vi",npm_package_dependencies__pioneer_platform_pioneer_react:"0.2.39",npm_lifecycle_event:"build",P9K_TTY:"old",LANG:"en_US.UTF-8",npm_package_name:"skatehive",npm_package_packageManager:"pnpm@8.1.0",NODE_PATH:"/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/vite@5.0.8_@types+node@20.10.4/node_modules/vite/bin/node_modules:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/vite@5.0.8_@types+node@20.10.4/node_modules/vite/node_modules:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/vite@5.0.8_@types+node@20.10.4/node_modules:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/node_modules:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/pnpm@8.12.1/node_modules/pnpm/bin/node_modules:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/pnpm@8.12.1/node_modules/pnpm/node_modules:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/pnpm@8.12.1/node_modules:/Users/web3warrior/Documents/Code/pioneer/skateapp/node_modules/.pnpm/node_modules",npm_package_scripts_build:"pnpm type-check && vite build",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",TURBO_HASH:"1bafcf8427ac91c2",npm_package_dependencies_react_router_dom:"^6.10.0",npm_package_scripts_lint_turbo:"npx turbo lint",npm_package_dependencies__pioneer_sdk_pioneer_react:"0.0.25",npm_package_dependencies__snapshot_labs_snapshot_js:"^0.5.8",npm_package_dependencies_rehype_sanitize:"^6.0.0",npm_package_engines_node:">=16.0.0",RBENV_SHELL:"zsh",npm_package_devDependencies__types_react_google_recaptcha:"^2.1.5",npm_package_devDependencies_eslint_config_prettier:"^9.0.0",npm_config_node_gyp:"/Users/web3warrior/.nvm/versions/node/v19.0.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"0.1.1",npm_package_dependencies__emotion_react:"^11.11.1",npm_package_dependencies__safe_global_protocol_kit:"^1.3.0",npm_package_dependencies_chart_js:"^4.4.0",VSCODE_INJECTION:"1",npm_package_scripts_up_interactive:"pnpm up -i",SHLVL:"4",HOME:"/Users/web3warrior",npm_package_type:"module",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_events:"^3.3.0",npm_package_dependencies_react_markdown:"^8.0.7",npm_package_scripts_build_turbo:"npx turbo build",npm_package_scripts_serve:"vite preview",npm_package_dependencies_dotenv:"^16.3.1",npm_package_dependencies_framer_motion:"^10.16.4",npm_package_dependencies_openai:"^4.3.0",HOMEBREW_PREFIX:"/opt/homebrew",npm_package_devDependencies_husky:"^8.0.3",npm_config_enable_pre_post_scripts:"true",npm_package_dependencies__rollup_plugin_node_resolve:"^15.2.3",LOGNAME:"web3warrior",LESS:"-R",npm_package_scripts_format:"prettier --write src",npm_config_cache:"/Users/web3warrior/.npm",npm_lifecycle_script:"pnpm type-check && vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/jp/qc8nl4b54s133rs9v9v23b9m0000gn/T/vscode-git-da7c86b892.sock",npm_package_dependencies_ethers:"5",npm_package_dependencies_react:"^18.2.0",NVM_BIN:"/Users/web3warrior/.nvm/versions/node/v19.0.0/bin",npm_config_user_agent:"pnpm/8.12.1 npm/? node/v19.0.0 darwin arm64",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_package_dependencies_react_chartjs_2:"^5.2.0",npm_package_devDependencies__types_node:"^20.5.8",npm_package_devDependencies__types_react_helmet:"^6.1.6",npm_package_scripts_prepare:"husky install",npm_package_dependencies_typed_js:"^2.0.16",npm_package_dependencies__fontsource_variable_roboto_mono:"^5.0.13",COLORTERM:"truecolor",npm_package_devDependencies__rollup_plugin_inject:"^5.0.3",npm_config_prefix:"/Users/web3warrior/.nvm/versions/node/v19.0.0",npm_node_execpath:"/Users/web3warrior/.nvm/versions/node/v19.0.0/bin/node",NODE_ENV:"production"};const te=["https://api.deathwing.me","https://api.hive.blog","https://api.openhive.network","https://api.hive.blog","https://anyx.io","https://api.pharesim.me"],Me="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fc.tenor.com%2FZco-fadJri4AAAAd%2Fcode-matrix.gif&f=1&nofb=1&ipt=9a9b3c43e852a375c62be78a0faf338d6b596b4eca90e5c37f75e20725a3fc67&ipo=images",Ie=69.42,Ae=["Don't mall grab, or do it, you do you...","'Ok to push Mongo, it is! -master yoda'","Roll one, and play some stoken.quest?","Remember Mirc times ?","Fuck instagram!","Ready to grind on chain?","Praise whoever made skatevideosite","Loading Stokenomics...","Initiating Proof of Stoke...","We will load as fast as Daryl Rolls","Who was Gnartoshi Shredamoto?","We have secret sections here, can you find?"],Pe=()=>{const A=Math.floor(Math.random()*Ae.length),p=Ae[A];return o.jsxs("center",{children:[o.jsx(ie,{boxSize:"300px",src:"https://www.gnars.wtf/images/logo.png"}),o.jsx(Q,{children:p})]})},Un=({queryType:A="created",tag:p=Rn.COMMUNITY})=>{const[v,f]=k.useState([]),[m,e]=k.useState(p),[n,a]=k.useState(!0),[t,s]=k.useState(!1),[r,i]=k.useState(null),[l,c]=k.useState(new _e.Client(te[0])),[h,d]=k.useState(0),[u,b]=k.useState([]),[_,y]=k.useState(!1),[S,I]=k.useState(null),[M,E]=k.useState(null),[T,x]=k.useState(20),[O]=k.useState(20),[P]=k.useState(10),{user:j,isLoggedIn:U}=Oe();k.useState(!1);const[N,re]=k.useState(!1),[be,oe]=k.useState("");k.useState("");const Y=async(g,w)=>{try{const C=await l.database.call("get_content",[g,w]),R=parseFloat(C.total_payout_value.split(" ")[0]),$=parseFloat(C.curator_payout_value.split(" ")[0]),V=parseFloat(C.pending_payout_value.split(" ")[0]);return R+$+V}catch{const R=(h+1)%te.length;return d(R),c(new _e.Client(te[R])),Y(g,w)}},{isOpen:ae,onOpen:ve,onClose:le}=fn();function we(g){const w=/!\[.*?\]\((.*?)\)/,C=g.match(w);return C?C[1]:null}function q(g){return g.map(w=>{const R=JSON.parse(w.json_metadata).thumbnail||we(w.body)||Me;return{...w,thumbnail:R,earnings:0}})}const ce=async()=>{s(!0);try{const g={tag:m,limit:T+P},C=(await l.database.getDiscussions(A,g)).slice(T),R=q(C),$=R.map(H=>Y(H.author,H.permlink).catch(X=>(console.log(X),Ie))),V=await Promise.all($),W=R.map((H,X)=>({...H,earnings:V[X]}));f(H=>[...H,...W]),x(T+P)}catch(g){console.log(g)}s(!1)},pe=async()=>{a(!0);try{const g={tag:m,limit:O},w=await l.database.getDiscussions(A,g),C=q(w),R=C.map(W=>Y(W.author,W.permlink).catch(H=>(console.log(H),Ie))),$=await Promise.all(R),V=C.map((W,H)=>({...W,earnings:$[H]}));f(V)}catch(g){console.log(g)}a(!1)};k.useEffect(()=>{pe()},[m]);const ke=()=>{ce()},he=async(g,w)=>{try{let C=await l.call("bridge","get_discussion",{author:g,permlink:w,observer:(j==null?void 0:j.name)||""});const R=`${g}/${w}`;delete C[R];for(const V in C){const H=C[V].replies;C[V].repliesFetched=[];for(let X=0;X<H.length;X++){const Ke=H[X];C[V].repliesFetched.push(C[Ke])}C[V].net_votes=C[V].active_votes.length}const $=[];for(const V in C){const W=C[V];W.parent_author===g&&W.parent_permlink===w&&$.push(C[V])}return $}catch{const R=(h+1)%te.length;return d(R),c(new _e.Client(te[R])),he(g,w)}},ee=()=>{const g=window.innerWidth;return g>=1400?5:g>=1100?4:g>=800?3:g>=500?2:1},[D,F]=k.useState(ee());k.useEffect(()=>{const g=()=>{F(ee())};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),Le();const L=g=>{I(g),y(!0)},z=g=>{const w=/!\[.*?\]\((.*?)\)/g;return(g.match(w)||[]).map(R=>R.replace(/!\[.*?\]\((.*?)\)/,"$1"))},G=async g=>{z(g.body),i(g);const w=await he(g.author,g.permlink);b(w),E(g.url),ve()},ne=Se`
    transform: scale(1.01); /* Increase size by 5% */
    transition: transform 0.2s ease-in-out; /* Add a smooth transition effect */
    box-shadow: 0 0 150px rgba(0, 128, 0, 0.5); /* Add a green box shadow for the glow effect */
  `,de=Se`
    border-radius: 10px;
    /* Add a higher z-index to display the card above other cards */
    /* ... (other styles) */
    &:hover {
      ${ne}/* Apply hover styles when hovering over the card */
    }
  `,ye=(g,w=60)=>(g=g.toUpperCase(),g.length<=w?g:g.substring(0,w-3)+"..."),ge=async g=>{if(!U()){oe("You have to login first ! Dãããã... "),re(!0);return}try{const w=(j==null?void 0:j.name)||"";let C=1e4;Ce(g)&&(C=0),await He(w,g.permlink,g.author,C),a(!0),f([]),x(20),setTimeout(()=>{pe()},3e3)}catch(w){console.error("Error while voting:",w),oe("Error While Voting! May be you already voted with the same weight. Try refreshing the page!"),re(!0)}};Se`
    background-color: "linear-gradient(to top, #0D0D0D, #1C1C1C, #000000)";
  `;const Ce=g=>{const w=g.active_votes.find(R=>R.voter===(j==null?void 0:j.name)),C=parseInt(w==null?void 0:w.percent);return!!(w&&(C>0||C<0))},ze=g=>{const w=g.active_votes.find(R=>R.voter===(j==null?void 0:j.name)),C=parseInt(w==null?void 0:w.percent);return w&&(C>0||C<0)?{isVoted:!0,rshares:w.rshares,percent:C}:{isVoted:!1,rshares:0,percent:0}},We=g=>Ce(g)?{width:"10px",backgroundColor:"mediumspringgreen",color:"mediumvioletred"}:{width:"10px"},Ge=g=>Ce(g)?{backgroundColor:"yellow",color:"black",boxShadow:"0 0 8px yellow, 0 0 8px yellow, 0 0 8px orange",border:"2px solid yellow"}:{backgroundColor:"black",color:"white",boxShadow:"0 0 8px yellow, 0 0 8px yellow, 0 0 8px yellow",border:"2px solid yellow"};return o.jsxs(K,{marginTop:"0",children:[n?o.jsx(Pe,{}):o.jsxs(o.Fragment,{children:[o.jsx(Ne,{isOpen:N,onClose:()=>re(!1),errorMessage:be}),o.jsx(K,{display:"grid",gridTemplateColumns:`repeat(${D}, minmax(280px, 1fr))`,gridGap:1,children:v.map(g=>o.jsxs(bn,{bg:"linear-gradient(to top,  black, #070807, grey, black)",maxW:"md",mb:2,onClick:()=>G(g),cursor:"pointer",css:de,style:{backgroundSize:"100% auto",backgroundPosition:"center top",backgroundRepeat:"no-repeat"},children:[o.jsx(vn,{children:o.jsx(Z,{css:de,borderRadius:"10px",justifyContent:"center",alignItems:"center",children:o.jsx(Re,{color:"white",paddingTop:"10px",fontFamily:"Londrina Solid, cursive",size:"lg",children:g.author})})}),o.jsx(K,{padding:"20px",marginBottom:"10px",height:"200px",children:o.jsx(ie,{objectFit:"cover",border:"1px solid black",borderRadius:"10px",src:g.thumbnail||Me,alt:"Post Thumbnail",height:"100%",minH:"200px",width:"100%",bg:"black",onError:w=>{w.currentTarget.src=Me}},g.id)}),o.jsx(wn,{children:o.jsx(K,{borderRadius:"0px",minWidth:"100%",minHeight:"100%",style:{backgroundSize:"100% 100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",marginBottom:"-40px",paddingBottom:"40px"},children:o.jsx(Q,{fontWeight:"semibold",fontFamily:"Londrina Solid, cursive",color:"white",paddingLeft:"5px",paddingTop:"10px",paddingRight:"5px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",children:ye(g.title)})})}),o.jsxs(kn,{style:{backgroundImage:g.earnings>30?"url('https://images.hive.blog/0x0/https://files.peakd.com/file/peakd-hive/web-gnar/EocCPiTarW3qvJ2tp67PbkHCwcpac51SkMpTqDg6HjTQZYDncJvxkikLToUUBEHWG8A.gif')":g.earnings>=10&&g.earnings<=20?"url('https://images.hive.blog/0x0/https://files.peakd.com/file/peakd-hive/web-gnar/EnymbnXgVUtxPZPsL3n1nQRYkhnv1VBGfV3ABoPLqN5VKgdjhV9wiH9hBtz8e1iVTXF.gif')":g.earnings>=20&&g.earnings<=30?"url('/assets/money.gif')":"none",backgroundSize:"100% auto",backgroundPosition:"center bottom",backgroundRepeat:"no-repeat",overflow:"hidden",borderRadius:"10px"},children:[o.jsx(De,{to:`profile/${g.author}`,children:o.jsx(ie,{border:"0px solid black",borderRadius:"10px",src:`https://images.ecency.com/webp/u/${g.author}/avatar/small`,width:"105%",height:"105%",style:{boxShadow:"0 8px 12px rgba(0, 0, 0, 0.8)"}})}),o.jsx(xe,{color:"white",backgroundColor:"grey",border:"1px dashed black",label:o.jsxs("div",{style:{color:"black"},children:["45% - 🛹 Author + Benef. ",o.jsx("br",{})," 50% - 🧡 Voters ",o.jsx("br",{})," ","5% - 🏦 Treasury* ",o.jsx("br",{}),o.jsx("br",{})," Click to Learn More"," "]}),"aria-label":"View Voters",children:o.jsx(B,{position:"absolute",bottom:"5px",right:"10px",onClick:w=>{w.stopPropagation(),L(g)},variant:"ghost",colorScheme:"yellow",size:"s",ml:2,style:{fontFamily:"Londrina Solid, cursive",fontSize:`${Math.min(46,13+g.earnings*1.2)}px`,textShadow:"2px 2px 1px rgba(0, 0, 0, 1)",transition:"background-color 0.3s ease-in-out"},_hover:{backgroundColor:"transparent"},children:g.earnings.toFixed(2)})}),o.jsx(K,{marginLeft:"auto",children:o.jsx(xe,{backgroundColor:"black",border:"1px dashed black",label:o.jsx("div",{style:{color:"orange"},children:"Wow!"}),"aria-label":"View Voters",children:o.jsx(yn,{icon:o.jsx(In,{}),backgroundColor:"black",color:"black",size:"sm",borderRadius:"50%","aria-label":"Upvote",border:"1px solid white",borderColor:"black",onClick:w=>{w.stopPropagation(),ge(g)},style:We(g),_hover:Ge(g)})})})]})]},g.permlink))}),o.jsx(K,{display:"flex",justifyContent:"center",children:o.jsx(B,{variant:"outline",colorScheme:"green",onClick:ke,children:"Load More"})}),t&&o.jsx(Pe,{})]}),o.jsxs(ue,{isOpen:ae,onClose:le,size:"xl",children:[o.jsx(me,{}),o.jsx(fe,{children:o.jsx(Tn,{title:r==null?void 0:r.title,content:r==null?void 0:r.body,author:r==null?void 0:r.author,user:r==null?void 0:r.user,permlink:r==null?void 0:r.permlink,weight:r==null?void 0:r.weight,onClose:le,isOpen:ae,comments:u,postUrl:r==null?void 0:r.url,userVote:r?ze(r):null,json_metadata:r==null?void 0:r.json_metadata,images:r==null?void 0:r.images,thumbnail:r==null?void 0:r.thumbnail})})]}),o.jsxs(ue,{isOpen:_,onClose:()=>y(!1),size:"xl",children:[o.jsx(me,{}),o.jsx(fe,{children:o.jsx(Pn,{isOpen:_,onClose:()=>y(!1),post:S})})]})]})},Fn=Un;export{Fn as H};
