import{Z,r as s,H as X,Q as ee,j as e,s as l,U as se,I as u,F as y,B as te,k as g,T as oe,b as ae,c as f,d as re,e as x,Y as ne,_ as ie,$ as le,E as ce,A as de,J as A}from"./index-MtGPO_T6.js";import{H as pe}from"./Feed-byI0EIqb.js";import{M as he}from"./MarkdownRenderers-Avr826kM.js";const w="https://i.ibb.co/r20bWsF/You-forgot-to-add-a-cover.gif";function Se(){const{username:b}=Z(),[a,_]=s.useState(""),[F,I]=s.useState(w),[ue,R]=s.useState(null),[z,T]=s.useState(null),[k,B]=s.useState(!1),n=X(),[ge,C]=s.useState({}),[j,H]=s.useState(!1),[P,fe]=s.useState([]),[v]=ee("(max-width: 600px)"),E=v?2:19/6,[c,V]=s.useState("https://i.gifer.com/origin/f1/f1a737e4cfba336f974af05abab62c8f_w200.gif"),[p,U]=s.useState(0),[L,N]=s.useState(0),[W,M]=s.useState(0),[D,xe]=s.useState(0),[be,K]=s.useState(0);s.useEffect(()=>{(async()=>{var o,i,h;if(b){_(b);try{const r=await new ce.Client("https://api.hive.blog").database.getAccounts([a]);R(r[0].name);const S=parseFloat(r[0].balance.toString()),q=parseFloat(r[0].hbd_balance.toString()),Q=parseFloat(r[0].vesting_shares.toString());N(S),M(q),K(Q);const m=JSON.parse(r[0].posting_json_metadata),Y=((o=m.profile)==null?void 0:o.about)||null,$=((i=m.profile)==null?void 0:i.cover_image)||w;I($),T(Y),V(((h=m.profile)==null?void 0:h.profile_image)||w);const G=r[0].witness_votes.includes("skatehive");B(G)}catch(d){console.error("Error fetching author metadata:",d)}}})()},[a]);async function O(t,o){if(t===o)return{};try{return(await de.post("https://api.hive.blog",{jsonrpc:"2.0",method:"bridge.get_relationship_between_accounts",params:[t,o],id:1})).data.result}catch(i){return console.error("Error fetching relationship:",i),{}}}s.useEffect(()=>{var t;n&&a&&O((t=n==null?void 0:n.user)==null?void 0:t.name,a).then(o=>{C(o),H(o.follows)})},[n,a]);const J=async()=>{var h;if(!n.isLoggedIn()){alert("Please log in first.");return}if(!a){alert("Author's username is missing.");return}const t=(h=n.user)==null?void 0:h.name,i=j?"":"blog";try{const d=new A.KeychainSDK(window),r={data:{username:t,id:"follow",method:A.KeychainKeyTypes.posting,json:JSON.stringify(["follow",{follower:t,following:a,what:[i]}]),display_msg:"Follow User"}},S=await d.custom(r.data)}catch(d){console.log({error:d})}};return e.jsxs(l,{fontFamily:"'Courier New', monospace",overflow:"hidden",maxWidth:"100%",margin:"0",backgroundColor:"transparent",children:[e.jsx(se,{ratio:E,children:e.jsx(u,{src:F,alt:"Cover Image",objectFit:"cover",border:"0px solid"})}),e.jsxs(y,{alignItems:"center",justifyContent:"center",padding:"10px",position:"relative",zIndex:"1",children:[e.jsx(te,{marginLeft:"75%",border:"1px solid white",bg:"transparent",color:"white",zIndex:"1",position:"absolute",_hover:{bg:"black"},onClick:J,children:j?"Unfollow":"Follow"}),c.includes("storage.googleapis.com/zapper-fi-assets/nfts")&&e.jsx(u,{src:"https://i.gifer.com/origin/a9/a95ef9bce2a1d53accc6a8018df04ff6_w200.gif",alt:"NFT background",boxSize:"320px",zIndex:"0",left:"58%",transform:"translate(-100%, -65%)",position:"absolute"}),e.jsxs(l,{position:"absolute",left:"50%",transform:"translate(-50%, -65%)",zIndex:"1",children:[e.jsx(l,{borderRadius:c.includes("storage.googleapis.com/zapper-fi-assets/nfts")?"20%":"50%",clipPath:c.includes("storage.googleapis.com/zapper-fi-assets/nfts")?"polygon(50% 0%, 100% 15%, 100% 85%, 50% 100%, 0% 85%, 0% 15%)":"",boxSize:"192px",overflow:"hidden",border:c.includes("storage.googleapis.com/zapper-fi-assets/nfts")?"0px solid lightblue":"2px solid limegreen",position:"relative",children:e.jsx(u,{src:c,alt:"profile avatar",boxSize:"100%",objectFit:"cover"})}),c.includes("storage.googleapis.com/zapper-fi-assets/nfts")&&e.jsx(l,{position:"absolute",right:"80%",top:"70%",transform:"translate(-50%, -50%)",backgroundColor:"black",color:"white",padding:"2px 4px",borderRadius:"4px",zIndex:"2",children:"NFT"})]}),e.jsx("center",{children:e.jsxs(g,{fontSize:"26px",children:[" ",a]})}),k&&e.jsx(u,{src:"https://www.stoken.quest/images/coinspin.gif",alt:"Verified Badge",boxSize:"48px",position:"absolute",left:v?"60%":"55%"})]}),e.jsx(l,{marginTop:"10px",children:e.jsx(y,{backgroundColor:"black",direction:"column",alignItems:"center",justifyContent:"center",children:e.jsxs(oe,{variant:"unstyled",colorScheme:"green",index:p,onChange:t=>U(t),children:[e.jsxs(ae,{color:"white",justifyContent:"center",children:[e.jsx(f,{borderRadius:"10px",border:"1px solid ",children:"Posts"}),e.jsx(f,{borderRadius:"10px",border:"1px solid ",children:"About"}),e.jsx(f,{borderRadius:"10px",border:"1px solid ",children:"Followers"}),e.jsx(f,{borderRadius:"10px",border:"1px solid ",children:"Wallet"})]}),e.jsxs(re,{children:[e.jsx(x,{children:p===0&&e.jsx(pe,{tag:b,queryType:"blog"})}),e.jsx(x,{children:p===1&&e.jsx(l,{border:"1px solid white",p:"30px",borderRadius:"5px",children:e.jsx(ne,{children:z||"",components:he})})}),e.jsx(x,{children:p===2&&e.jsx(ie,{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:2,children:P.map(t=>e.jsxs(le,{children:[e.jsx(u,{src:`https://images.hive.blog/u/${t.follower}/avatar`,alt:"profile avatar",borderRadius:"10%",boxSize:"120px",border:"0px solid white"}),t.follower]},t.follower))})}),e.jsx(x,{children:p===3&&e.jsxs(l,{children:[e.jsxs(g,{children:["Hive Balance: ",L]}),e.jsxs(g,{children:["HBD Balance: ",W]}),e.jsxs(g,{children:["Hive Power: ",D]})]})})]})]})})})]})}export{Se as default};
