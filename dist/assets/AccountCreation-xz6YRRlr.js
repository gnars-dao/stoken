import{E as i,r,H as R,j as e,F as y,V as B,k as p,n as O,B as h,aR as S,aS as V,aT as _,l as z,t as v,aU as H,J as x}from"./index-MtGPO_T6.js";/* empty css              */const L=new i.Client(["https://api.hive.blog","https://api.hivekings.com","https://anyx.io","https://api.openhive.network"]),M=()=>{const o=new Uint32Array(10);return crypto.getRandomValues(o),("SKATE000"+i.PrivateKey.fromSeed(o.toString()).toString()).substring(0,25)},G=(o,s,g=["owner","active","posting","memo"])=>{const l={};return g.forEach(c=>{l[c]=i.PrivateKey.fromLogin(o,s,c).toString(),l[`${c}Pubkey`]=i.PrivateKey.from(l[c]).createPublic().toString()}),l},q=async o=>{try{return(await L.database.getAccounts([o])).length===0}catch(s){return console.error("Error checking account:",s),!1}},J=o=>{const s=document.createElement("textarea");s.value=o,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)};function W(){const[o,s]=r.useState(""),[g,l]=r.useState(!1),[c,b]=r.useState(!1),[C,j]=r.useState(!1);r.useState(null);const[K,Y]=r.useState(""),[Z,A]=r.useState(""),[d,P]=r.useState(null),[u,E]=r.useState(""),[k,w]=r.useState(!1),[T,I]=r.useState(0),{user:m}=R(),U=async()=>{if(o){const t=await q(o);j(!0),t?(l(!0),b(!0)):(console.log("Account already exists. Please choose a different desiredUsername."),b(!1))}else console.log("Please enter a username.")},$=()=>{const t=M();A(t);const a=G(o,t);P(a),console.log(t),console.log(a);let n=`Username: ${o}

`;n+=`Master Password (Backup): ${t}

`,n+=`Owner Private Key: ${a.owner}

`,n+=`Active Private Key: ${a.active}

`,n+=`Posting Private Key: ${a.posting}

`,n+=`Memo Private Key: ${a.memo}



`,n+=`Email: ${K}
`,n+=`Account created: ${new Date().toUTCString()}
`,n+=`Account created by: ${m.name}
`,n+="Account created on SKATEHIVE! - skatehive.app",E(n)},D=async()=>{try{const t=new x.KeychainSDK(window);let a=[];if(m){const n=["account_create",{fee:"3.000 HIVE",creator:m.name,new_account_name:o,owner:i.Authority.from(d.ownerPubkey),active:i.Authority.from(d.activePubkey),posting:i.Authority.from(d.postingPubkey),memo_key:d.memoPubkey,json_metadata:"",extensions:[]}];console.log(n),a.push(n);const f={type:x.KeychainRequestTypes.broadcast,username:m.name,operations:a,method:x.KeychainKeyTypes.active};console.log(f);const F=await t.broadcast(f);console.log(F)}else console.log("no user")}catch(t){console.error("Error during KeychainSDK interaction:",t)}};return r.useEffect(()=>{const a=setInterval(()=>{I(n=>(n>=u.length&&clearInterval(a),n+1))},30);return()=>clearInterval(a)},[u]),e.jsx(y,{style:{backgroundImage:"url('https://i.ibb.co/Lv5C8rZ/nft-unscreen.gif')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",height:"100vh",alignItems:"center",justifyContent:"center"},children:e.jsxs(B,{spacing:3,children:[e.jsx(p,{fontFamily:"Creepster",fontSize:"66px",color:"white",children:"Invite a Shredder to Skatehive"}),e.jsx(p,{fontFamily:"Creepster",fontSize:"48px",color:"yellow",children:"Choose a username!"}),e.jsx(O,{placeholder:"Enter Hive username",backdropBlur:4,bg:"black",value:o,onChange:t=>s(t.target.value)}),e.jsx(h,{colorScheme:"yellow",border:"2px solid black",onClick:U,children:"Is it available?"}),e.jsxs(y,{border:"2px solid yellow",borderRadius:"5px",bg:"black",p:"5px",align:"center",display:C?"flex":"none",children:[c?e.jsx(S,{as:V,color:"green"}):e.jsx(S,{as:_,color:"red"}),e.jsx(p,{color:c?"yellow":"white",ml:2,children:c?"Account available":"Account unavailable"})]}),g&&e.jsxs(z,{children:[e.jsx(v,{children:e.jsx(h,{colorScheme:"yellow",border:"2px solid black",onClick:$,marginTop:5,children:"Generate Keys"})}),e.jsxs(y,{display:d?"flex":"none",direction:"column",align:"center",justify:"center",marginTop:5,children:[e.jsxs(y,{width:"100%",gap:2,justifyContent:"flex-end",marginBottom:5,children:[e.jsx(h,{colorScheme:"teal",onClick:()=>J(u),children:"Copy Keys"}),e.jsx(h,{colorScheme:"teal",onClick:()=>{const t=document.createElement("a"),a=new Blob([u],{type:"text/plain"});t.href=URL.createObjectURL(a),t.download=`KEYS BACKUP - @${o.toUpperCase()}.txt`,document.body.appendChild(t),t.click(),w(!0)},children:"Download Keys"})]}),e.jsx(p,{width:"100%",borderRadius:"15",padding:5,background:"#252525",whiteSpace:"pre",children:u.slice(0,T)})]}),e.jsxs(v,{display:d?"flex":"none",children:[e.jsx(H,{colorScheme:"teal",size:"lg",isChecked:k,onChange:t=>w(t.target.checked),children:"I have downloaded my keys."}),e.jsx(h,{onClick:D,margin:"10px",colorScheme:"teal",isDisabled:!k,children:"Sign Up"})]})]})]})})}export{W as default};
