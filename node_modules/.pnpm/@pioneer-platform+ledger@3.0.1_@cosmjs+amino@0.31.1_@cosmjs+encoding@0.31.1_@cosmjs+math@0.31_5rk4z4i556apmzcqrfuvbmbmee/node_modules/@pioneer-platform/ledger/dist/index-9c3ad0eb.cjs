"use strict";var Te=Object.create;var Ee=Object.defineProperty;var Ae=Object.getOwnPropertyDescriptor;var Oe=Object.getOwnPropertyNames;var Ie=Object.getPrototypeOf,Ne=Object.prototype.hasOwnProperty;var Be=(e,r,n)=>r in e?Ee(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var De=(e,r,n,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Oe(r))!Ne.call(e,s)&&s!==n&&Ee(e,s,{get:()=>r[s],enumerable:!(u=Ae(r,s))||u.enumerable});return e};var Q=(e,r,n)=>(n=e!=null?Te(Ie(e)):{},De(r||!e||!e.__esModule?Ee(n,"default",{value:e,enumerable:!0}):n,e));var K=(e,r,n)=>(Be(e,typeof r!="symbol"?r+"":r,n),n);const encoding=require("@cosmjs/encoding"),math=require("@cosmjs/math"),protoSigning=require("@cosmjs/proto-signing"),stargate=require("@cosmjs/stargate"),require$$1=require("long");require("@ethersproject/bignumber");const abstractSigner=require("@ethersproject/abstract-signer"),BN=require("bn.js"),bchaddrjs=require("bchaddrjs"),bitcoinjsLib=require("bitcoinjs-lib"),base=require("@scure/base"),crypto=require("crypto"),require$$0=require("buffer"),require$$0$1=require("events"),require$$1$1=require("util"),cryptoJs=require("crypto-js"),require$$1$2=require("elliptic"),coininfo=require("coininfo"),base64Js=require("base64-js");var t=(e=>(e.INVALID_INPUT_PARAMETERS="1000",e.UNKNOWN_PROVIDERS="1001",e.CANNOT_FIND_INBOUND_ADDRESS="1002",e.NO_INBOUND_ADDRESSES="1003",e.CHAIN_HALTED_OR_UNSUPPORTED="1004",e.MISSING_INPUT_PARAMETER="1005",e.INVALID_TYPE_GENERIC="1100",e.INVALID_NUMBER_STRING="1101",e.INVALID_NUMBER="1102",e.INVALID_BOOLEAN="1103",e.INVALID_OBJECT="1104",e.INVALID_ARRAY="1105",e.SELL_AMOUNT_MUST_BE_POSITIVE_INTEGER="2000",e.SELL_BUY_ASSETS_ARE_THE_SAME="2001",e.MISSING_SOURCE_ADDRESS_FOR_SYNTH="2002",e.AFF_ADDRESS_AND_BPS_OR_NEITHER="2003",e.AFF_ADDRESS_TOO_LONG="2004",e.AFF_BPS_INTEGER_0_100="2005",e.SOURCE_ADDRESS_INVALID_FOR_SELL_CHAIN="2006",e.DESTINATION_ADDRESS_INVALID_FOR_BUY_CHAIN="2007",e.PREFERRED_PROFVIDER_NOT_SUPPORTED="2008",e.DESTINATION_ADDRESS_SMART_CONTRACT="2009",e.BUY_AMOUNT_MUST_BE_POSITIVE_INTEGER="2010",e.SOURCE_ADDRESS_SMART_CONTRACT="2011",e.INVALID_PROVIDER="2100",e.MISSING_CROSS_CHAIN_PROVIDER="2101",e.MISSING_AVAX_PROVIDER="2102",e.MISSING_BSC_PROVIDER="2103",e.MISSING_ETH_PROVIDER="2104",e.INVALID_PROVIDER_FOR_SWAP_OUT="2105",e.MISSING_ARB_PROVIDER="2106",e.INVALID_CHAIN="2200",e.INVALID_ASSET="2201",e.INVALID_ASSET_IDENTIFIER="2202",e.UNSUPPORTED_CHAIN="2204",e.UNSUPPORTED_ASSET="2203",e.UNSUPPORTED_ASSET_FOR_SWAPOUT="2205",e.THORNODE_QUOTE_GENERIC_ERROR="3000",e.NOT_ENOUGH_SYNTH_BALANCE="3001",e.SYNTH_MINTING_CAP_REACHED="3002",e.INVALID_QUOTE_MODE="4000",e.NO_QUOTES="4001",e.SERVICE_UNAVAILABLE_GENERIC="5000",e.MISSING_GAS_DATA_GENERIC="5100",e.MISSING_TOKEN_INFO_GENERIC="5200",e.CANT_FIND_TOKEN_LIST="5201",e.NO_PRICE="5202",e.PRICE_IS_STALE="5203",e.ADDRESS_NOT_WHITELISTED="6000",e.ADDRESS_ALREADY_CLAIMED="6001",e.TEMPORARY_ERROR="9999",e))(t||{});t.INVALID_INPUT_PARAMETERS+"",t.UNKNOWN_PROVIDERS+"",t.CANNOT_FIND_INBOUND_ADDRESS+"",t.NO_INBOUND_ADDRESSES+"",t.CHAIN_HALTED_OR_UNSUPPORTED+"",t.MISSING_INPUT_PARAMETER+"",t.INVALID_TYPE_GENERIC+"",t.INVALID_NUMBER_STRING+"",t.INVALID_NUMBER+"",t.INVALID_BOOLEAN+"",t.INVALID_OBJECT+"",t.INVALID_ARRAY+"",t.SELL_AMOUNT_MUST_BE_POSITIVE_INTEGER+"",t.SELL_BUY_ASSETS_ARE_THE_SAME+"",t.MISSING_SOURCE_ADDRESS_FOR_SYNTH+"",t.AFF_ADDRESS_AND_BPS_OR_NEITHER+"",t.AFF_ADDRESS_TOO_LONG+"",t.AFF_BPS_INTEGER_0_100+"",t.SOURCE_ADDRESS_INVALID_FOR_SELL_CHAIN+"",t.DESTINATION_ADDRESS_INVALID_FOR_BUY_CHAIN+"",t.PREFERRED_PROFVIDER_NOT_SUPPORTED+"",t.DESTINATION_ADDRESS_SMART_CONTRACT+"",t.BUY_AMOUNT_MUST_BE_POSITIVE_INTEGER+"",t.INVALID_PROVIDER+"",t.MISSING_CROSS_CHAIN_PROVIDER+"",t.MISSING_AVAX_PROVIDER+"",t.MISSING_BSC_PROVIDER+"",t.MISSING_ETH_PROVIDER+"",t.MISSING_ARB_PROVIDER+"",t.INVALID_PROVIDER_FOR_SWAP_OUT+"",t.INVALID_CHAIN+"",t.INVALID_ASSET+"",t.UNSUPPORTED_CHAIN+"",t.UNSUPPORTED_ASSET+"",t.UNSUPPORTED_ASSET_FOR_SWAPOUT+"",t.THORNODE_QUOTE_GENERIC_ERROR+"",t.NOT_ENOUGH_SYNTH_BALANCE+"",t.SYNTH_MINTING_CAP_REACHED+"",t.INVALID_QUOTE_MODE+"",t.NO_QUOTES+"",t.SERVICE_UNAVAILABLE_GENERIC+"",t.MISSING_GAS_DATA_GENERIC+"",t.MISSING_TOKEN_INFO_GENERIC+"",t.CANT_FIND_TOKEN_LIST+"",t.NO_PRICE+"",t.PRICE_IS_STALE+"",t.ADDRESS_NOT_WHITELISTED+"",t.ADDRESS_ALREADY_CLAIMED+"";var i=(e=>(e.Arbitrum="ARB",e.Avalanche="AVAX",e.Binance="BNB",e.BinanceSmartChain="BSC",e.Bitcoin="BTC",e.BitcoinCash="BCH",e.Cosmos="GAIA",e.Dogecoin="DOGE",e.Ethereum="ETH",e.Litecoin="LTC",e.Optimism="OP",e.Polygon="MATIC",e.THORChain="THOR",e))(i||{});const q={ARB:[44,60,0,0,0],AVAX:[44,60,0,0,0],BCH:[44,145,0,0,0],BNB:[44,714,0,0,0],BSC:[44,60,0,0,0],BTC:[84,0,0,0,0],DOGE:[44,3,0,0,0],ETH:[44,60,0,0,0],GAIA:[44,118,0,0,0],LTC:[84,2,0,0,0],MATIC:[44,60,0,0,0],OP:[44,60,0,0,0],THOR:[44,931,0,0,0]};var T=(e=>(e.Arbitrum="42161",e.ArbitrumHex="0xa4b1",e.Avalanche="43114",e.AvalancheHex="0xa86a",e.Binance="Binance-Chain-Tigris",e.BinanceHex="",e.BinanceSmartChain="56",e.BinanceSmartChainHex="0x38",e.Bitcoin="bitcoin",e.BitcoinHex="",e.BitcoinCash="bitcoincash",e.BitcoinCashHex="",e.Cosmos="cosmoshub-4",e.CosmosHex="",e.Dogecoin="dogecoin",e.DogecoinHex="",e.Ethereum="1",e.EthereumHex="0x1",e.Litecoin="litecoin",e.LitecoinHex="",e.Optimism="10",e.OptimismHex="0xa",e.Polygon="137",e.PolygonHex="0x89",e.THORChain="thorchain-mainnet-v1",e.THORChainHex="",e.THORChainStagenet="thorchain-stagenet-v2",e))(T||{}),_=(e=>(e.Arbitrum="https://arb1.arbitrum.io/rpc",e.Avalanche="https://node-router.thorswap.net/avalanche-c",e.Binance="",e.BinanceSmartChain="https://bsc-dataseed.binance.org",e.Bitcoin="https://node-router.thorswap.net/bitcoin",e.BitcoinCash="https://node-router.thorswap.net/bitcoin-cash",e.Cosmos="https://node-router.thorswap.net/cosmos/rpc",e.Dogecoin="https://node-router.thorswap.net/dogecoin",e.Ethereum="https://node-router.thorswap.net/ethereum",e.Litecoin="https://node-router.thorswap.net/litecoin",e.Optimism="https://mainnet.optimism.io",e.Polygon="https://polygon-rpc.com",e.THORChain="https://rpc.thorswap.net",e.THORChainStagenet="https://stagenet-rpc.ninerealms.com",e))(_||{});const p=Object.values(i),v=Object.keys(i),o=p.reduce((e,r)=>{const n=v.find(u=>i[u]===r);return n&&(e[r]=n),e},{});p.reduce((e,r)=>(e[r]=T[o[r]],e),{});p.reduce((e,r)=>(e[r]=_[o[r]],e),{});p.reduce((e,r)=>(e[r]=T[`${o[r]}Hex`],e),{});var L=(e=>(e[e.NoError=36864]="NoError",e))(L||{}),G=(e=>(e.Average="average",e.Fast="fast",e.Fastest="fastest",e))(G||{}),U=(e=>(e.KEYSTORE="KEYSTORE",e.XDEFI="XDEFI",e.METAMASK="METAMASK",e.COINBASE_WEB="COINBASE_WEB",e.TREZOR="TREZOR",e.KEEPKEY="KEEPKEY",e.TRUSTWALLET_WEB="TRUSTWALLET_WEB",e.LEDGER="LEDGER",e.KEPLR="KEPLR",e.OKX="OKX",e.BRAVE="BRAVE",e.WALLETCONNECT="WALLETCONNECT",e))(U||{});const updatedLastIndex=(e,r)=>[...e.slice(0,e.length-1),r],getDerivationPathFor=({chain:e,index:r,type:n})=>{switch(e){case i.Avalanche:case i.Ethereum:return n==="legacy"?[44,60,0,r]:n==="ledgerLive"?[44,60,r,0,0]:updatedLastIndex(q[e],r);case i.Bitcoin:case i.Litecoin:{const u=e===i.Bitcoin?0:2;return n==="nativeSegwitMiddleAccount"?[84,u,r,0,0]:n==="segwit"?[49,u,0,0,r]:n==="legacy"?[44,u,0,0,r]:updatedLastIndex(q[e],r)}default:return updatedLastIndex(q[e],r)}},getWalletFormatFor=e=>{const[r,n]=e.split("/").map(u=>parseInt(u,10));return n===145?r===84?"cashaddr":"legacy":r===44?"legacy":"bech32"};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var signing={},multisig={},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(e,r){for(var n=new Array(arguments.length-1),u=0,s=2,f=!0;s<arguments.length;)n[u++]=arguments[s++];return new Promise(function(g,l){n[u]=function(A){if(f)if(f=!1,A)l(A);else{for(var N=new Array(arguments.length-1),I=0;I<N.length;)N[I++]=arguments[I];g.apply(null,N)}};try{e.apply(r||null,n)}catch(m){f&&(f=!1,l(m))}})}var base64$1={};(function(e){var r=e;r.length=function(g){var l=g.length;if(!l)return 0;for(var m=0;--l%4>1&&g.charAt(l)==="=";)++m;return Math.ceil(g.length*3)/4-m};for(var n=new Array(64),u=new Array(123),s=0;s<64;)u[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(g,l,m){for(var A=null,N=[],I=0,W=0,P;l<m;){var k=g[l++];switch(W){case 0:N[I++]=n[k>>2],P=(k&3)<<4,W=1;break;case 1:N[I++]=n[P|k>>4],P=(k&15)<<2,W=2;break;case 2:N[I++]=n[P|k>>6],N[I++]=n[k&63],W=0;break}I>8191&&((A||(A=[])).push(String.fromCharCode.apply(String,N)),I=0)}return W&&(N[I++]=n[P],N[I++]=61,W===1&&(N[I++]=61)),A?(I&&A.push(String.fromCharCode.apply(String,N.slice(0,I))),A.join("")):String.fromCharCode.apply(String,N.slice(0,I))};var f="invalid encoding";r.decode=function(g,l,m){for(var A=m,N=0,I,W=0;W<g.length;){var P=g.charCodeAt(W++);if(P===61&&N>1)break;if((P=u[P])===void 0)throw Error(f);switch(N){case 0:I=P,N=1;break;case 1:l[m++]=I<<2|(P&48)>>4,I=P,N=2;break;case 2:l[m++]=(I&15)<<4|(P&60)>>2,I=P,N=3;break;case 3:l[m++]=(I&3)<<6|P,N=0;break}}if(N===1)throw Error(f);return m-A},r.test=function(g){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(g)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(r,n,u){return(this._listeners[r]||(this._listeners[r]=[])).push({fn:n,ctx:u||this}),this};EventEmitter.prototype.off=function(r,n){if(r===void 0)this._listeners={};else if(n===void 0)this._listeners[r]=[];else for(var u=this._listeners[r],s=0;s<u.length;)u[s].fn===n?u.splice(s,1):++s;return this};EventEmitter.prototype.emit=function(r){var n=this._listeners[r];if(n){for(var u=[],s=1;s<arguments.length;)u.push(arguments[s++]);for(s=0;s<n.length;)n[s].fn.apply(n[s++].ctx,u)}return this};var float=factory(factory);function factory(e){return typeof Float32Array<"u"?function(){var r=new Float32Array([-0]),n=new Uint8Array(r.buffer),u=n[3]===128;function s(l,m,A){r[0]=l,m[A]=n[0],m[A+1]=n[1],m[A+2]=n[2],m[A+3]=n[3]}function f(l,m,A){r[0]=l,m[A]=n[3],m[A+1]=n[2],m[A+2]=n[1],m[A+3]=n[0]}e.writeFloatLE=u?s:f,e.writeFloatBE=u?f:s;function d(l,m){return n[0]=l[m],n[1]=l[m+1],n[2]=l[m+2],n[3]=l[m+3],r[0]}function g(l,m){return n[3]=l[m],n[2]=l[m+1],n[1]=l[m+2],n[0]=l[m+3],r[0]}e.readFloatLE=u?d:g,e.readFloatBE=u?g:d}():function(){function r(u,s,f,d){var g=s<0?1:0;if(g&&(s=-s),s===0)u(1/s>0?0:2147483648,f,d);else if(isNaN(s))u(2143289344,f,d);else if(s>34028234663852886e22)u((g<<31|2139095040)>>>0,f,d);else if(s<11754943508222875e-54)u((g<<31|Math.round(s/1401298464324817e-60))>>>0,f,d);else{var l=Math.floor(Math.log(s)/Math.LN2),m=Math.round(s*Math.pow(2,-l)*8388608)&8388607;u((g<<31|l+127<<23|m)>>>0,f,d)}}e.writeFloatLE=r.bind(null,writeUintLE),e.writeFloatBE=r.bind(null,writeUintBE);function n(u,s,f){var d=u(s,f),g=(d>>31)*2+1,l=d>>>23&255,m=d&8388607;return l===255?m?NaN:g*(1/0):l===0?g*1401298464324817e-60*m:g*Math.pow(2,l-150)*(m+8388608)}e.readFloatLE=n.bind(null,readUintLE),e.readFloatBE=n.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var r=new Float64Array([-0]),n=new Uint8Array(r.buffer),u=n[7]===128;function s(l,m,A){r[0]=l,m[A]=n[0],m[A+1]=n[1],m[A+2]=n[2],m[A+3]=n[3],m[A+4]=n[4],m[A+5]=n[5],m[A+6]=n[6],m[A+7]=n[7]}function f(l,m,A){r[0]=l,m[A]=n[7],m[A+1]=n[6],m[A+2]=n[5],m[A+3]=n[4],m[A+4]=n[3],m[A+5]=n[2],m[A+6]=n[1],m[A+7]=n[0]}e.writeDoubleLE=u?s:f,e.writeDoubleBE=u?f:s;function d(l,m){return n[0]=l[m],n[1]=l[m+1],n[2]=l[m+2],n[3]=l[m+3],n[4]=l[m+4],n[5]=l[m+5],n[6]=l[m+6],n[7]=l[m+7],r[0]}function g(l,m){return n[7]=l[m],n[6]=l[m+1],n[5]=l[m+2],n[4]=l[m+3],n[3]=l[m+4],n[2]=l[m+5],n[1]=l[m+6],n[0]=l[m+7],r[0]}e.readDoubleLE=u?d:g,e.readDoubleBE=u?g:d}():function(){function r(u,s,f,d,g,l){var m=d<0?1:0;if(m&&(d=-d),d===0)u(0,g,l+s),u(1/d>0?0:2147483648,g,l+f);else if(isNaN(d))u(0,g,l+s),u(2146959360,g,l+f);else if(d>17976931348623157e292)u(0,g,l+s),u((m<<31|2146435072)>>>0,g,l+f);else{var A;if(d<22250738585072014e-324)A=d/5e-324,u(A>>>0,g,l+s),u((m<<31|A/4294967296)>>>0,g,l+f);else{var N=Math.floor(Math.log(d)/Math.LN2);N===1024&&(N=1023),A=d*Math.pow(2,-N),u(A*4503599627370496>>>0,g,l+s),u((m<<31|N+1023<<20|A*1048576&1048575)>>>0,g,l+f)}}}e.writeDoubleLE=r.bind(null,writeUintLE,0,4),e.writeDoubleBE=r.bind(null,writeUintBE,4,0);function n(u,s,f,d,g){var l=u(d,g+s),m=u(d,g+f),A=(m>>31)*2+1,N=m>>>20&2047,I=4294967296*(m&1048575)+l;return N===2047?I?NaN:A*(1/0):N===0?A*5e-324*I:A*Math.pow(2,N-1075)*(I+4503599627370496)}e.readDoubleLE=n.bind(null,readUintLE,0,4),e.readDoubleBE=n.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,r,n){r[n]=e&255,r[n+1]=e>>>8&255,r[n+2]=e>>>16&255,r[n+3]=e>>>24}function writeUintBE(e,r,n){r[n]=e>>>24,r[n+1]=e>>>16&255,r[n+2]=e>>>8&255,r[n+3]=e&255}function readUintLE(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24)>>>0}function readUintBE(e,r){return(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={};(function(e){var r=e;r.length=function(u){for(var s=0,f=0,d=0;d<u.length;++d)f=u.charCodeAt(d),f<128?s+=1:f<2048?s+=2:(f&64512)===55296&&(u.charCodeAt(d+1)&64512)===56320?(++d,s+=4):s+=3;return s},r.read=function(u,s,f){var d=f-s;if(d<1)return"";for(var g=null,l=[],m=0,A;s<f;)A=u[s++],A<128?l[m++]=A:A>191&&A<224?l[m++]=(A&31)<<6|u[s++]&63:A>239&&A<365?(A=((A&7)<<18|(u[s++]&63)<<12|(u[s++]&63)<<6|u[s++]&63)-65536,l[m++]=55296+(A>>10),l[m++]=56320+(A&1023)):l[m++]=(A&15)<<12|(u[s++]&63)<<6|u[s++]&63,m>8191&&((g||(g=[])).push(String.fromCharCode.apply(String,l)),m=0);return g?(m&&g.push(String.fromCharCode.apply(String,l.slice(0,m))),g.join("")):String.fromCharCode.apply(String,l.slice(0,m))},r.write=function(u,s,f){for(var d=f,g,l,m=0;m<u.length;++m)g=u.charCodeAt(m),g<128?s[f++]=g:g<2048?(s[f++]=g>>6|192,s[f++]=g&63|128):(g&64512)===55296&&((l=u.charCodeAt(m+1))&64512)===56320?(g=65536+((g&1023)<<10)+(l&1023),++m,s[f++]=g>>18|240,s[f++]=g>>12&63|128,s[f++]=g>>6&63|128,s[f++]=g&63|128):(s[f++]=g>>12|224,s[f++]=g>>6&63|128,s[f++]=g&63|128);return f-d}})(utf8$2);var pool_1=pool;function pool(e,r,n){var u=n||8192,s=u>>>1,f=null,d=u;return function(l){if(l<1||l>s)return e(l);d+l>u&&(f=e(u),d=0);var m=r.call(f,d,d+=l);return d&7&&(d=(d|7)+1),m}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=r;var e=requireMinimal();function r(f,d){this.lo=f>>>0,this.hi=d>>>0}var n=r.zero=new r(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var u=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(d){if(d===0)return n;var g=d<0;g&&(d=-d);var l=d>>>0,m=(d-l)/4294967296>>>0;return g&&(m=~m>>>0,l=~l>>>0,++l>4294967295&&(l=0,++m>4294967295&&(m=0))),new r(l,m)},r.from=function(d){if(typeof d=="number")return r.fromNumber(d);if(e.isString(d))if(e.Long)d=e.Long.fromString(d);else return r.fromNumber(parseInt(d,10));return d.low||d.high?new r(d.low>>>0,d.high>>>0):n},r.prototype.toNumber=function(d){if(!d&&this.hi>>>31){var g=~this.lo+1>>>0,l=~this.hi>>>0;return g||(l=l+1>>>0),-(g+l*4294967296)}return this.lo+this.hi*4294967296},r.prototype.toLong=function(d){return e.Long?new e.Long(this.lo|0,this.hi|0,!!d):{low:this.lo|0,high:this.hi|0,unsigned:!!d}};var s=String.prototype.charCodeAt;return r.fromHash=function(d){return d===u?n:new r((s.call(d,0)|s.call(d,1)<<8|s.call(d,2)<<16|s.call(d,3)<<24)>>>0,(s.call(d,4)|s.call(d,5)<<8|s.call(d,6)<<16|s.call(d,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var d=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^d)>>>0,this.lo=(this.lo<<1^d)>>>0,this},r.prototype.zzDecode=function(){var d=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^d)>>>0,this.hi=(this.hi>>>1^d)>>>0,this},r.prototype.length=function(){var d=this.lo,g=(this.lo>>>28|this.hi<<4)>>>0,l=this.hi>>>24;return l===0?g===0?d<16384?d<128?1:2:d<2097152?3:4:g<16384?g<128?5:6:g<2097152?7:8:l<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var r=e;r.asPromise=aspromise,r.base64=base64$1,r.EventEmitter=eventemitter,r.float=float,r.inquire=inquire_1,r.utf8=utf8$2,r.pool=pool_1,r.LongBits=requireLongbits(),r.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),r.global=r.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f},r.isString=function(f){return typeof f=="string"||f instanceof String},r.isObject=function(f){return f&&typeof f=="object"},r.isset=r.isSet=function(f,d){var g=f[d];return g!=null&&f.hasOwnProperty(d)?typeof g!="object"||(Array.isArray(g)?g.length:Object.keys(g).length)>0:!1},r.Buffer=function(){try{var s=r.inquire("buffer").Buffer;return s.prototype.utf8Write?s:null}catch{return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(f){return typeof f=="number"?r.Buffer?r._Buffer_allocUnsafe(f):new r.Array(f):r.Buffer?r._Buffer_from(f):typeof Uint8Array>"u"?f:new Uint8Array(f)},r.Array=typeof Uint8Array<"u"?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(f){return f?r.LongBits.from(f).toHash():r.LongBits.zeroHash},r.longFromHash=function(f,d){var g=r.LongBits.fromHash(f);return r.Long?r.Long.fromBits(g.lo,g.hi,d):g.toNumber(!!d)};function n(s,f,d){for(var g=Object.keys(f),l=0;l<g.length;++l)(s[g[l]]===void 0||!d)&&(s[g[l]]=f[g[l]]);return s}r.merge=n,r.lcFirst=function(f){return f.charAt(0).toLowerCase()+f.substring(1)};function u(s){function f(d,g){if(!(this instanceof f))return new f(d,g);Object.defineProperty(this,"message",{get:function(){return d}}),Error.captureStackTrace?Error.captureStackTrace(this,f):Object.defineProperty(this,"stack",{value:new Error().stack||""}),g&&n(this,g)}return(f.prototype=Object.create(Error.prototype)).constructor=f,Object.defineProperty(f.prototype,"name",{get:function(){return s}}),f.prototype.toString=function(){return this.name+": "+this.message},f}r.newError=u,r.ProtocolError=u("ProtocolError"),r.oneOfGetter=function(f){for(var d={},g=0;g<f.length;++g)d[f[g]]=1;return function(){for(var l=Object.keys(this),m=l.length-1;m>-1;--m)if(d[l[m]]===1&&this[l[m]]!==void 0&&this[l[m]]!==null)return l[m]}},r.oneOfSetter=function(f){return function(d){for(var g=0;g<f.length;++g)f[g]!==d&&delete this[f[g]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var s=r.Buffer;if(!s){r._Buffer_from=r._Buffer_allocUnsafe=null;return}r._Buffer_from=s.from!==Uint8Array.from&&s.from||function(d,g){return new s(d,g)},r._Buffer_allocUnsafe=s.allocUnsafe||function(d){return new s(d)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}function noop$2(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$1=function e(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function e(r){return new util$4.Array(r)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function e(r,n,u){return this.tail=this.tail.next=new Op(r,n,u),this.len+=n,this};function writeByte(e,r,n){r[n]=e&255}function writeVarint32(e,r,n){for(;e>127;)r[n++]=e&127|128,e>>>=7;r[n]=e}function VarintOp(e,r){this.len=e,this.next=void 0,this.val=r}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function e(r){return this.len+=(this.tail=this.tail.next=new VarintOp((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this};Writer$1.prototype.int32=function e(r){return r<0?this._push(writeVarint64,10,LongBits$1.fromNumber(r)):this.uint32(r)};Writer$1.prototype.sint32=function e(r){return this.uint32((r<<1^r>>31)>>>0)};function writeVarint64(e,r,n){for(;e.hi;)r[n++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)r[n++]=e.lo&127|128,e.lo=e.lo>>>7;r[n++]=e.lo}Writer$1.prototype.uint64=function e(r){var n=LongBits$1.from(r);return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function e(r){var n=LongBits$1.from(r).zzEncode();return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.bool=function e(r){return this._push(writeByte,1,r?1:0)};function writeFixed32(e,r,n){r[n]=e&255,r[n+1]=e>>>8&255,r[n+2]=e>>>16&255,r[n+3]=e>>>24}Writer$1.prototype.fixed32=function e(r){return this._push(writeFixed32,4,r>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function e(r){var n=LongBits$1.from(r);return this._push(writeFixed32,4,n.lo)._push(writeFixed32,4,n.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function e(r){return this._push(util$4.float.writeFloatLE,4,r)};Writer$1.prototype.double=function e(r){return this._push(util$4.float.writeDoubleLE,8,r)};var writeBytes=util$4.Array.prototype.set?function e(r,n,u){n.set(r,u)}:function e(r,n,u){for(var s=0;s<r.length;++s)n[u+s]=r[s]};Writer$1.prototype.bytes=function e(r){var n=r.length>>>0;if(!n)return this._push(writeByte,1,0);if(util$4.isString(r)){var u=Writer$1.alloc(n=base64.length(r));base64.decode(r,u,0),r=u}return this.uint32(n)._push(writeBytes,n,r)};Writer$1.prototype.string=function e(r){var n=utf8$1.length(r);return n?this.uint32(n)._push(utf8$1.write,n,r):this._push(writeByte,1,0)};Writer$1.prototype.fork=function e(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function e(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function e(){var r=this.head,n=this.tail,u=this.len;return this.reset().uint32(u),u&&(this.tail.next=r.next,this.tail=n,this.len+=u),this};Writer$1.prototype.finish=function e(){for(var r=this.head.next,n=this.constructor.alloc(this.len),u=0;r;)r.fn(r.val,n,u),u+=r.len,r=r.next;return n};Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(r,n,u){n.set(r,u)}:function(r,n,u){if(r.copy)r.copy(n,u,0,r.length);else for(var s=0;s<r.length;)n[u++]=r[s++]}};BufferWriter.prototype.bytes=function e(r){util$3.isString(r)&&(r=util$3._Buffer_from(r,"base64"));var n=r.length>>>0;return this.uint32(n),n&&this._push(BufferWriter.writeBytesBuffer,n,r),this};function writeStringBuffer(e,r,n){e.length<40?util$3.utf8.write(e,r,n):r.utf8Write?r.utf8Write(e,n):r.write(e,n)}BufferWriter.prototype.string=function e(r){var n=util$3.Buffer.byteLength(r);return this.uint32(n),n&&this._push(writeStringBuffer,n,r),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,r){return RangeError("index out of range: "+e.pos+" + "+(r||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function e(r){if(r instanceof Uint8Array||Array.isArray(r))return new Reader$1(r);throw Error("illegal buffer")}:function e(r){if(Array.isArray(r))return new Reader$1(r);throw Error("illegal buffer")},create=function e(){return util$2.Buffer?function(n){return(Reader$1.create=function(s){return util$2.Buffer.isBuffer(s)?new BufferReader$1(s):create_array(s)})(n)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function e(){var r=4294967295;return function(){if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return r}}();Reader$1.prototype.int32=function e(){return this.uint32()|0};Reader$1.prototype.sint32=function e(){var r=this.uint32();return r>>>1^-(r&1)|0};function readLongVarint(){var e=new LongBits(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function e(){return this.uint32()!==0};function readFixed32_end(e,r){return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0}Reader$1.prototype.fixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var r=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,r};Reader$1.prototype.double=function e(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var r=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,r};Reader$1.prototype.bytes=function e(){var r=this.uint32(),n=this.pos,u=this.pos+r;if(u>this.len)throw indexOutOfRange(this,r);return this.pos+=r,Array.isArray(this.buf)?this.buf.slice(n,u):n===u?new this.buf.constructor(0):this._slice.call(this.buf,n,u)};Reader$1.prototype.string=function e(){var r=this.bytes();return utf8.read(r,0,r.length)};Reader$1.prototype.skip=function e(r){if(typeof r=="number"){if(this.pos+r>this.len)throw indexOutOfRange(this,r);this.pos+=r}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var r=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[r](!1)},uint64:function(){return readLongVarint.call(this)[r](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[r](!1)},fixed64:function(){return readFixed64.call(this)[r](!0)},sfixed64:function(){return readFixed64.call(this)[r](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function e(){var r=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+r,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+r,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(e,r,n){if(typeof e!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!r,this.responseDelimited=!!n}Service.prototype.rpcCall=function e(r,n,u,s,f){if(!s)throw TypeError("request must be specified");var d=this;if(!f)return util.asPromise(e,d,r,n,u,s);if(!d.rpcImpl){setTimeout(function(){f(Error("already ended"))},0);return}try{return d.rpcImpl(r,n[d.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(l,m){if(l)return d.emit("error",l,r),f(l);if(m===null){d.end(!0);return}if(!(m instanceof u))try{m=u[d.responseDelimited?"decodeDelimited":"decode"](m)}catch(A){return d.emit("error",A,r),f(A)}return d.emit("data",m,r),f(null,m)})}catch(g){d.emit("error",g,r),setTimeout(function(){f(g)},0);return}};Service.prototype.end=function e(r){return this.rpcImpl&&(r||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(e){var r=e;r.Service=service})(rpc);var roots={};(function(e){var r=e;r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=requireMinimal(),r.rpc=rpc,r.roots=roots,r.configure=n;function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}n()})(indexMinimal);var minimal=indexMinimal,helpers={},__createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,r,n,u){u===void 0&&(u=n);var s=Object.getOwnPropertyDescriptor(r,n);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,u,s)}:function(e,r,n,u){u===void 0&&(u=n),e[u]=r[n]}),__setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),__importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding$3(r,e,n);return __setModuleDefault$3(r,e),r},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(helpers,"__esModule",{value:!0});helpers.fromJsonTimestamp=helpers.fromTimestamp=helpers.toTimestamp=helpers.setPaginationParams=helpers.isObject=helpers.isSet=helpers.fromDuration=helpers.toDuration=helpers.omitDefault=helpers.base64FromBytes=helpers.bytesFromBase64=helpers.Long=void 0;const _m0$3=__importStar$3(minimal),long_1=__importDefault(require$$1);helpers.Long=long_1.default;_m0$3.util.Long!==long_1.default&&(_m0$3.util.Long=long_1.default,_m0$3.configure());var globalThis$1=(()=>{if(typeof globalThis$1<"u")return globalThis$1;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal;throw"Unable to locate global object"})();const atob=globalThis$1.atob||(e=>globalThis$1.Buffer.from(e,"base64").toString("binary"));function bytesFromBase64(e){const r=atob(e),n=new Uint8Array(r.length);for(let u=0;u<r.length;++u)n[u]=r.charCodeAt(u);return n}helpers.bytesFromBase64=bytesFromBase64;const btoa=globalThis$1.btoa||(e=>globalThis$1.Buffer.from(e,"binary").toString("base64"));function base64FromBytes(e){const r=[];return e.forEach(n=>{r.push(String.fromCharCode(n))}),btoa(r.join(""))}helpers.base64FromBytes=base64FromBytes;function omitDefault(e){if(typeof e=="string")return e===""?void 0:e;if(typeof e=="number")return e===0?void 0:e;if(long_1.default.isLong(e))return e.isZero()?void 0:e;throw new Error(`Got unsupported type ${typeof e}`)}helpers.omitDefault=omitDefault;function toDuration(e){return{seconds:long_1.default.fromNumber(Math.floor(parseInt(e)/1e9)),nanos:parseInt(e)%1e9}}helpers.toDuration=toDuration;function fromDuration(e){return(parseInt(e.seconds.toString())*1e9+e.nanos).toString()}helpers.fromDuration=fromDuration;function isSet(e){return e!=null}helpers.isSet=isSet;function isObject(e){return typeof e=="object"&&e!==null}helpers.isObject=isObject;const setPaginationParams=(e,r)=>(r&&(typeof(r==null?void 0:r.countTotal)<"u"&&(e.params["pagination.count_total"]=r.countTotal),typeof(r==null?void 0:r.key)<"u"&&(e.params["pagination.key"]=Buffer.from(r.key).toString("base64")),typeof(r==null?void 0:r.limit)<"u"&&(e.params["pagination.limit"]=r.limit.toString()),typeof(r==null?void 0:r.offset)<"u"&&(e.params["pagination.offset"]=r.offset.toString()),typeof(r==null?void 0:r.reverse)<"u"&&(e.params["pagination.reverse"]=r.reverse)),e);helpers.setPaginationParams=setPaginationParams;function toTimestamp(e){const r=numberToLong(e.getTime()/1e3),n=e.getTime()%1e3*1e6;return{seconds:r,nanos:n}}helpers.toTimestamp=toTimestamp;function fromTimestamp(e){let r=e.seconds.toNumber()*1e3;return r+=e.nanos/1e6,new Date(r)}helpers.fromTimestamp=fromTimestamp;const timestampFromJSON=e=>({seconds:isSet(e.seconds)?long_1.default.fromValue(e.seconds):long_1.default.ZERO,nanos:isSet(e.nanos)?Number(e.nanos):0});function fromJsonTimestamp(e){return e instanceof Date?toTimestamp(e):typeof e=="string"?toTimestamp(new Date(e)):timestampFromJSON(e)}helpers.fromJsonTimestamp=fromJsonTimestamp;function numberToLong(e){return long_1.default.fromNumber(e)}var __createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,r,n,u){u===void 0&&(u=n);var s=Object.getOwnPropertyDescriptor(r,n);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,u,s)}:function(e,r,n,u){u===void 0&&(u=n),e[u]=r[n]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding$2(r,e,n);return __setModuleDefault$2(r,e),r};Object.defineProperty(multisig,"__esModule",{value:!0});multisig.CompactBitArray=multisig.MultiSignature=multisig.protobufPackage=void 0;const _m0$2=__importStar$2(minimal),helpers_1$2=helpers;multisig.protobufPackage="cosmos.crypto.multisig.v1beta1";function createBaseMultiSignature(){return{signatures:[]}}multisig.MultiSignature={encode(e,r=_m0$2.Writer.create()){for(const n of e.signatures)r.uint32(10).bytes(n);return r},decode(e,r){const n=e instanceof _m0$2.Reader?e:new _m0$2.Reader(e);let u=r===void 0?n.len:n.pos+r;const s=createBaseMultiSignature();for(;n.pos<u;){const f=n.uint32();switch(f>>>3){case 1:s.signatures.push(n.bytes());break;default:n.skipType(f&7);break}}return s},fromJSON(e){return{signatures:Array.isArray(e==null?void 0:e.signatures)?e.signatures.map(r=>(0,helpers_1$2.bytesFromBase64)(r)):[]}},toJSON(e){const r={};return e.signatures?r.signatures=e.signatures.map(n=>(0,helpers_1$2.base64FromBytes)(n!==void 0?n:new Uint8Array)):r.signatures=[],r},fromPartial(e){var n;const r=createBaseMultiSignature();return r.signatures=((n=e.signatures)==null?void 0:n.map(u=>u))||[],r}};function createBaseCompactBitArray(){return{extraBitsStored:0,elems:new Uint8Array}}multisig.CompactBitArray={encode(e,r=_m0$2.Writer.create()){return e.extraBitsStored!==0&&r.uint32(8).uint32(e.extraBitsStored),e.elems.length!==0&&r.uint32(18).bytes(e.elems),r},decode(e,r){const n=e instanceof _m0$2.Reader?e:new _m0$2.Reader(e);let u=r===void 0?n.len:n.pos+r;const s=createBaseCompactBitArray();for(;n.pos<u;){const f=n.uint32();switch(f>>>3){case 1:s.extraBitsStored=n.uint32();break;case 2:s.elems=n.bytes();break;default:n.skipType(f&7);break}}return s},fromJSON(e){return{extraBitsStored:(0,helpers_1$2.isSet)(e.extraBitsStored)?Number(e.extraBitsStored):0,elems:(0,helpers_1$2.isSet)(e.elems)?(0,helpers_1$2.bytesFromBase64)(e.elems):new Uint8Array}},toJSON(e){const r={};return e.extraBitsStored!==void 0&&(r.extraBitsStored=Math.round(e.extraBitsStored)),e.elems!==void 0&&(r.elems=(0,helpers_1$2.base64FromBytes)(e.elems!==void 0?e.elems:new Uint8Array)),r},fromPartial(e){const r=createBaseCompactBitArray();return r.extraBitsStored=e.extraBitsStored??0,r.elems=e.elems??new Uint8Array,r}};var any={},__createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,r,n,u){u===void 0&&(u=n);var s=Object.getOwnPropertyDescriptor(r,n);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,u,s)}:function(e,r,n,u){u===void 0&&(u=n),e[u]=r[n]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding$1(r,e,n);return __setModuleDefault$1(r,e),r};Object.defineProperty(any,"__esModule",{value:!0});any.Any=any.protobufPackage=void 0;const _m0$1=__importStar$1(minimal),helpers_1$1=helpers;any.protobufPackage="google.protobuf";function createBaseAny(){return{typeUrl:"",value:new Uint8Array}}any.Any={encode(e,r=_m0$1.Writer.create()){return e.typeUrl!==""&&r.uint32(10).string(e.typeUrl),e.value.length!==0&&r.uint32(18).bytes(e.value),r},decode(e,r){const n=e instanceof _m0$1.Reader?e:new _m0$1.Reader(e);let u=r===void 0?n.len:n.pos+r;const s=createBaseAny();for(;n.pos<u;){const f=n.uint32();switch(f>>>3){case 1:s.typeUrl=n.string();break;case 2:s.value=n.bytes();break;default:n.skipType(f&7);break}}return s},fromJSON(e){return{typeUrl:(0,helpers_1$1.isSet)(e.typeUrl)?String(e.typeUrl):"",value:(0,helpers_1$1.isSet)(e.value)?(0,helpers_1$1.bytesFromBase64)(e.value):new Uint8Array}},toJSON(e){const r={};return e.typeUrl!==void 0&&(r.typeUrl=e.typeUrl),e.value!==void 0&&(r.value=(0,helpers_1$1.base64FromBytes)(e.value!==void 0?e.value:new Uint8Array)),r},fromPartial(e){const r=createBaseAny();return r.typeUrl=e.typeUrl??"",r.value=e.value??new Uint8Array,r}};(function(e){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(S,h,w,B){B===void 0&&(B=w);var D=Object.getOwnPropertyDescriptor(h,w);(!D||("get"in D?!h.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return h[w]}}),Object.defineProperty(S,B,D)}:function(S,h,w,B){B===void 0&&(B=w),S[B]=h[w]}),n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(S,h){Object.defineProperty(S,"default",{enumerable:!0,value:h})}:function(S,h){S.default=h}),u=commonjsGlobal&&commonjsGlobal.__importStar||function(S){if(S&&S.__esModule)return S;var h={};if(S!=null)for(var w in S)w!=="default"&&Object.prototype.hasOwnProperty.call(S,w)&&r(h,S,w);return n(h,S),h};Object.defineProperty(e,"__esModule",{value:!0}),e.SignatureDescriptor_Data_Multi=e.SignatureDescriptor_Data_Single=e.SignatureDescriptor_Data=e.SignatureDescriptor=e.SignatureDescriptors=e.signModeToJSON=e.signModeFromJSON=e.SignMode=e.protobufPackage=void 0;const s=multisig,f=any,d=helpers,g=u(minimal);e.protobufPackage="cosmos.tx.signing.v1beta1";var l;(function(S){S[S.SIGN_MODE_UNSPECIFIED=0]="SIGN_MODE_UNSPECIFIED",S[S.SIGN_MODE_DIRECT=1]="SIGN_MODE_DIRECT",S[S.SIGN_MODE_TEXTUAL=2]="SIGN_MODE_TEXTUAL",S[S.SIGN_MODE_DIRECT_AUX=3]="SIGN_MODE_DIRECT_AUX",S[S.SIGN_MODE_LEGACY_AMINO_JSON=127]="SIGN_MODE_LEGACY_AMINO_JSON",S[S.SIGN_MODE_EIP_191=191]="SIGN_MODE_EIP_191",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(l=e.SignMode||(e.SignMode={}));function m(S){switch(S){case 0:case"SIGN_MODE_UNSPECIFIED":return l.SIGN_MODE_UNSPECIFIED;case 1:case"SIGN_MODE_DIRECT":return l.SIGN_MODE_DIRECT;case 2:case"SIGN_MODE_TEXTUAL":return l.SIGN_MODE_TEXTUAL;case 3:case"SIGN_MODE_DIRECT_AUX":return l.SIGN_MODE_DIRECT_AUX;case 127:case"SIGN_MODE_LEGACY_AMINO_JSON":return l.SIGN_MODE_LEGACY_AMINO_JSON;case 191:case"SIGN_MODE_EIP_191":return l.SIGN_MODE_EIP_191;case-1:case"UNRECOGNIZED":default:return l.UNRECOGNIZED}}e.signModeFromJSON=m;function A(S){switch(S){case l.SIGN_MODE_UNSPECIFIED:return"SIGN_MODE_UNSPECIFIED";case l.SIGN_MODE_DIRECT:return"SIGN_MODE_DIRECT";case l.SIGN_MODE_TEXTUAL:return"SIGN_MODE_TEXTUAL";case l.SIGN_MODE_DIRECT_AUX:return"SIGN_MODE_DIRECT_AUX";case l.SIGN_MODE_LEGACY_AMINO_JSON:return"SIGN_MODE_LEGACY_AMINO_JSON";case l.SIGN_MODE_EIP_191:return"SIGN_MODE_EIP_191";case l.UNRECOGNIZED:default:return"UNRECOGNIZED"}}e.signModeToJSON=A;function N(){return{signatures:[]}}e.SignatureDescriptors={encode(S,h=g.Writer.create()){for(const w of S.signatures)e.SignatureDescriptor.encode(w,h.uint32(10).fork()).ldelim();return h},decode(S,h){const w=S instanceof g.Reader?S:new g.Reader(S);let B=h===void 0?w.len:w.pos+h;const D=N();for(;w.pos<B;){const C=w.uint32();switch(C>>>3){case 1:D.signatures.push(e.SignatureDescriptor.decode(w,w.uint32()));break;default:w.skipType(C&7);break}}return D},fromJSON(S){return{signatures:Array.isArray(S==null?void 0:S.signatures)?S.signatures.map(h=>e.SignatureDescriptor.fromJSON(h)):[]}},toJSON(S){const h={};return S.signatures?h.signatures=S.signatures.map(w=>w?e.SignatureDescriptor.toJSON(w):void 0):h.signatures=[],h},fromPartial(S){var w;const h=N();return h.signatures=((w=S.signatures)==null?void 0:w.map(B=>e.SignatureDescriptor.fromPartial(B)))||[],h}};function I(){return{publicKey:void 0,data:void 0,sequence:d.Long.UZERO}}e.SignatureDescriptor={encode(S,h=g.Writer.create()){return S.publicKey!==void 0&&f.Any.encode(S.publicKey,h.uint32(10).fork()).ldelim(),S.data!==void 0&&e.SignatureDescriptor_Data.encode(S.data,h.uint32(18).fork()).ldelim(),S.sequence.isZero()||h.uint32(24).uint64(S.sequence),h},decode(S,h){const w=S instanceof g.Reader?S:new g.Reader(S);let B=h===void 0?w.len:w.pos+h;const D=I();for(;w.pos<B;){const C=w.uint32();switch(C>>>3){case 1:D.publicKey=f.Any.decode(w,w.uint32());break;case 2:D.data=e.SignatureDescriptor_Data.decode(w,w.uint32());break;case 3:D.sequence=w.uint64();break;default:w.skipType(C&7);break}}return D},fromJSON(S){return{publicKey:(0,d.isSet)(S.publicKey)?f.Any.fromJSON(S.publicKey):void 0,data:(0,d.isSet)(S.data)?e.SignatureDescriptor_Data.fromJSON(S.data):void 0,sequence:(0,d.isSet)(S.sequence)?d.Long.fromValue(S.sequence):d.Long.UZERO}},toJSON(S){const h={};return S.publicKey!==void 0&&(h.publicKey=S.publicKey?f.Any.toJSON(S.publicKey):void 0),S.data!==void 0&&(h.data=S.data?e.SignatureDescriptor_Data.toJSON(S.data):void 0),S.sequence!==void 0&&(h.sequence=(S.sequence||d.Long.UZERO).toString()),h},fromPartial(S){const h=I();return h.publicKey=S.publicKey!==void 0&&S.publicKey!==null?f.Any.fromPartial(S.publicKey):void 0,h.data=S.data!==void 0&&S.data!==null?e.SignatureDescriptor_Data.fromPartial(S.data):void 0,h.sequence=S.sequence!==void 0&&S.sequence!==null?d.Long.fromValue(S.sequence):d.Long.UZERO,h}};function W(){return{single:void 0,multi:void 0}}e.SignatureDescriptor_Data={encode(S,h=g.Writer.create()){return S.single!==void 0&&e.SignatureDescriptor_Data_Single.encode(S.single,h.uint32(10).fork()).ldelim(),S.multi!==void 0&&e.SignatureDescriptor_Data_Multi.encode(S.multi,h.uint32(18).fork()).ldelim(),h},decode(S,h){const w=S instanceof g.Reader?S:new g.Reader(S);let B=h===void 0?w.len:w.pos+h;const D=W();for(;w.pos<B;){const C=w.uint32();switch(C>>>3){case 1:D.single=e.SignatureDescriptor_Data_Single.decode(w,w.uint32());break;case 2:D.multi=e.SignatureDescriptor_Data_Multi.decode(w,w.uint32());break;default:w.skipType(C&7);break}}return D},fromJSON(S){return{single:(0,d.isSet)(S.single)?e.SignatureDescriptor_Data_Single.fromJSON(S.single):void 0,multi:(0,d.isSet)(S.multi)?e.SignatureDescriptor_Data_Multi.fromJSON(S.multi):void 0}},toJSON(S){const h={};return S.single!==void 0&&(h.single=S.single?e.SignatureDescriptor_Data_Single.toJSON(S.single):void 0),S.multi!==void 0&&(h.multi=S.multi?e.SignatureDescriptor_Data_Multi.toJSON(S.multi):void 0),h},fromPartial(S){const h=W();return h.single=S.single!==void 0&&S.single!==null?e.SignatureDescriptor_Data_Single.fromPartial(S.single):void 0,h.multi=S.multi!==void 0&&S.multi!==null?e.SignatureDescriptor_Data_Multi.fromPartial(S.multi):void 0,h}};function P(){return{mode:0,signature:new Uint8Array}}e.SignatureDescriptor_Data_Single={encode(S,h=g.Writer.create()){return S.mode!==0&&h.uint32(8).int32(S.mode),S.signature.length!==0&&h.uint32(18).bytes(S.signature),h},decode(S,h){const w=S instanceof g.Reader?S:new g.Reader(S);let B=h===void 0?w.len:w.pos+h;const D=P();for(;w.pos<B;){const C=w.uint32();switch(C>>>3){case 1:D.mode=w.int32();break;case 2:D.signature=w.bytes();break;default:w.skipType(C&7);break}}return D},fromJSON(S){return{mode:(0,d.isSet)(S.mode)?m(S.mode):0,signature:(0,d.isSet)(S.signature)?(0,d.bytesFromBase64)(S.signature):new Uint8Array}},toJSON(S){const h={};return S.mode!==void 0&&(h.mode=A(S.mode)),S.signature!==void 0&&(h.signature=(0,d.base64FromBytes)(S.signature!==void 0?S.signature:new Uint8Array)),h},fromPartial(S){const h=P();return h.mode=S.mode??0,h.signature=S.signature??new Uint8Array,h}};function k(){return{bitarray:void 0,signatures:[]}}e.SignatureDescriptor_Data_Multi={encode(S,h=g.Writer.create()){S.bitarray!==void 0&&s.CompactBitArray.encode(S.bitarray,h.uint32(10).fork()).ldelim();for(const w of S.signatures)e.SignatureDescriptor_Data.encode(w,h.uint32(18).fork()).ldelim();return h},decode(S,h){const w=S instanceof g.Reader?S:new g.Reader(S);let B=h===void 0?w.len:w.pos+h;const D=k();for(;w.pos<B;){const C=w.uint32();switch(C>>>3){case 1:D.bitarray=s.CompactBitArray.decode(w,w.uint32());break;case 2:D.signatures.push(e.SignatureDescriptor_Data.decode(w,w.uint32()));break;default:w.skipType(C&7);break}}return D},fromJSON(S){return{bitarray:(0,d.isSet)(S.bitarray)?s.CompactBitArray.fromJSON(S.bitarray):void 0,signatures:Array.isArray(S==null?void 0:S.signatures)?S.signatures.map(h=>e.SignatureDescriptor_Data.fromJSON(h)):[]}},toJSON(S){const h={};return S.bitarray!==void 0&&(h.bitarray=S.bitarray?s.CompactBitArray.toJSON(S.bitarray):void 0),S.signatures?h.signatures=S.signatures.map(w=>w?e.SignatureDescriptor_Data.toJSON(w):void 0):h.signatures=[],h},fromPartial(S){var w;const h=k();return h.bitarray=S.bitarray!==void 0&&S.bitarray!==null?s.CompactBitArray.fromPartial(S.bitarray):void 0,h.signatures=((w=S.signatures)==null?void 0:w.map(B=>e.SignatureDescriptor_Data.fromPartial(B)))||[],h}}})(signing);var tx={},coin={},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,r,n,u){u===void 0&&(u=n);var s=Object.getOwnPropertyDescriptor(r,n);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,u,s)}:function(e,r,n,u){u===void 0&&(u=n),e[u]=r[n]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(r,e,n);return __setModuleDefault(r,e),r};Object.defineProperty(coin,"__esModule",{value:!0});coin.DecProto=coin.IntProto=coin.DecCoin=coin.Coin=coin.protobufPackage=void 0;const _m0=__importStar(minimal),helpers_1=helpers;coin.protobufPackage="cosmos.base.v1beta1";function createBaseCoin(){return{denom:"",amount:""}}coin.Coin={encode(e,r=_m0.Writer.create()){return e.denom!==""&&r.uint32(10).string(e.denom),e.amount!==""&&r.uint32(18).string(e.amount),r},decode(e,r){const n=e instanceof _m0.Reader?e:new _m0.Reader(e);let u=r===void 0?n.len:n.pos+r;const s=createBaseCoin();for(;n.pos<u;){const f=n.uint32();switch(f>>>3){case 1:s.denom=n.string();break;case 2:s.amount=n.string();break;default:n.skipType(f&7);break}}return s},fromJSON(e){return{denom:(0,helpers_1.isSet)(e.denom)?String(e.denom):"",amount:(0,helpers_1.isSet)(e.amount)?String(e.amount):""}},toJSON(e){const r={};return e.denom!==void 0&&(r.denom=e.denom),e.amount!==void 0&&(r.amount=e.amount),r},fromPartial(e){const r=createBaseCoin();return r.denom=e.denom??"",r.amount=e.amount??"",r}};function createBaseDecCoin(){return{denom:"",amount:""}}coin.DecCoin={encode(e,r=_m0.Writer.create()){return e.denom!==""&&r.uint32(10).string(e.denom),e.amount!==""&&r.uint32(18).string(e.amount),r},decode(e,r){const n=e instanceof _m0.Reader?e:new _m0.Reader(e);let u=r===void 0?n.len:n.pos+r;const s=createBaseDecCoin();for(;n.pos<u;){const f=n.uint32();switch(f>>>3){case 1:s.denom=n.string();break;case 2:s.amount=n.string();break;default:n.skipType(f&7);break}}return s},fromJSON(e){return{denom:(0,helpers_1.isSet)(e.denom)?String(e.denom):"",amount:(0,helpers_1.isSet)(e.amount)?String(e.amount):""}},toJSON(e){const r={};return e.denom!==void 0&&(r.denom=e.denom),e.amount!==void 0&&(r.amount=e.amount),r},fromPartial(e){const r=createBaseDecCoin();return r.denom=e.denom??"",r.amount=e.amount??"",r}};function createBaseIntProto(){return{int:""}}coin.IntProto={encode(e,r=_m0.Writer.create()){return e.int!==""&&r.uint32(10).string(e.int),r},decode(e,r){const n=e instanceof _m0.Reader?e:new _m0.Reader(e);let u=r===void 0?n.len:n.pos+r;const s=createBaseIntProto();for(;n.pos<u;){const f=n.uint32();switch(f>>>3){case 1:s.int=n.string();break;default:n.skipType(f&7);break}}return s},fromJSON(e){return{int:(0,helpers_1.isSet)(e.int)?String(e.int):""}},toJSON(e){const r={};return e.int!==void 0&&(r.int=e.int),r},fromPartial(e){const r=createBaseIntProto();return r.int=e.int??"",r}};function createBaseDecProto(){return{dec:""}}coin.DecProto={encode(e,r=_m0.Writer.create()){return e.dec!==""&&r.uint32(10).string(e.dec),r},decode(e,r){const n=e instanceof _m0.Reader?e:new _m0.Reader(e);let u=r===void 0?n.len:n.pos+r;const s=createBaseDecProto();for(;n.pos<u;){const f=n.uint32();switch(f>>>3){case 1:s.dec=n.string();break;default:n.skipType(f&7);break}}return s},fromJSON(e){return{dec:(0,helpers_1.isSet)(e.dec)?String(e.dec):""}},toJSON(e){const r={};return e.dec!==void 0&&(r.dec=e.dec),r},fromPartial(e){const r=createBaseDecProto();return r.dec=e.dec??"",r}};(function(e){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,c,y,F){F===void 0&&(F=y);var $=Object.getOwnPropertyDescriptor(c,y);(!$||("get"in $?!c.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return c[y]}}),Object.defineProperty(a,F,$)}:function(a,c,y,F){F===void 0&&(F=y),a[F]=c[y]}),n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),u=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var y in a)y!=="default"&&Object.prototype.hasOwnProperty.call(a,y)&&r(c,a,y);return n(c,a),c};Object.defineProperty(e,"__esModule",{value:!0}),e.AuxSignerData=e.Tip=e.Fee=e.ModeInfo_Multi=e.ModeInfo_Single=e.ModeInfo=e.SignerInfo=e.AuthInfo=e.TxBody=e.SignDocDirectAux=e.SignDoc=e.TxRaw=e.Tx=e.protobufPackage=void 0;const s=any,f=signing,d=multisig,g=coin,l=helpers,m=u(minimal);e.protobufPackage="cosmos.tx.v1beta1";function A(){return{body:void 0,authInfo:void 0,signatures:[]}}e.Tx={encode(a,c=m.Writer.create()){a.body!==void 0&&e.TxBody.encode(a.body,c.uint32(10).fork()).ldelim(),a.authInfo!==void 0&&e.AuthInfo.encode(a.authInfo,c.uint32(18).fork()).ldelim();for(const y of a.signatures)c.uint32(26).bytes(y);return c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=A();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.body=e.TxBody.decode(y,y.uint32());break;case 2:$.authInfo=e.AuthInfo.decode(y,y.uint32());break;case 3:$.signatures.push(y.bytes());break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{body:(0,l.isSet)(a.body)?e.TxBody.fromJSON(a.body):void 0,authInfo:(0,l.isSet)(a.authInfo)?e.AuthInfo.fromJSON(a.authInfo):void 0,signatures:Array.isArray(a==null?void 0:a.signatures)?a.signatures.map(c=>(0,l.bytesFromBase64)(c)):[]}},toJSON(a){const c={};return a.body!==void 0&&(c.body=a.body?e.TxBody.toJSON(a.body):void 0),a.authInfo!==void 0&&(c.authInfo=a.authInfo?e.AuthInfo.toJSON(a.authInfo):void 0),a.signatures?c.signatures=a.signatures.map(y=>(0,l.base64FromBytes)(y!==void 0?y:new Uint8Array)):c.signatures=[],c},fromPartial(a){var y;const c=A();return c.body=a.body!==void 0&&a.body!==null?e.TxBody.fromPartial(a.body):void 0,c.authInfo=a.authInfo!==void 0&&a.authInfo!==null?e.AuthInfo.fromPartial(a.authInfo):void 0,c.signatures=((y=a.signatures)==null?void 0:y.map(F=>F))||[],c}};function N(){return{bodyBytes:new Uint8Array,authInfoBytes:new Uint8Array,signatures:[]}}e.TxRaw={encode(a,c=m.Writer.create()){a.bodyBytes.length!==0&&c.uint32(10).bytes(a.bodyBytes),a.authInfoBytes.length!==0&&c.uint32(18).bytes(a.authInfoBytes);for(const y of a.signatures)c.uint32(26).bytes(y);return c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=N();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.bodyBytes=y.bytes();break;case 2:$.authInfoBytes=y.bytes();break;case 3:$.signatures.push(y.bytes());break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{bodyBytes:(0,l.isSet)(a.bodyBytes)?(0,l.bytesFromBase64)(a.bodyBytes):new Uint8Array,authInfoBytes:(0,l.isSet)(a.authInfoBytes)?(0,l.bytesFromBase64)(a.authInfoBytes):new Uint8Array,signatures:Array.isArray(a==null?void 0:a.signatures)?a.signatures.map(c=>(0,l.bytesFromBase64)(c)):[]}},toJSON(a){const c={};return a.bodyBytes!==void 0&&(c.bodyBytes=(0,l.base64FromBytes)(a.bodyBytes!==void 0?a.bodyBytes:new Uint8Array)),a.authInfoBytes!==void 0&&(c.authInfoBytes=(0,l.base64FromBytes)(a.authInfoBytes!==void 0?a.authInfoBytes:new Uint8Array)),a.signatures?c.signatures=a.signatures.map(y=>(0,l.base64FromBytes)(y!==void 0?y:new Uint8Array)):c.signatures=[],c},fromPartial(a){var y;const c=N();return c.bodyBytes=a.bodyBytes??new Uint8Array,c.authInfoBytes=a.authInfoBytes??new Uint8Array,c.signatures=((y=a.signatures)==null?void 0:y.map(F=>F))||[],c}};function I(){return{bodyBytes:new Uint8Array,authInfoBytes:new Uint8Array,chainId:"",accountNumber:l.Long.UZERO}}e.SignDoc={encode(a,c=m.Writer.create()){return a.bodyBytes.length!==0&&c.uint32(10).bytes(a.bodyBytes),a.authInfoBytes.length!==0&&c.uint32(18).bytes(a.authInfoBytes),a.chainId!==""&&c.uint32(26).string(a.chainId),a.accountNumber.isZero()||c.uint32(32).uint64(a.accountNumber),c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=I();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.bodyBytes=y.bytes();break;case 2:$.authInfoBytes=y.bytes();break;case 3:$.chainId=y.string();break;case 4:$.accountNumber=y.uint64();break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{bodyBytes:(0,l.isSet)(a.bodyBytes)?(0,l.bytesFromBase64)(a.bodyBytes):new Uint8Array,authInfoBytes:(0,l.isSet)(a.authInfoBytes)?(0,l.bytesFromBase64)(a.authInfoBytes):new Uint8Array,chainId:(0,l.isSet)(a.chainId)?String(a.chainId):"",accountNumber:(0,l.isSet)(a.accountNumber)?l.Long.fromValue(a.accountNumber):l.Long.UZERO}},toJSON(a){const c={};return a.bodyBytes!==void 0&&(c.bodyBytes=(0,l.base64FromBytes)(a.bodyBytes!==void 0?a.bodyBytes:new Uint8Array)),a.authInfoBytes!==void 0&&(c.authInfoBytes=(0,l.base64FromBytes)(a.authInfoBytes!==void 0?a.authInfoBytes:new Uint8Array)),a.chainId!==void 0&&(c.chainId=a.chainId),a.accountNumber!==void 0&&(c.accountNumber=(a.accountNumber||l.Long.UZERO).toString()),c},fromPartial(a){const c=I();return c.bodyBytes=a.bodyBytes??new Uint8Array,c.authInfoBytes=a.authInfoBytes??new Uint8Array,c.chainId=a.chainId??"",c.accountNumber=a.accountNumber!==void 0&&a.accountNumber!==null?l.Long.fromValue(a.accountNumber):l.Long.UZERO,c}};function W(){return{bodyBytes:new Uint8Array,publicKey:void 0,chainId:"",accountNumber:l.Long.UZERO,sequence:l.Long.UZERO,tip:void 0}}e.SignDocDirectAux={encode(a,c=m.Writer.create()){return a.bodyBytes.length!==0&&c.uint32(10).bytes(a.bodyBytes),a.publicKey!==void 0&&s.Any.encode(a.publicKey,c.uint32(18).fork()).ldelim(),a.chainId!==""&&c.uint32(26).string(a.chainId),a.accountNumber.isZero()||c.uint32(32).uint64(a.accountNumber),a.sequence.isZero()||c.uint32(40).uint64(a.sequence),a.tip!==void 0&&e.Tip.encode(a.tip,c.uint32(50).fork()).ldelim(),c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=W();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.bodyBytes=y.bytes();break;case 2:$.publicKey=s.Any.decode(y,y.uint32());break;case 3:$.chainId=y.string();break;case 4:$.accountNumber=y.uint64();break;case 5:$.sequence=y.uint64();break;case 6:$.tip=e.Tip.decode(y,y.uint32());break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{bodyBytes:(0,l.isSet)(a.bodyBytes)?(0,l.bytesFromBase64)(a.bodyBytes):new Uint8Array,publicKey:(0,l.isSet)(a.publicKey)?s.Any.fromJSON(a.publicKey):void 0,chainId:(0,l.isSet)(a.chainId)?String(a.chainId):"",accountNumber:(0,l.isSet)(a.accountNumber)?l.Long.fromValue(a.accountNumber):l.Long.UZERO,sequence:(0,l.isSet)(a.sequence)?l.Long.fromValue(a.sequence):l.Long.UZERO,tip:(0,l.isSet)(a.tip)?e.Tip.fromJSON(a.tip):void 0}},toJSON(a){const c={};return a.bodyBytes!==void 0&&(c.bodyBytes=(0,l.base64FromBytes)(a.bodyBytes!==void 0?a.bodyBytes:new Uint8Array)),a.publicKey!==void 0&&(c.publicKey=a.publicKey?s.Any.toJSON(a.publicKey):void 0),a.chainId!==void 0&&(c.chainId=a.chainId),a.accountNumber!==void 0&&(c.accountNumber=(a.accountNumber||l.Long.UZERO).toString()),a.sequence!==void 0&&(c.sequence=(a.sequence||l.Long.UZERO).toString()),a.tip!==void 0&&(c.tip=a.tip?e.Tip.toJSON(a.tip):void 0),c},fromPartial(a){const c=W();return c.bodyBytes=a.bodyBytes??new Uint8Array,c.publicKey=a.publicKey!==void 0&&a.publicKey!==null?s.Any.fromPartial(a.publicKey):void 0,c.chainId=a.chainId??"",c.accountNumber=a.accountNumber!==void 0&&a.accountNumber!==null?l.Long.fromValue(a.accountNumber):l.Long.UZERO,c.sequence=a.sequence!==void 0&&a.sequence!==null?l.Long.fromValue(a.sequence):l.Long.UZERO,c.tip=a.tip!==void 0&&a.tip!==null?e.Tip.fromPartial(a.tip):void 0,c}};function P(){return{messages:[],memo:"",timeoutHeight:l.Long.UZERO,extensionOptions:[],nonCriticalExtensionOptions:[]}}e.TxBody={encode(a,c=m.Writer.create()){for(const y of a.messages)s.Any.encode(y,c.uint32(10).fork()).ldelim();a.memo!==""&&c.uint32(18).string(a.memo),a.timeoutHeight.isZero()||c.uint32(24).uint64(a.timeoutHeight);for(const y of a.extensionOptions)s.Any.encode(y,c.uint32(8186).fork()).ldelim();for(const y of a.nonCriticalExtensionOptions)s.Any.encode(y,c.uint32(16378).fork()).ldelim();return c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=P();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.messages.push(s.Any.decode(y,y.uint32()));break;case 2:$.memo=y.string();break;case 3:$.timeoutHeight=y.uint64();break;case 1023:$.extensionOptions.push(s.Any.decode(y,y.uint32()));break;case 2047:$.nonCriticalExtensionOptions.push(s.Any.decode(y,y.uint32()));break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{messages:Array.isArray(a==null?void 0:a.messages)?a.messages.map(c=>s.Any.fromJSON(c)):[],memo:(0,l.isSet)(a.memo)?String(a.memo):"",timeoutHeight:(0,l.isSet)(a.timeoutHeight)?l.Long.fromValue(a.timeoutHeight):l.Long.UZERO,extensionOptions:Array.isArray(a==null?void 0:a.extensionOptions)?a.extensionOptions.map(c=>s.Any.fromJSON(c)):[],nonCriticalExtensionOptions:Array.isArray(a==null?void 0:a.nonCriticalExtensionOptions)?a.nonCriticalExtensionOptions.map(c=>s.Any.fromJSON(c)):[]}},toJSON(a){const c={};return a.messages?c.messages=a.messages.map(y=>y?s.Any.toJSON(y):void 0):c.messages=[],a.memo!==void 0&&(c.memo=a.memo),a.timeoutHeight!==void 0&&(c.timeoutHeight=(a.timeoutHeight||l.Long.UZERO).toString()),a.extensionOptions?c.extensionOptions=a.extensionOptions.map(y=>y?s.Any.toJSON(y):void 0):c.extensionOptions=[],a.nonCriticalExtensionOptions?c.nonCriticalExtensionOptions=a.nonCriticalExtensionOptions.map(y=>y?s.Any.toJSON(y):void 0):c.nonCriticalExtensionOptions=[],c},fromPartial(a){var y,F,$;const c=P();return c.messages=((y=a.messages)==null?void 0:y.map(V=>s.Any.fromPartial(V)))||[],c.memo=a.memo??"",c.timeoutHeight=a.timeoutHeight!==void 0&&a.timeoutHeight!==null?l.Long.fromValue(a.timeoutHeight):l.Long.UZERO,c.extensionOptions=((F=a.extensionOptions)==null?void 0:F.map(V=>s.Any.fromPartial(V)))||[],c.nonCriticalExtensionOptions=(($=a.nonCriticalExtensionOptions)==null?void 0:$.map(V=>s.Any.fromPartial(V)))||[],c}};function k(){return{signerInfos:[],fee:void 0,tip:void 0}}e.AuthInfo={encode(a,c=m.Writer.create()){for(const y of a.signerInfos)e.SignerInfo.encode(y,c.uint32(10).fork()).ldelim();return a.fee!==void 0&&e.Fee.encode(a.fee,c.uint32(18).fork()).ldelim(),a.tip!==void 0&&e.Tip.encode(a.tip,c.uint32(26).fork()).ldelim(),c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=k();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.signerInfos.push(e.SignerInfo.decode(y,y.uint32()));break;case 2:$.fee=e.Fee.decode(y,y.uint32());break;case 3:$.tip=e.Tip.decode(y,y.uint32());break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{signerInfos:Array.isArray(a==null?void 0:a.signerInfos)?a.signerInfos.map(c=>e.SignerInfo.fromJSON(c)):[],fee:(0,l.isSet)(a.fee)?e.Fee.fromJSON(a.fee):void 0,tip:(0,l.isSet)(a.tip)?e.Tip.fromJSON(a.tip):void 0}},toJSON(a){const c={};return a.signerInfos?c.signerInfos=a.signerInfos.map(y=>y?e.SignerInfo.toJSON(y):void 0):c.signerInfos=[],a.fee!==void 0&&(c.fee=a.fee?e.Fee.toJSON(a.fee):void 0),a.tip!==void 0&&(c.tip=a.tip?e.Tip.toJSON(a.tip):void 0),c},fromPartial(a){var y;const c=k();return c.signerInfos=((y=a.signerInfos)==null?void 0:y.map(F=>e.SignerInfo.fromPartial(F)))||[],c.fee=a.fee!==void 0&&a.fee!==null?e.Fee.fromPartial(a.fee):void 0,c.tip=a.tip!==void 0&&a.tip!==null?e.Tip.fromPartial(a.tip):void 0,c}};function S(){return{publicKey:void 0,modeInfo:void 0,sequence:l.Long.UZERO}}e.SignerInfo={encode(a,c=m.Writer.create()){return a.publicKey!==void 0&&s.Any.encode(a.publicKey,c.uint32(10).fork()).ldelim(),a.modeInfo!==void 0&&e.ModeInfo.encode(a.modeInfo,c.uint32(18).fork()).ldelim(),a.sequence.isZero()||c.uint32(24).uint64(a.sequence),c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=S();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.publicKey=s.Any.decode(y,y.uint32());break;case 2:$.modeInfo=e.ModeInfo.decode(y,y.uint32());break;case 3:$.sequence=y.uint64();break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{publicKey:(0,l.isSet)(a.publicKey)?s.Any.fromJSON(a.publicKey):void 0,modeInfo:(0,l.isSet)(a.modeInfo)?e.ModeInfo.fromJSON(a.modeInfo):void 0,sequence:(0,l.isSet)(a.sequence)?l.Long.fromValue(a.sequence):l.Long.UZERO}},toJSON(a){const c={};return a.publicKey!==void 0&&(c.publicKey=a.publicKey?s.Any.toJSON(a.publicKey):void 0),a.modeInfo!==void 0&&(c.modeInfo=a.modeInfo?e.ModeInfo.toJSON(a.modeInfo):void 0),a.sequence!==void 0&&(c.sequence=(a.sequence||l.Long.UZERO).toString()),c},fromPartial(a){const c=S();return c.publicKey=a.publicKey!==void 0&&a.publicKey!==null?s.Any.fromPartial(a.publicKey):void 0,c.modeInfo=a.modeInfo!==void 0&&a.modeInfo!==null?e.ModeInfo.fromPartial(a.modeInfo):void 0,c.sequence=a.sequence!==void 0&&a.sequence!==null?l.Long.fromValue(a.sequence):l.Long.UZERO,c}};function h(){return{single:void 0,multi:void 0}}e.ModeInfo={encode(a,c=m.Writer.create()){return a.single!==void 0&&e.ModeInfo_Single.encode(a.single,c.uint32(10).fork()).ldelim(),a.multi!==void 0&&e.ModeInfo_Multi.encode(a.multi,c.uint32(18).fork()).ldelim(),c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=h();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.single=e.ModeInfo_Single.decode(y,y.uint32());break;case 2:$.multi=e.ModeInfo_Multi.decode(y,y.uint32());break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{single:(0,l.isSet)(a.single)?e.ModeInfo_Single.fromJSON(a.single):void 0,multi:(0,l.isSet)(a.multi)?e.ModeInfo_Multi.fromJSON(a.multi):void 0}},toJSON(a){const c={};return a.single!==void 0&&(c.single=a.single?e.ModeInfo_Single.toJSON(a.single):void 0),a.multi!==void 0&&(c.multi=a.multi?e.ModeInfo_Multi.toJSON(a.multi):void 0),c},fromPartial(a){const c=h();return c.single=a.single!==void 0&&a.single!==null?e.ModeInfo_Single.fromPartial(a.single):void 0,c.multi=a.multi!==void 0&&a.multi!==null?e.ModeInfo_Multi.fromPartial(a.multi):void 0,c}};function w(){return{mode:0}}e.ModeInfo_Single={encode(a,c=m.Writer.create()){return a.mode!==0&&c.uint32(8).int32(a.mode),c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=w();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.mode=y.int32();break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{mode:(0,l.isSet)(a.mode)?(0,f.signModeFromJSON)(a.mode):0}},toJSON(a){const c={};return a.mode!==void 0&&(c.mode=(0,f.signModeToJSON)(a.mode)),c},fromPartial(a){const c=w();return c.mode=a.mode??0,c}};function B(){return{bitarray:void 0,modeInfos:[]}}e.ModeInfo_Multi={encode(a,c=m.Writer.create()){a.bitarray!==void 0&&d.CompactBitArray.encode(a.bitarray,c.uint32(10).fork()).ldelim();for(const y of a.modeInfos)e.ModeInfo.encode(y,c.uint32(18).fork()).ldelim();return c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=B();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.bitarray=d.CompactBitArray.decode(y,y.uint32());break;case 2:$.modeInfos.push(e.ModeInfo.decode(y,y.uint32()));break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{bitarray:(0,l.isSet)(a.bitarray)?d.CompactBitArray.fromJSON(a.bitarray):void 0,modeInfos:Array.isArray(a==null?void 0:a.modeInfos)?a.modeInfos.map(c=>e.ModeInfo.fromJSON(c)):[]}},toJSON(a){const c={};return a.bitarray!==void 0&&(c.bitarray=a.bitarray?d.CompactBitArray.toJSON(a.bitarray):void 0),a.modeInfos?c.modeInfos=a.modeInfos.map(y=>y?e.ModeInfo.toJSON(y):void 0):c.modeInfos=[],c},fromPartial(a){var y;const c=B();return c.bitarray=a.bitarray!==void 0&&a.bitarray!==null?d.CompactBitArray.fromPartial(a.bitarray):void 0,c.modeInfos=((y=a.modeInfos)==null?void 0:y.map(F=>e.ModeInfo.fromPartial(F)))||[],c}};function D(){return{amount:[],gasLimit:l.Long.UZERO,payer:"",granter:""}}e.Fee={encode(a,c=m.Writer.create()){for(const y of a.amount)g.Coin.encode(y,c.uint32(10).fork()).ldelim();return a.gasLimit.isZero()||c.uint32(16).uint64(a.gasLimit),a.payer!==""&&c.uint32(26).string(a.payer),a.granter!==""&&c.uint32(34).string(a.granter),c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=D();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.amount.push(g.Coin.decode(y,y.uint32()));break;case 2:$.gasLimit=y.uint64();break;case 3:$.payer=y.string();break;case 4:$.granter=y.string();break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{amount:Array.isArray(a==null?void 0:a.amount)?a.amount.map(c=>g.Coin.fromJSON(c)):[],gasLimit:(0,l.isSet)(a.gasLimit)?l.Long.fromValue(a.gasLimit):l.Long.UZERO,payer:(0,l.isSet)(a.payer)?String(a.payer):"",granter:(0,l.isSet)(a.granter)?String(a.granter):""}},toJSON(a){const c={};return a.amount?c.amount=a.amount.map(y=>y?g.Coin.toJSON(y):void 0):c.amount=[],a.gasLimit!==void 0&&(c.gasLimit=(a.gasLimit||l.Long.UZERO).toString()),a.payer!==void 0&&(c.payer=a.payer),a.granter!==void 0&&(c.granter=a.granter),c},fromPartial(a){var y;const c=D();return c.amount=((y=a.amount)==null?void 0:y.map(F=>g.Coin.fromPartial(F)))||[],c.gasLimit=a.gasLimit!==void 0&&a.gasLimit!==null?l.Long.fromValue(a.gasLimit):l.Long.UZERO,c.payer=a.payer??"",c.granter=a.granter??"",c}};function C(){return{amount:[],tipper:""}}e.Tip={encode(a,c=m.Writer.create()){for(const y of a.amount)g.Coin.encode(y,c.uint32(10).fork()).ldelim();return a.tipper!==""&&c.uint32(18).string(a.tipper),c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=C();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.amount.push(g.Coin.decode(y,y.uint32()));break;case 2:$.tipper=y.string();break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{amount:Array.isArray(a==null?void 0:a.amount)?a.amount.map(c=>g.Coin.fromJSON(c)):[],tipper:(0,l.isSet)(a.tipper)?String(a.tipper):""}},toJSON(a){const c={};return a.amount?c.amount=a.amount.map(y=>y?g.Coin.toJSON(y):void 0):c.amount=[],a.tipper!==void 0&&(c.tipper=a.tipper),c},fromPartial(a){var y;const c=C();return c.amount=((y=a.amount)==null?void 0:y.map(F=>g.Coin.fromPartial(F)))||[],c.tipper=a.tipper??"",c}};function J(){return{address:"",signDoc:void 0,mode:0,sig:new Uint8Array}}e.AuxSignerData={encode(a,c=m.Writer.create()){return a.address!==""&&c.uint32(10).string(a.address),a.signDoc!==void 0&&e.SignDocDirectAux.encode(a.signDoc,c.uint32(18).fork()).ldelim(),a.mode!==0&&c.uint32(24).int32(a.mode),a.sig.length!==0&&c.uint32(34).bytes(a.sig),c},decode(a,c){const y=a instanceof m.Reader?a:new m.Reader(a);let F=c===void 0?y.len:y.pos+c;const $=J();for(;y.pos<F;){const V=y.uint32();switch(V>>>3){case 1:$.address=y.string();break;case 2:$.signDoc=e.SignDocDirectAux.decode(y,y.uint32());break;case 3:$.mode=y.int32();break;case 4:$.sig=y.bytes();break;default:y.skipType(V&7);break}}return $},fromJSON(a){return{address:(0,l.isSet)(a.address)?String(a.address):"",signDoc:(0,l.isSet)(a.signDoc)?e.SignDocDirectAux.fromJSON(a.signDoc):void 0,mode:(0,l.isSet)(a.mode)?(0,f.signModeFromJSON)(a.mode):0,sig:(0,l.isSet)(a.sig)?(0,l.bytesFromBase64)(a.sig):new Uint8Array}},toJSON(a){const c={};return a.address!==void 0&&(c.address=a.address),a.signDoc!==void 0&&(c.signDoc=a.signDoc?e.SignDocDirectAux.toJSON(a.signDoc):void 0),a.mode!==void 0&&(c.mode=(0,f.signModeToJSON)(a.mode)),a.sig!==void 0&&(c.sig=(0,l.base64FromBytes)(a.sig!==void 0?a.sig:new Uint8Array)),c},fromPartial(a){const c=J();return c.address=a.address??"",c.signDoc=a.signDoc!==void 0&&a.signDoc!==null?e.SignDocDirectAux.fromPartial(a.signDoc):void 0,c.mode=a.mode??0,c.sig=a.sig??new Uint8Array,c}}})(tx);const getLedgerAddress=async({chain:e,ledgerClient:r})=>{if(!r)return"";switch(e){case i.Cosmos:case i.Binance:case i.THORChain:return r.connect();case i.Ethereum:case i.Avalanche:return r.getAddress();case i.Bitcoin:case i.BitcoinCash:case i.Dogecoin:case i.Litecoin:{await r.connect();const n=await r.getAddress();return e===i.BitcoinCash?n.replace("bitcoincash:",""):n}}},derivationPathToString=([e,r,n,u,s])=>`${e}'/${r}'/${n}'/${u}${typeof s!="number"?"":`/${s}`}`;G.Average+"",G.Fast+"",G.Fastest+"";const getLedgerDevices=async()=>{var s,f,d;if(typeof((s=navigator==null?void 0:navigator.usb)==null?void 0:s.getDevices)!="function")return[];const{ledgerUSBVendorId:e}=await Promise.resolve().then(()=>require("./index-f958f19f.cjs")),n=(await((f=navigator==null?void 0:navigator.usb)==null?void 0:f.getDevices())).filter(g=>g.vendorId===e);return n.length>0?n[0]:await((d=navigator==null?void 0:navigator.usb)==null?void 0:d.requestDevice({filters:[{vendorId:e}]}))},getLedgerTransport=async()=>{var g;const e=await getLedgerDevices();if(!e)throw new Error("No Ledger device found");await e.open(),e.configuration===null&&await e.selectConfiguration(1);try{await e.reset()}catch(l){console.warn(l)}const r=e.configurations[0].interfaces.find(({alternates:l})=>l.some(({interfaceClass:m})=>m===255));if(!r)throw new Error("No Ledger device found");try{await e.claimInterface(r.interfaceNumber)}catch(l){throw await e.close(),console.error(l),new Error(l.message)}const{default:n}=await Promise.resolve().then(()=>require("./TransportWebUSB-97eafafa.cjs"));if(!await n.isSupported())throw new Error("WebUSB not supported");const{DisconnectedDevice:s}=await Promise.resolve().then(()=>require("./index-12aaf076.cjs")),f=new n(e,r.interfaceNumber),d=l=>{var m;e===l.device&&((m=navigator==null?void 0:navigator.usb)==null||m.removeEventListener("disconnect",d),f._emitDisconnect(new s))};return(g=navigator==null?void 0:navigator.usb)==null||g.addEventListener("disconnect",d),f};class EthereumLikeLedgerInterface extends abstractSigner.Signer{constructor(n){super();K(this,"chain","eth");K(this,"chainId",T.Ethereum);K(this,"derivationPath","");K(this,"ledgerApp",null);K(this,"ledgerTimeout",5e4);K(this,"checkOrCreateTransportAndLedger",async()=>{if(this.ledgerApp)return;const n=await getLedgerTransport(),{default:u}=await Promise.resolve().then(()=>require("./Eth-5fc8d7c3.cjs"));this.ledgerApp||(this.ledgerApp=new u(n))});K(this,"getAddress",async()=>{const n=await this.getAddressAndPubKey();if(!n)throw new Error("Could not get Address");return n.address});K(this,"getAddressAndPubKey",async()=>{var n;return await this.checkOrCreateTransportAndLedger(),(n=this.ledgerApp)==null?void 0:n.getAddress(this.derivationPath)});K(this,"showAddressAndPubKey",async()=>{var n;return await this.checkOrCreateTransportAndLedger(),(n=this.ledgerApp)==null?void 0:n.getAddress(this.derivationPath,!0)});K(this,"signMessage",async n=>{var f;await this.checkOrCreateTransportAndLedger();const u=await((f=this.ledgerApp)==null?void 0:f.signPersonalMessage(this.derivationPath,n));if(!u)throw new Error("Signing failed");const{joinSignature:s}=await import("@ethersproject/bytes");return u.r="0x"+u.r,u.s="0x"+u.s,s(u)});K(this,"signTransaction",async n=>{var W;await this.checkOrCreateTransportAndLedger();const{resolveProperties:u}=await import("@ethersproject/properties"),s=await u(n),f=await this.getTransactionCount(),{BigNumber:d}=await import("@ethersproject/bignumber"),g={chainId:d.from(n.chainId||this.chainId).toNumber(),data:s.data||void 0,gasLimit:s.gasLimit||void 0,...s.gasPrice&&{gasPrice:s.gasPrice||void 0},...!s.gasPrice&&s.maxFeePerGas&&{maxFeePerGas:s.maxFeePerGas||void 0,maxPriorityFeePerGas:s.maxPriorityFeePerGas||void 0},nonce:s.nonce!==void 0?d.from(s.nonce.toString()).toNumber():f,to:s.to||void 0,value:s.value||void 0,type:s.type||2},{serialize:l}=await import("@ethersproject/transactions"),m=l(g).slice(2),{ledgerService:A}=await Promise.resolve().then(()=>require("./Eth-5fc8d7c3.cjs")),N=await A.resolveTransaction(m,{},{externalPlugins:!0,erc20:!0}),I=await((W=this.ledgerApp)==null?void 0:W.signTransaction(this.derivationPath,m,N));if(!I)throw new Error("Could not sign transaction");return"0x"+l(g,{v:new BN.BN(parseInt(I.v,16)).toNumber(),r:"0x"+I.r,s:"0x"+I.s}).slice(2)});Object.defineProperty(this,"provider",{enumerable:!0,value:n||null,writable:!1})}}class AvalancheLedger extends EthereumLikeLedgerInterface{constructor({provider:n,derivationPath:u=q.AVAX,chainId:s=T.Avalanche}){super(n);K(this,"connect",n=>new AvalancheLedger({provider:n,derivationPath:this.derivationPath,chainId:this.chainId}));this.chainId=s||T.Avalanche,this.chain="avax",this.derivationPath=typeof u=="string"?u:derivationPathToString(u)}}const DEFAULT_LEDGER_INTERACTIVE_TIMEOUT=5e4,DEFAULT_LEDGER_NONINTERACTIVE_TIMEOUT=3e3,CLA$1=188,SCRAMBLE_KEY="CSM",ACCEPT_STATUSES=[36864],CHUNK_SIZE$1=250,INS_GET_VERSION=0,INS_PUBLIC_KEY_SECP256K1=1,INS_SIGN_SECP256K1=2,INS_SHOW_ADDR_SECP256K1=3;class BinanceApp{constructor(r,n=DEFAULT_LEDGER_INTERACTIVE_TIMEOUT,u=DEFAULT_LEDGER_NONINTERACTIVE_TIMEOUT){K(this,"_transport");K(this,"_interactiveTimeout");K(this,"_nonInteractiveTimeout");if(!(r!=null&&r.send))throw new Error("LedgerApp expected a Transport");this._transport=r,this._interactiveTimeout=n,this._nonInteractiveTimeout=u,this._transport.setScrambleKey(SCRAMBLE_KEY)}_serialize(r=CLA$1,n,u=0,s=0,f=null){let d=5;if(f!=null){if(f.length>255)throw new Error("maximum data size = 255");d+=f.length}const g=Buffer.alloc(d);return g[0]=r,g[1]=n,g[2]=u,g[3]=s,g[4]=0,f!=null&&(g[4]=f.length,g.set(f,5)),g}_serializeHRP(r){if(r==null||r.length<3||r.length>83)throw new Error("Invalid HRP");const n=Buffer.alloc(1+r.length);return n.writeUInt8(r.length,0),n.write(r,1),n}_serializeHDPath(r){if(r==null||r.length<3)throw new Error("Invalid path.");if(r.length>10)throw new Error("Invalid path. Length should be <= 10");const n=Buffer.alloc(1+4*r.length);n.writeUInt8(r.length,0);for(let u=0;u<r.length;u++){let s=r[u];u<3&&(s|=2147483648),n.writeInt32LE(s,1+u*4)}return n}_errorMessage(r){switch(r){case 1:return"U2F: Unknown";case 2:return"U2F: Bad request";case 3:return"U2F: Configuration unsupported";case 4:return"U2F: Device Ineligible";case 5:return"U2F: Timeout";case 14:return"Timeout";case 36864:return"No errors";case 36865:return"Device is busy";case 25600:return"Execution Error";case 26368:return"Wrong Length";case 27010:return"Empty Buffer";case 27011:return"Output buffer too small";case 27012:return"Data is invalid";case 27013:return"Conditions not satisfied";case 27014:return"Transaction rejected";case 27264:return"Bad key handle";case 27392:return"Invalid P1/P2";case 27904:return"Instruction not supported";case 28160:return"The app does not seem to be open";case 28416:return"Unknown error";case 28417:return"Sign/verify error";default:return"Unknown error code"}}async getVersion(){const r={};try{this._transport.setExchangeTimeout(this._nonInteractiveTimeout);const n=await this._transport.send(CLA$1,INS_GET_VERSION,0,0,Buffer.alloc(0),ACCEPT_STATUSES);if(!Buffer.isBuffer(n))throw new Error("expected apduResponse to be Buffer");const u=n.slice(-2);r.test_mode=n[0]!==0,r.major=n[1],r.minor=n[2],r.patch=n[3],r.device_locked=n[4]===1,r.return_code=u[0]*256+u[1],r.error_message=this._errorMessage(r.return_code)}catch(n){const{statusCode:u,statusText:s,message:f,stack:d}=n;throw console.warn("Ledger getVersion error:",this._errorMessage(u),f,s,d),n}return r}async publicKeySecp256k1(r=[44,714,0,0,0]){const n={};try{this._transport.setExchangeTimeout(this._nonInteractiveTimeout);const u=await this._transport.send(CLA$1,INS_PUBLIC_KEY_SECP256K1,0,0,this._serializeHDPath(r),ACCEPT_STATUSES);if(!Buffer.isBuffer(u))throw new Error("expected apduResponse to be Buffer");const s=u.slice(-2);n.pk=u.slice(0,1+64),n.return_code=s[0]*256+s[1],n.error_message=this._errorMessage(n.return_code)}catch(u){const{statusCode:s,statusText:f,message:d,stack:g}=u;throw console.warn("Ledger publicKeySecp256k1 error:",this._errorMessage(s),d,f,g),u}return n}_signGetChunks(r,n){const u=[];u.push(this._serializeHDPath(n));const s=Buffer.from(r);for(let f=0;f<s.length;f+=CHUNK_SIZE$1){let d=f+CHUNK_SIZE$1;f>s.length&&(d=s.length),u.push(s.slice(f,d))}return u}async _signSendChunk(r,n,u){const s={};try{const f=await this._transport.send(CLA$1,INS_SIGN_SECP256K1,r,n,u);if(!Buffer.isBuffer(f))throw new Error("expected apduResponse to be Buffer");const d=f.slice(-2);s.return_code=d[0]*256+d[1],s.error_message=this._errorMessage(s.return_code),s.signature=null,f.length>2&&(s.signature=f.slice(0,f.length-2))}catch(f){const{statusCode:d,statusText:g,message:l,stack:m}=f;throw console.warn("Ledger signSendChunk error:",this._errorMessage(d),l,g,m),f}return s}async signSecp256k1(r,n=[44,714,0,0,0]){const u={},s=this._signGetChunks(r,n);let f;try{s.length<=1?this._transport.setExchangeTimeout(this._interactiveTimeout):this._transport.setExchangeTimeout(this._nonInteractiveTimeout),f=await this._signSendChunk(1,s.length,s[0]),u.return_code=f.return_code,u.error_message=f.error_message,u.signature=null}catch(d){const{statusCode:g,statusText:l,message:m,stack:A}=d;throw console.warn("Ledger signSecp256k1 error (chunk 1):",this._errorMessage(g),m,l,A),d}if(f.return_code===36864){for(let W=1;W<s.length;W++){try{W===s.length-1&&this._transport.setExchangeTimeout(this._interactiveTimeout),f=await this._signSendChunk(1+W,s.length,s[W]),u.return_code=f.return_code,u.error_message=f.error_message}catch(P){const{statusCode:k,statusText:S,message:h,stack:w}=P;throw console.warn("Ledger signSecp256k1 error (chunk 2):",this._errorMessage(k),h,S,w),P}if(f.return_code!==36864)break}u.return_code=f.return_code,u.error_message=f.error_message;let d=f.signature;if(!(d!=null&&d.length))throw new Error("Ledger assertion failed: Expected a non-empty signature from the device");if(d[0]!==48)throw new Error("Ledger assertion failed: Expected a signature header of 0x30");let g=4,l=d[3];const m=d[4+l+1];let A=d.length-m;l===33&&(g++,l--),m===33&&A++;const N=d.slice(g,g+l),I=d.slice(A);if(d=u.signature=Buffer.concat([N,I]),d.length!==64)throw new Error(`Ledger assertion failed: incorrect signature length ${d.length}`)}else throw new Error("Unable to sign the transaction. Return code "+f.return_code);return u}async showAddress(r="bnb",n=[44,714,0,0,0]){const u={},s=Buffer.concat([this._serializeHRP(r),this._serializeHDPath(n)]);this._transport.setExchangeTimeout(this._interactiveTimeout);const f=await this._transport.send(CLA$1,INS_SHOW_ADDR_SECP256K1,0,0,s,ACCEPT_STATUSES);if(!Buffer.isBuffer(f))throw new Error("expected apduResponse to be Buffer");const d=f.slice(-2);return u.return_code=d[0]*256+d[1],u.error_message=this._errorMessage(u.return_code),u.return_code===27264&&(u.error_message=f.slice(0,f.length-2).toString("ascii")),u}getPublicKey(r){return this.publicKeySecp256k1(r)}sign(r,n){return this.signSecp256k1(r,n)}}var inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(r,n){if(n){r.super_=n;var u=function(){};u.prototype=n.prototype,r.prototype=new u,r.prototype.constructor=r}};var inherits_browserExports=inherits_browser.exports,safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,r){var n=require$$0,u=n.Buffer;function s(d,g){for(var l in d)g[l]=d[l]}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?e.exports=n:(s(n,r),r.Buffer=f);function f(d,g,l){return u(d,g,l)}f.prototype=Object.create(u.prototype),s(u,f),f.from=function(d,g,l){if(typeof d=="number")throw new TypeError("Argument must not be a number");return u(d,g,l)},f.alloc=function(d,g,l){if(typeof d!="number")throw new TypeError("Argument must be a number");var m=u(d);return g!==void 0?typeof l=="string"?m.fill(g,l):m.fill(g):m.fill(0),m},f.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return u(d)},f.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(d)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,readableBrowser={exports:{}},streamBrowser=require$$0$1.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function e(P,k){var S=Object.keys(P);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(P);k&&(h=h.filter(function(w){return Object.getOwnPropertyDescriptor(P,w).enumerable})),S.push.apply(S,h)}return S}function r(P){for(var k=1;k<arguments.length;k++){var S=arguments[k]!=null?arguments[k]:{};k%2?e(Object(S),!0).forEach(function(h){n(P,h,S[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(S)):e(Object(S)).forEach(function(h){Object.defineProperty(P,h,Object.getOwnPropertyDescriptor(S,h))})}return P}function n(P,k,S){return k=d(k),k in P?Object.defineProperty(P,k,{value:S,enumerable:!0,configurable:!0,writable:!0}):P[k]=S,P}function u(P,k){if(!(P instanceof k))throw new TypeError("Cannot call a class as a function")}function s(P,k){for(var S=0;S<k.length;S++){var h=k[S];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(P,d(h.key),h)}}function f(P,k,S){return k&&s(P.prototype,k),S&&s(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}function d(P){var k=g(P,"string");return typeof k=="symbol"?k:String(k)}function g(P,k){if(typeof P!="object"||P===null)return P;var S=P[Symbol.toPrimitive];if(S!==void 0){var h=S.call(P,k||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(P)}var l=require$$0,m=l.Buffer,A=require$$1$1,N=A.inspect,I=N&&N.custom||"inspect";function W(P,k,S){m.prototype.copy.call(P,k,S)}return buffer_list=function(){function P(){u(this,P),this.head=null,this.tail=null,this.length=0}return f(P,[{key:"push",value:function(S){var h={data:S,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}},{key:"unshift",value:function(S){var h={data:S,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}},{key:"shift",value:function(){if(this.length!==0){var S=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,S}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(S){if(this.length===0)return"";for(var h=this.head,w=""+h.data;h=h.next;)w+=S+h.data;return w}},{key:"concat",value:function(S){if(this.length===0)return m.alloc(0);for(var h=m.allocUnsafe(S>>>0),w=this.head,B=0;w;)W(w.data,h,B),B+=w.data.length,w=w.next;return h}},{key:"consume",value:function(S,h){var w;return S<this.head.data.length?(w=this.head.data.slice(0,S),this.head.data=this.head.data.slice(S)):S===this.head.data.length?w=this.shift():w=h?this._getString(S):this._getBuffer(S),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(S){var h=this.head,w=1,B=h.data;for(S-=B.length;h=h.next;){var D=h.data,C=S>D.length?D.length:S;if(C===D.length?B+=D:B+=D.slice(0,S),S-=C,S===0){C===D.length?(++w,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=D.slice(C));break}++w}return this.length-=w,B}},{key:"_getBuffer",value:function(S){var h=m.allocUnsafe(S),w=this.head,B=1;for(w.data.copy(h),S-=w.data.length;w=w.next;){var D=w.data,C=S>D.length?D.length:S;if(D.copy(h,h.length-S,0,C),S-=C,S===0){C===D.length?(++B,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=D.slice(C));break}++B}return this.length-=B,h}},{key:I,value:function(S,h){return N(this,r(r({},h),{},{depth:0,customInspect:!1}))}}]),P}(),buffer_list}function destroy(e,r){var n=this,u=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return u||s?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,e)):process.nextTick(emitErrorNT,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(f){!r&&f?n._writableState?n._writableState.errorEmitted?process.nextTick(emitCloseNT,n):(n._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,n,f)):process.nextTick(emitErrorAndCloseNT,n,f):r?(process.nextTick(emitCloseNT,n),r(f)):process.nextTick(emitCloseNT,n)}),this)}function emitErrorAndCloseNT(e,r){emitErrorNT(e,r),emitCloseNT(e)}function emitCloseNT(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(e,r){e.emit("error",r)}function errorOrDestroy(e,r){var n=e._readableState,u=e._writableState;n&&n.autoDestroy||u&&u.autoDestroy?e.destroy(r):e.emit("error",r)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}var codes={};function createErrorType(e,r,n){n||(n=Error);function u(f,d,g){return typeof r=="string"?r:r(f,d,g)}var s=function(f){_inheritsLoose(d,f);function d(g,l,m){return f.call(this,u(g,l,m))||this}return d}(n);s.prototype.name=n.name,s.prototype.code=e,codes[e]=s}function oneOf(e,r){if(Array.isArray(e)){var n=e.length;return e=e.map(function(u){return String(u)}),n>2?"one of ".concat(r," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:n===2?"one of ".concat(r," ").concat(e[0]," or ").concat(e[1]):"of ".concat(r," ").concat(e[0])}else return"of ".concat(r," ").concat(String(e))}function startsWith(e,r,n){return e.substr(!n||n<0?0:+n,r.length)===r}function endsWith(e,r,n){return(n===void 0||n>e.length)&&(n=e.length),e.substring(n-r.length,n)===r}function includes(e,r,n){return typeof n!="number"&&(n=0),n+r.length>e.length?!1:e.indexOf(r,n)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(e,r){return'The value "'+r+'" is invalid for option "'+e+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(e,r,n){var u;typeof r=="string"&&startsWith(r,"not ")?(u="must not be",r=r.replace(/^not /,"")):u="must be";var s;if(endsWith(e," argument"))s="The ".concat(e," ").concat(u," ").concat(oneOf(r,"type"));else{var f=includes(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(f," ").concat(u," ").concat(oneOf(r,"type"))}return s+=". Received type ".concat(typeof n),s},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(e,r,n){return e.highWaterMark!=null?e.highWaterMark:r?e[n]:null}function getHighWaterMark(e,r,n,u){var s=highWaterMarkFrom(r,u,n);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var f=u?n:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(f,s)}return Math.floor(s)}return e.objectMode?16:16*1024}var state={getHighWaterMark},browser=deprecate;function deprecate(e,r){if(config("noDeprecation"))return e;var n=!1;function u(){if(!n){if(config("throwDeprecation"))throw new Error(r);config("traceDeprecation")?console.trace(r):console.warn(r),n=!0}return e.apply(this,arguments)}return u}function config(e){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var r=commonjsGlobal.localStorage[e];return r==null?!1:String(r).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=c;function e(O){var R=this;this.next=null,this.entry=null,this.finish=function(){ye(R,O)}}var r;c.WritableState=J;var n={deprecate:browser},u=streamBrowser,s=require$$0.Buffer,f=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d(O){return s.from(O)}function g(O){return s.isBuffer(O)||O instanceof f}var l=destroy_1,m=state,A=m.getHighWaterMark,N=errorsBrowser.codes,I=N.ERR_INVALID_ARG_TYPE,W=N.ERR_METHOD_NOT_IMPLEMENTED,P=N.ERR_MULTIPLE_CALLBACK,k=N.ERR_STREAM_CANNOT_PIPE,S=N.ERR_STREAM_DESTROYED,h=N.ERR_STREAM_NULL_VALUES,w=N.ERR_STREAM_WRITE_AFTER_END,B=N.ERR_UNKNOWN_ENCODING,D=l.errorOrDestroy;inherits_browserExports(c,u);function C(){}function J(O,R,x){r=r||require_stream_duplex(),O=O||{},typeof x!="boolean"&&(x=R instanceof r),this.objectMode=!!O.objectMode,x&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=A(this,O,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Y=O.decodeStrings===!1;this.decodeStrings=!Y,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){se(R,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}J.prototype.getBuffer=function(){for(var R=this.bufferedRequest,x=[];R;)x.push(R),R=R.next;return x},function(){try{Object.defineProperty(J.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var a;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(R){return a.call(this,R)?!0:this!==c?!1:R&&R._writableState instanceof J}})):a=function(R){return R instanceof this};function c(O){r=r||require_stream_duplex();var R=this instanceof r;if(!R&&!a.call(c,this))return new c(O);this._writableState=new J(O,this,R),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),u.call(this)}c.prototype.pipe=function(){D(this,new k)};function y(O,R){var x=new w;D(O,x),process.nextTick(R,x)}function F(O,R,x,Y){var Z;return x===null?Z=new h:typeof x!="string"&&!R.objectMode&&(Z=new I("chunk",["string","Buffer"],x)),Z?(D(O,Z),process.nextTick(Y,Z),!1):!0}c.prototype.write=function(O,R,x){var Y=this._writableState,Z=!1,b=!Y.objectMode&&g(O);return b&&!s.isBuffer(O)&&(O=d(O)),typeof R=="function"&&(x=R,R=null),b?R="buffer":R||(R=Y.defaultEncoding),typeof x!="function"&&(x=C),Y.ending?y(this,x):(b||F(this,Y,O,x))&&(Y.pendingcb++,Z=V(this,Y,b,O,R,x)),Z},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&re(this,O))},c.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new B(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $(O,R,x){return!O.objectMode&&O.decodeStrings!==!1&&typeof R=="string"&&(R=s.from(R,x)),R}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function V(O,R,x,Y,Z,b){if(!x){var E=$(R,Y,Z);Y!==E&&(x=!0,Z="buffer",Y=E)}var M=R.objectMode?1:Y.length;R.length+=M;var H=R.length<R.highWaterMark;if(H||(R.needDrain=!0),R.writing||R.corked){var j=R.lastBufferedRequest;R.lastBufferedRequest={chunk:Y,encoding:Z,isBuf:x,callback:b,next:null},j?j.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else te(O,R,!1,M,Y,Z,b);return H}function te(O,R,x,Y,Z,b,E){R.writelen=Y,R.writecb=E,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new S("write")):x?O._writev(Z,R.onwrite):O._write(Z,b,R.onwrite),R.sync=!1}function ae(O,R,x,Y,Z){--R.pendingcb,x?(process.nextTick(Z,Y),process.nextTick(oe,O,R),O._writableState.errorEmitted=!0,D(O,Y)):(Z(Y),O._writableState.errorEmitted=!0,D(O,Y),oe(O,R))}function ie(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function se(O,R){var x=O._writableState,Y=x.sync,Z=x.writecb;if(typeof Z!="function")throw new P;if(ie(x),R)ae(O,x,Y,R,Z);else{var b=ne(x)||O.destroyed;!b&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&re(O,x),Y?process.nextTick(ee,O,x,b,Z):ee(O,x,b,Z)}}function ee(O,R,x,Y){x||ue(O,R),R.pendingcb--,Y(),oe(O,R)}function ue(O,R){R.length===0&&R.needDrain&&(R.needDrain=!1,O.emit("drain"))}function re(O,R){R.bufferProcessing=!0;var x=R.bufferedRequest;if(O._writev&&x&&x.next){var Y=R.bufferedRequestCount,Z=new Array(Y),b=R.corkedRequestsFree;b.entry=x;for(var E=0,M=!0;x;)Z[E]=x,x.isBuf||(M=!1),x=x.next,E+=1;Z.allBuffers=M,te(O,R,!0,R.length,Z,"",b.finish),R.pendingcb++,R.lastBufferedRequest=null,b.next?(R.corkedRequestsFree=b.next,b.next=null):R.corkedRequestsFree=new e(R),R.bufferedRequestCount=0}else{for(;x;){var H=x.chunk,j=x.encoding,z=x.callback,X=R.objectMode?1:H.length;if(te(O,R,!1,X,H,j,z),x=x.next,R.bufferedRequestCount--,R.writing)break}x===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=x,R.bufferProcessing=!1}c.prototype._write=function(O,R,x){x(new W("_write()"))},c.prototype._writev=null,c.prototype.end=function(O,R,x){var Y=this._writableState;return typeof O=="function"?(x=O,O=null,R=null):typeof R=="function"&&(x=R,R=null),O!=null&&this.write(O,R),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||pe(this,Y,x),this},Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ne(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function ce(O,R){O._final(function(x){R.pendingcb--,x&&D(O,x),R.prefinished=!0,O.emit("prefinish"),oe(O,R)})}function he(O,R){!R.prefinished&&!R.finalCalled&&(typeof O._final=="function"&&!R.destroyed?(R.pendingcb++,R.finalCalled=!0,process.nextTick(ce,O,R)):(R.prefinished=!0,O.emit("prefinish")))}function oe(O,R){var x=ne(R);if(x&&(he(O,R),R.pendingcb===0&&(R.finished=!0,O.emit("finish"),R.autoDestroy))){var Y=O._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&O.destroy()}return x}function pe(O,R,x){R.ending=!0,oe(O,R),x&&(R.finished?process.nextTick(x):O.once("finish",x)),R.ended=!0,O.writable=!1}function ye(O,R,x){var Y=O.entry;for(O.entry=null;Y;){var Z=Y.callback;R.pendingcb--,Z(x),Y=Y.next}R.corkedRequestsFree.next=O}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),c.prototype.destroy=l.destroy,c.prototype._undestroy=l.undestroy,c.prototype._destroy=function(O,R){R(O)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var e=Object.keys||function(m){var A=[];for(var N in m)A.push(N);return A};_stream_duplex=d;var r=require_stream_readable(),n=require_stream_writable();inherits_browserExports(d,r);for(var u=e(n.prototype),s=0;s<u.length;s++){var f=u[s];d.prototype[f]||(d.prototype[f]=n.prototype[f])}function d(m){if(!(this instanceof d))return new d(m);r.call(this,m),n.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",g)))}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function g(){this._writableState.ended||process.nextTick(l,this)}function l(m){m.end()}return Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(A){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=A,this._writableState.destroyed=A)}}),_stream_duplex}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=safeBufferExports.Buffer,r=e.isEncoding||function(h){switch(h=""+h,h&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(h){if(!h)return"utf8";for(var w;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(w)return;h=(""+h).toLowerCase(),w=!0}}function u(h){var w=n(h);if(typeof w!="string"&&(e.isEncoding===r||!r(h)))throw new Error("Unknown encoding: "+h);return w||h}string_decoder.StringDecoder=s;function s(h){this.encoding=u(h);var w;switch(this.encoding){case"utf16le":this.text=N,this.end=I,w=4;break;case"utf8":this.fillLast=l,w=4;break;case"base64":this.text=W,this.end=P,w=3;break;default:this.write=k,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(w)}s.prototype.write=function(h){if(h.length===0)return"";var w,B;if(this.lastNeed){if(w=this.fillLast(h),w===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<h.length?w?w+this.text(h,B):this.text(h,B):w||""},s.prototype.end=A,s.prototype.text=m,s.prototype.fillLast=function(h){if(this.lastNeed<=h.length)return h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,h.length),this.lastNeed-=h.length};function f(h){return h<=127?0:h>>5===6?2:h>>4===14?3:h>>3===30?4:h>>6===2?-1:-2}function d(h,w,B){var D=w.length-1;if(D<B)return 0;var C=f(w[D]);return C>=0?(C>0&&(h.lastNeed=C-1),C):--D<B||C===-2?0:(C=f(w[D]),C>=0?(C>0&&(h.lastNeed=C-2),C):--D<B||C===-2?0:(C=f(w[D]),C>=0?(C>0&&(C===2?C=0:h.lastNeed=C-3),C):0))}function g(h,w,B){if((w[0]&192)!==128)return h.lastNeed=0,"";if(h.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return h.lastNeed=1,"";if(h.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return h.lastNeed=2,""}}function l(h){var w=this.lastTotal-this.lastNeed,B=g(this,h);if(B!==void 0)return B;if(this.lastNeed<=h.length)return h.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,w,0,h.length),this.lastNeed-=h.length}function m(h,w){var B=d(this,h,w);if(!this.lastNeed)return h.toString("utf8",w);this.lastTotal=B;var D=h.length-(B-this.lastNeed);return h.copy(this.lastChar,0,D),h.toString("utf8",w,D)}function A(h){var w=h&&h.length?this.write(h):"";return this.lastNeed?w+"":w}function N(h,w){if((h.length-w)%2===0){var B=h.toString("utf16le",w);if(B){var D=B.charCodeAt(B.length-1);if(D>=55296&&D<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=h[h.length-1],h.toString("utf16le",w,h.length-1)}function I(h){var w=h&&h.length?this.write(h):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,B)}return w}function W(h,w){var B=(h.length-w)%3;return B===0?h.toString("base64",w):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=h[h.length-1]:(this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1]),h.toString("base64",w,h.length-B))}function P(h){var w=h&&h.length?this.write(h):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function k(h){return h.toString(this.encoding)}function S(h){return h&&h.length?this.write(h):""}return string_decoder}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(e){var r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,u=new Array(n),s=0;s<n;s++)u[s]=arguments[s];e.apply(this,u)}}}function noop$1(){}function isRequest$1(e){return e.setHeader&&typeof e.abort=="function"}function eos$1(e,r,n){if(typeof r=="function")return eos$1(e,null,r);r||(r={}),n=once$1(n||noop$1);var u=r.readable||r.readable!==!1&&e.readable,s=r.writable||r.writable!==!1&&e.writable,f=function(){e.writable||g()},d=e._writableState&&e._writableState.finished,g=function(){s=!1,d=!0,u||n.call(e)},l=e._readableState&&e._readableState.endEmitted,m=function(){u=!1,l=!0,s||n.call(e)},A=function(P){n.call(e,P)},N=function(){var P;if(u&&!l)return(!e._readableState||!e._readableState.ended)&&(P=new ERR_STREAM_PREMATURE_CLOSE),n.call(e,P);if(s&&!d)return(!e._writableState||!e._writableState.ended)&&(P=new ERR_STREAM_PREMATURE_CLOSE),n.call(e,P)},I=function(){e.req.on("finish",g)};return isRequest$1(e)?(e.on("complete",g),e.on("abort",N),e.req?I():e.on("request",I)):s&&!e._writableState&&(e.on("end",f),e.on("close",f)),e.on("end",m),e.on("finish",g),r.error!==!1&&e.on("error",A),e.on("close",N),function(){e.removeListener("complete",g),e.removeListener("abort",N),e.removeListener("request",I),e.req&&e.req.removeListener("finish",g),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",g),e.removeListener("end",m),e.removeListener("error",A),e.removeListener("close",N)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var e;function r(B,D,C){return D=n(D),D in B?Object.defineProperty(B,D,{value:C,enumerable:!0,configurable:!0,writable:!0}):B[D]=C,B}function n(B){var D=u(B,"string");return typeof D=="symbol"?D:String(D)}function u(B,D){if(typeof B!="object"||B===null)return B;var C=B[Symbol.toPrimitive];if(C!==void 0){var J=C.call(B,D||"default");if(typeof J!="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(B)}var s=endOfStream,f=Symbol("lastResolve"),d=Symbol("lastReject"),g=Symbol("error"),l=Symbol("ended"),m=Symbol("lastPromise"),A=Symbol("handlePromise"),N=Symbol("stream");function I(B,D){return{value:B,done:D}}function W(B){var D=B[f];if(D!==null){var C=B[N].read();C!==null&&(B[m]=null,B[f]=null,B[d]=null,D(I(C,!1)))}}function P(B){process.nextTick(W,B)}function k(B,D){return function(C,J){B.then(function(){if(D[l]){C(I(void 0,!0));return}D[A](C,J)},J)}}var S=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((e={get stream(){return this[N]},next:function(){var D=this,C=this[g];if(C!==null)return Promise.reject(C);if(this[l])return Promise.resolve(I(void 0,!0));if(this[N].destroyed)return new Promise(function(y,F){process.nextTick(function(){D[g]?F(D[g]):y(I(void 0,!0))})});var J=this[m],a;if(J)a=new Promise(k(J,this));else{var c=this[N].read();if(c!==null)return Promise.resolve(I(c,!1));a=new Promise(this[A])}return this[m]=a,a}},r(e,Symbol.asyncIterator,function(){return this}),r(e,"return",function(){var D=this;return new Promise(function(C,J){D[N].destroy(null,function(a){if(a){J(a);return}C(I(void 0,!0))})})}),e),S),w=function(D){var C,J=Object.create(h,(C={},r(C,N,{value:D,writable:!0}),r(C,f,{value:null,writable:!0}),r(C,d,{value:null,writable:!0}),r(C,g,{value:null,writable:!0}),r(C,l,{value:D._readableState.endEmitted,writable:!0}),r(C,A,{value:function(c,y){var F=J[N].read();F?(J[m]=null,J[f]=null,J[d]=null,c(I(F,!1))):(J[f]=c,J[d]=y)},writable:!0}),C));return J[m]=null,s(D,function(a){if(a&&a.code!=="ERR_STREAM_PREMATURE_CLOSE"){var c=J[d];c!==null&&(J[m]=null,J[f]=null,J[d]=null,c(a)),J[g]=a;return}var y=J[f];y!==null&&(J[m]=null,J[f]=null,J[d]=null,y(I(void 0,!0))),J[l]=!0}),D.on("readable",P.bind(null,J)),J};return async_iterator=w,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=y;var e;y.ReadableState=c,require$$0$1.EventEmitter;var r=function(E,M){return E.listeners(M).length},n=streamBrowser,u=require$$0.Buffer,s=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(b){return u.from(b)}function d(b){return u.isBuffer(b)||b instanceof s}var g=require$$1$1,l;g&&g.debuglog?l=g.debuglog("stream"):l=function(){};var m=requireBuffer_list(),A=destroy_1,N=state,I=N.getHighWaterMark,W=errorsBrowser.codes,P=W.ERR_INVALID_ARG_TYPE,k=W.ERR_STREAM_PUSH_AFTER_EOF,S=W.ERR_METHOD_NOT_IMPLEMENTED,h=W.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,w,B,D;inherits_browserExports(y,n);var C=A.errorOrDestroy,J=["error","close","destroy","pause","resume"];function a(b,E,M){if(typeof b.prependListener=="function")return b.prependListener(E,M);!b._events||!b._events[E]?b.on(E,M):Array.isArray(b._events[E])?b._events[E].unshift(M):b._events[E]=[M,b._events[E]]}function c(b,E,M){e=e||require_stream_duplex(),b=b||{},typeof M!="boolean"&&(M=E instanceof e),this.objectMode=!!b.objectMode,M&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.highWaterMark=I(this,b,"readableHighWaterMark",M),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=b.emitClose!==!1,this.autoDestroy=!!b.autoDestroy,this.destroyed=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(w||(w=requireString_decoder().StringDecoder),this.decoder=new w(b.encoding),this.encoding=b.encoding)}function y(b){if(e=e||require_stream_duplex(),!(this instanceof y))return new y(b);var E=this instanceof e;this._readableState=new c(b,this,E),this.readable=!0,b&&(typeof b.read=="function"&&(this._read=b.read),typeof b.destroy=="function"&&(this._destroy=b.destroy)),n.call(this)}Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(E){this._readableState&&(this._readableState.destroyed=E)}}),y.prototype.destroy=A.destroy,y.prototype._undestroy=A.undestroy,y.prototype._destroy=function(b,E){E(b)},y.prototype.push=function(b,E){var M=this._readableState,H;return M.objectMode?H=!0:typeof b=="string"&&(E=E||M.defaultEncoding,E!==M.encoding&&(b=u.from(b,E),E=""),H=!0),F(this,b,E,!1,H)},y.prototype.unshift=function(b){return F(this,b,null,!0,!1)};function F(b,E,M,H,j){l("readableAddChunk",E);var z=b._readableState;if(E===null)z.reading=!1,se(b,z);else{var X;if(j||(X=V(z,E)),X)C(b,X);else if(z.objectMode||E&&E.length>0)if(typeof E!="string"&&!z.objectMode&&Object.getPrototypeOf(E)!==u.prototype&&(E=f(E)),H)z.endEmitted?C(b,new h):$(b,z,E,!0);else if(z.ended)C(b,new k);else{if(z.destroyed)return!1;z.reading=!1,z.decoder&&!M?(E=z.decoder.write(E),z.objectMode||E.length!==0?$(b,z,E,!1):re(b,z)):$(b,z,E,!1)}else H||(z.reading=!1,re(b,z))}return!z.ended&&(z.length<z.highWaterMark||z.length===0)}function $(b,E,M,H){E.flowing&&E.length===0&&!E.sync?(E.awaitDrain=0,b.emit("data",M)):(E.length+=E.objectMode?1:M.length,H?E.buffer.unshift(M):E.buffer.push(M),E.needReadable&&ee(b)),re(b,E)}function V(b,E){var M;return!d(E)&&typeof E!="string"&&E!==void 0&&!b.objectMode&&(M=new P("chunk",["string","Buffer","Uint8Array"],E)),M}y.prototype.isPaused=function(){return this._readableState.flowing===!1},y.prototype.setEncoding=function(b){w||(w=requireString_decoder().StringDecoder);var E=new w(b);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;for(var M=this._readableState.buffer.head,H="";M!==null;)H+=E.write(M.data),M=M.next;return this._readableState.buffer.clear(),H!==""&&this._readableState.buffer.push(H),this._readableState.length=H.length,this};var te=1073741824;function ae(b){return b>=te?b=te:(b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b++),b}function ie(b,E){return b<=0||E.length===0&&E.ended?0:E.objectMode?1:b!==b?E.flowing&&E.length?E.buffer.head.data.length:E.length:(b>E.highWaterMark&&(E.highWaterMark=ae(b)),b<=E.length?b:E.ended?E.length:(E.needReadable=!0,0))}y.prototype.read=function(b){l("read",b),b=parseInt(b,10);var E=this._readableState,M=b;if(b!==0&&(E.emittedReadable=!1),b===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return l("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?x(this):ee(this),null;if(b=ie(b,E),b===0&&E.ended)return E.length===0&&x(this),null;var H=E.needReadable;l("need readable",H),(E.length===0||E.length-b<E.highWaterMark)&&(H=!0,l("length less than watermark",H)),E.ended||E.reading?(H=!1,l("reading or ended",H)):H&&(l("do read"),E.reading=!0,E.sync=!0,E.length===0&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(b=ie(M,E)));var j;return b>0?j=R(b,E):j=null,j===null?(E.needReadable=E.length<=E.highWaterMark,b=0):(E.length-=b,E.awaitDrain=0),E.length===0&&(E.ended||(E.needReadable=!0),M!==b&&E.ended&&x(this)),j!==null&&this.emit("data",j),j};function se(b,E){if(l("onEofChunk"),!E.ended){if(E.decoder){var M=E.decoder.end();M&&M.length&&(E.buffer.push(M),E.length+=E.objectMode?1:M.length)}E.ended=!0,E.sync?ee(b):(E.needReadable=!1,E.emittedReadable||(E.emittedReadable=!0,ue(b)))}}function ee(b){var E=b._readableState;l("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(l("emitReadable",E.flowing),E.emittedReadable=!0,process.nextTick(ue,b))}function ue(b){var E=b._readableState;l("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&(E.length||E.ended)&&(b.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,O(b)}function re(b,E){E.readingMore||(E.readingMore=!0,process.nextTick(ne,b,E))}function ne(b,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){var M=E.length;if(l("maybeReadMore read 0"),b.read(0),M===E.length)break}E.readingMore=!1}y.prototype._read=function(b){C(this,new S("_read()"))},y.prototype.pipe=function(b,E){var M=this,H=this._readableState;switch(H.pipesCount){case 0:H.pipes=b;break;case 1:H.pipes=[H.pipes,b];break;default:H.pipes.push(b);break}H.pipesCount+=1,l("pipe count=%d opts=%j",H.pipesCount,E);var j=(!E||E.end!==!1)&&b!==process.stdout&&b!==process.stderr,z=j?fe:_e;H.endEmitted?process.nextTick(z):M.once("end",z),b.on("unpipe",X);function X(le,de){l("onunpipe"),le===M&&de&&de.hasUnpiped===!1&&(de.hasUnpiped=!0,ve())}function fe(){l("onend"),b.end()}var ge=ce(M);b.on("drain",ge);var we=!1;function ve(){l("cleanup"),b.removeListener("close",Se),b.removeListener("finish",be),b.removeListener("drain",ge),b.removeListener("error",me),b.removeListener("unpipe",X),M.removeListener("end",fe),M.removeListener("end",_e),M.removeListener("data",Re),we=!0,H.awaitDrain&&(!b._writableState||b._writableState.needDrain)&&ge()}M.on("data",Re);function Re(le){l("ondata");var de=b.write(le);l("dest.write",de),de===!1&&((H.pipesCount===1&&H.pipes===b||H.pipesCount>1&&Z(H.pipes,b)!==-1)&&!we&&(l("false write response, pause",H.awaitDrain),H.awaitDrain++),M.pause())}function me(le){l("onerror",le),_e(),b.removeListener("error",me),r(b,"error")===0&&C(b,le)}a(b,"error",me);function Se(){b.removeListener("finish",be),_e()}b.once("close",Se);function be(){l("onfinish"),b.removeListener("close",Se),_e()}b.once("finish",be);function _e(){l("unpipe"),M.unpipe(b)}return b.emit("pipe",M),H.flowing||(l("pipe resume"),M.resume()),b};function ce(b){return function(){var M=b._readableState;l("pipeOnDrain",M.awaitDrain),M.awaitDrain&&M.awaitDrain--,M.awaitDrain===0&&r(b,"data")&&(M.flowing=!0,O(b))}}y.prototype.unpipe=function(b){var E=this._readableState,M={hasUnpiped:!1};if(E.pipesCount===0)return this;if(E.pipesCount===1)return b&&b!==E.pipes?this:(b||(b=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,b&&b.emit("unpipe",this,M),this);if(!b){var H=E.pipes,j=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var z=0;z<j;z++)H[z].emit("unpipe",this,{hasUnpiped:!1});return this}var X=Z(E.pipes,b);return X===-1?this:(E.pipes.splice(X,1),E.pipesCount-=1,E.pipesCount===1&&(E.pipes=E.pipes[0]),b.emit("unpipe",this,M),this)},y.prototype.on=function(b,E){var M=n.prototype.on.call(this,b,E),H=this._readableState;return b==="data"?(H.readableListening=this.listenerCount("readable")>0,H.flowing!==!1&&this.resume()):b==="readable"&&!H.endEmitted&&!H.readableListening&&(H.readableListening=H.needReadable=!0,H.flowing=!1,H.emittedReadable=!1,l("on readable",H.length,H.reading),H.length?ee(this):H.reading||process.nextTick(oe,this)),M},y.prototype.addListener=y.prototype.on,y.prototype.removeListener=function(b,E){var M=n.prototype.removeListener.call(this,b,E);return b==="readable"&&process.nextTick(he,this),M},y.prototype.removeAllListeners=function(b){var E=n.prototype.removeAllListeners.apply(this,arguments);return(b==="readable"||b===void 0)&&process.nextTick(he,this),E};function he(b){var E=b._readableState;E.readableListening=b.listenerCount("readable")>0,E.resumeScheduled&&!E.paused?E.flowing=!0:b.listenerCount("data")>0&&b.resume()}function oe(b){l("readable nexttick read 0"),b.read(0)}y.prototype.resume=function(){var b=this._readableState;return b.flowing||(l("resume"),b.flowing=!b.readableListening,pe(this,b)),b.paused=!1,this};function pe(b,E){E.resumeScheduled||(E.resumeScheduled=!0,process.nextTick(ye,b,E))}function ye(b,E){l("resume",E.reading),E.reading||b.read(0),E.resumeScheduled=!1,b.emit("resume"),O(b),E.flowing&&!E.reading&&b.read(0)}y.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(b){var E=b._readableState;for(l("flow",E.flowing);E.flowing&&b.read()!==null;);}y.prototype.wrap=function(b){var E=this,M=this._readableState,H=!1;b.on("end",function(){if(l("wrapped end"),M.decoder&&!M.ended){var X=M.decoder.end();X&&X.length&&E.push(X)}E.push(null)}),b.on("data",function(X){if(l("wrapped data"),M.decoder&&(X=M.decoder.write(X)),!(M.objectMode&&X==null)&&!(!M.objectMode&&(!X||!X.length))){var fe=E.push(X);fe||(H=!0,b.pause())}});for(var j in b)this[j]===void 0&&typeof b[j]=="function"&&(this[j]=function(fe){return function(){return b[fe].apply(b,arguments)}}(j));for(var z=0;z<J.length;z++)b.on(J[z],this.emit.bind(this,J[z]));return this._read=function(X){l("wrapped _read",X),H&&(H=!1,b.resume())},this},typeof Symbol=="function"&&(y.prototype[Symbol.asyncIterator]=function(){return B===void 0&&(B=requireAsync_iterator()),B(this)}),Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(y.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(y.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(E){this._readableState&&(this._readableState.flowing=E)}}),y._fromList=R,Object.defineProperty(y.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function R(b,E){if(E.length===0)return null;var M;return E.objectMode?M=E.buffer.shift():!b||b>=E.length?(E.decoder?M=E.buffer.join(""):E.buffer.length===1?M=E.buffer.first():M=E.buffer.concat(E.length),E.buffer.clear()):M=E.buffer.consume(b,E.decoder),M}function x(b){var E=b._readableState;l("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,process.nextTick(Y,E,b))}function Y(b,E){if(l("endReadableNT",b.endEmitted,b.length),!b.endEmitted&&b.length===0&&(b.endEmitted=!0,E.readable=!1,E.emit("end"),b.autoDestroy)){var M=E._writableState;(!M||M.autoDestroy&&M.finished)&&E.destroy()}}typeof Symbol=="function"&&(y.from=function(b,E){return D===void 0&&(D=requireFromBrowser()),D(y,b,E)});function Z(b,E){for(var M=0,H=b.length;M<H;M++)if(b[M]===E)return M;return-1}return _stream_readable}var _stream_transform=Transform$2,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browserExports(Transform$2,Duplex);function afterTransform(e,r){var n=this._transformState;n.transforming=!1;var u=n.writecb;if(u===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);n.writechunk=null,n.writecb=null,r!=null&&this.push(r),u(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function Transform$2(e){if(!(this instanceof Transform$2))return new Transform$2(e);Duplex.call(this,e),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",prefinish)}function prefinish(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(r,n){done(e,r,n)}):done(this,null,null)}Transform$2.prototype.push=function(e,r){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,e,r)};Transform$2.prototype._transform=function(e,r,n){n(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$2.prototype._write=function(e,r,n){var u=this._transformState;if(u.writecb=n,u.writechunk=e,u.writeencoding=r,!u.transforming){var s=this._readableState;(u.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}};Transform$2.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};Transform$2.prototype._destroy=function(e,r){Duplex.prototype._destroy.call(this,e,function(n){r(n)})};function done(e,r,n){if(r)return e.emit("error",r);if(n!=null&&e.push(n),e._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(e._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return e.push(null)}var _stream_passthrough=PassThrough,Transform$1=_stream_transform;inherits_browserExports(PassThrough,Transform$1);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);Transform$1.call(this,e)}PassThrough.prototype._transform=function(e,r,n){n(null,e)};var eos;function once(e){var r=!1;return function(){r||(r=!0,e.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(e){if(e)throw e}function isRequest(e){return e.setHeader&&typeof e.abort=="function"}function destroyer(e,r,n,u){u=once(u);var s=!1;e.on("close",function(){s=!0}),eos===void 0&&(eos=endOfStream),eos(e,{readable:r,writable:n},function(d){if(d)return u(d);s=!0,u()});var f=!1;return function(d){if(!s&&!f){if(f=!0,isRequest(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();u(d||new ERR_STREAM_DESTROYED("pipe"))}}}function call(e){e()}function pipe(e,r){return e.pipe(r)}function popCallback(e){return!e.length||typeof e[e.length-1]!="function"?noop:e.pop()}function pipeline(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var u=popCallback(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new ERR_MISSING_ARGS("streams");var s,f=r.map(function(d,g){var l=g<r.length-1,m=g>0;return destroyer(d,l,m,function(A){s||(s=A),A&&f.forEach(call),!l&&(f.forEach(call),u(s))})});return r.reduce(pipe)}var pipeline_1=pipeline;(function(e,r){r=e.exports=require_stream_readable(),r.Stream=r,r.Readable=r,r.Writable=require_stream_writable(),r.Duplex=require_stream_duplex(),r.Transform=_stream_transform,r.PassThrough=_stream_passthrough,r.finished=endOfStream,r.pipeline=pipeline_1})(readableBrowser,readableBrowser.exports);var readableBrowserExports=readableBrowser.exports,Buffer$2=safeBufferExports.Buffer,Transform=readableBrowserExports.Transform,inherits$1=inherits_browserExports;function throwIfNotStringOrBuffer(e,r){if(!Buffer$2.isBuffer(e)&&typeof e!="string")throw new TypeError(r+" must be a string or a buffer")}function HashBase$1(e){Transform.call(this),this._block=Buffer$2.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits$1(HashBase$1,Transform);HashBase$1.prototype._transform=function(e,r,n){var u=null;try{this.update(e,r)}catch(s){u=s}n(u)};HashBase$1.prototype._flush=function(e){var r=null;try{this.push(this.digest())}catch(n){r=n}e(r)};HashBase$1.prototype.update=function(e,r){if(throwIfNotStringOrBuffer(e,"Data"),this._finalized)throw new Error("Digest already called");Buffer$2.isBuffer(e)||(e=Buffer$2.from(e,r));for(var n=this._block,u=0;this._blockOffset+e.length-u>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)n[s++]=e[u++];this._update(),this._blockOffset=0}for(;u<e.length;)n[this._blockOffset++]=e[u++];for(var f=0,d=e.length*8;d>0;++f)this._length[f]+=d,d=this._length[f]/4294967296|0,d>0&&(this._length[f]-=4294967296*d);return this};HashBase$1.prototype._update=function(){throw new Error("_update is not implemented")};HashBase$1.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var r=this._digest();e!==void 0&&(r=r.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return r};HashBase$1.prototype._digest=function(){throw new Error("_digest is not implemented")};var hashBase=HashBase$1,Buffer$1=require$$0.Buffer,inherits=inherits_browserExports,HashBase=hashBase,ARRAY16=new Array(16),zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}inherits(RIPEMD160,HashBase);RIPEMD160.prototype._update=function(){for(var e=ARRAY16,r=0;r<16;++r)e[r]=this._block.readInt32LE(r*4);for(var n=this._a|0,u=this._b|0,s=this._c|0,f=this._d|0,d=this._e|0,g=this._a|0,l=this._b|0,m=this._c|0,A=this._d|0,N=this._e|0,I=0;I<80;I+=1){var W,P;I<16?(W=fn1(n,u,s,f,d,e[zl[I]],hl[0],sl[I]),P=fn5(g,l,m,A,N,e[zr[I]],hr[0],sr[I])):I<32?(W=fn2(n,u,s,f,d,e[zl[I]],hl[1],sl[I]),P=fn4(g,l,m,A,N,e[zr[I]],hr[1],sr[I])):I<48?(W=fn3(n,u,s,f,d,e[zl[I]],hl[2],sl[I]),P=fn3(g,l,m,A,N,e[zr[I]],hr[2],sr[I])):I<64?(W=fn4(n,u,s,f,d,e[zl[I]],hl[3],sl[I]),P=fn2(g,l,m,A,N,e[zr[I]],hr[3],sr[I])):(W=fn5(n,u,s,f,d,e[zl[I]],hl[4],sl[I]),P=fn1(g,l,m,A,N,e[zr[I]],hr[4],sr[I])),n=d,d=f,f=rotl(s,10),s=u,u=W,g=N,N=A,A=rotl(m,10),m=l,l=P}var k=this._b+s+A|0;this._b=this._c+f+N|0,this._c=this._d+d+g|0,this._d=this._e+n+l|0,this._e=this._a+u+m|0,this._a=k};RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=Buffer$1.alloc?Buffer$1.alloc(20):new Buffer$1(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e};function rotl(e,r){return e<<r|e>>>32-r}function fn1(e,r,n,u,s,f,d,g){return rotl(e+(r^n^u)+f+d|0,g)+s|0}function fn2(e,r,n,u,s,f,d,g){return rotl(e+(r&n|~r&u)+f+d|0,g)+s|0}function fn3(e,r,n,u,s,f,d,g){return rotl(e+((r|~n)^u)+f+d|0,g)+s|0}function fn4(e,r,n,u,s,f,d,g){return rotl(e+(r&u|n&~u)+f+d|0,g)+s|0}function fn5(e,r,n,u,s,f,d,g){return rotl(e+(r^(n|~u))+f+d|0,g)+s|0}var ripemd160=RIPEMD160;const RIPEMD160$1=getDefaultExportFromCjs(ripemd160),CLA=85,CHUNK_SIZE=250,APP_KEY="CSM",INS={GET_VERSION:0,INS_PUBLIC_KEY_SECP256K1:1,SIGN_SECP256K1:2,GET_ADDR_SECP256K1:4},PAYLOAD_TYPE={INIT:0,ADD:1,LAST:2},P1_VALUES={ONLY_RETRIEVE:0,SHOW_ADDRESS_IN_DEVICE:1},ERROR_DESCRIPTION={1:"U2F: Unknown",2:"U2F: Bad request",3:"U2F: Configuration unsupported",4:"U2F: Device Ineligible",5:"U2F: Timeout",14:"Timeout",36864:"No errors",36865:"Device is busy",26626:"Error deriving keys",25600:"Execution Error",26368:"Wrong Length",27010:"Empty Buffer",27011:"Output buffer too small",27012:"Data is invalid",27013:"Conditions not satisfied",27014:"Transaction rejected",27264:"Bad key handle",27392:"Invalid P1/P2",27904:"Instruction not supported",28160:"App does not seem to be open",28416:"Unknown error",28417:"Sign/verify error"};function errorCodeToString(e){return e in ERROR_DESCRIPTION?ERROR_DESCRIPTION[e]:`Unknown Status Code: ${e}`}function processErrorResponse(e){if(e){if(typeof e=="object"&&e!==null&&!(e instanceof Array)&&!(e instanceof Date)){if(Object.prototype.hasOwnProperty.call(e,"statusCode"))return{return_code:e.statusCode,error_message:errorCodeToString(e.statusCode)};if(Object.prototype.hasOwnProperty.call(e,"return_code")&&Object.prototype.hasOwnProperty.call(e,"error_message"))return e}return{return_code:65535,error_message:e.toString()}}return{return_code:65535,error_message:e.toString()}}async function getVersion(e){return e.send(CLA,INS.GET_VERSION,0,0).then(r=>{const n=r.slice(-2),u=n[0]*256+n[1];let s=0;return r.length>=9&&(s=(r[5]<<24)+(r[6]<<16)+(r[7]<<8)+(r[8]<<0)),{return_code:u,error_message:errorCodeToString(u),test_mode:r[0]!==0,major:r[1],minor:r[2],patch:r[3],device_locked:r[4]===1,target_id:s.toString(16)}},processErrorResponse)}const signSendChunkv1=async(e,r,n,u)=>e.transport.send(CLA,INS.SIGN_SECP256K1,r,n,u,[L.NoError,27012,27264]).then(s=>{const f=s.slice(-2),d=f[0]*256+f[1];let g=errorCodeToString(d);(d===27264||d===27012)&&(g=`${g} : ${s.slice(0,s.length-2).toString("ascii")}`);let l=null;return s.length>2&&(l=s.slice(0,s.length-2)),{signature:l,return_code:d,error_message:g}},processErrorResponse),serializePathv2=e=>{if(!e||e.length!==5)throw new Error("Invalid path.");const r=Buffer.alloc(20);return r.writeUInt32LE(2147483648+e[0],0),r.writeUInt32LE(2147483648+e[1],4),r.writeUInt32LE(2147483648+e[2],8),r.writeUInt32LE(e[3],12),r.writeUInt32LE(e[4],16),r},signSendChunkv2=async(e,r,n,u)=>{let s=PAYLOAD_TYPE.ADD;return r===1&&(s=PAYLOAD_TYPE.INIT),r===n&&(s=PAYLOAD_TYPE.LAST),signSendChunkv1(e,s,0,u)},publicKeyv2=async(e,r)=>e.transport.send(CLA,INS.GET_ADDR_SECP256K1,0,0,r,[L.NoError]).then(n=>{const u=n.slice(-2),s=u[0]*256+u[1];return{pk:"OBSOLETE PROPERTY",compressed_pk:Buffer.from(n.slice(0,33)),return_code:s,error_message:errorCodeToString(s)}},processErrorResponse);class THORChainApp{constructor(r,n=APP_KEY){K(this,"transport");K(this,"versionResponse");if(!r)throw new Error("Transport has not been defined");this.transport=r,r.decorateAppAPIMethods(this,["getVersion","sign","getAddressAndPubKey","appInfo","deviceInfo","getBech32FromPK"],n)}static serializeHRP(r){if(r==null||r.length<3||r.length>83)throw new Error("Invalid HRP");const n=Buffer.alloc(1+r.length);return n.writeUInt8(r.length,0),n.write(r,1),n}static getBech32FromPK(r,n){if(n.length!==33)throw new Error("expected compressed public key [31 bytes]");const u=crypto.createHash("sha256").update(n).digest(),s=new RIPEMD160$1().update(u).digest(),f=base.bech32.encode||base.bech32.bech32.encode,d=base.bech32.toWords||base.bech32.bech32.toWords;return f(r,d(s))}async serializePath(r){if(this.versionResponse=await getVersion(this.transport),this.versionResponse.return_code!==L.NoError)throw this.versionResponse;switch(this.versionResponse.major){case 2:return serializePathv2(r);default:return{return_code:25600,error_message:"App Version is not supported"}}}async signGetChunks(r,n){const u=await this.serializePath(r),s=[];s.push(u);const f=Buffer.from(n);for(let d=0;d<f.length;d+=CHUNK_SIZE){let g=d+CHUNK_SIZE;d>f.length&&(g=f.length),s.push(f.slice(d,g))}return s}async getVersion(){try{return this.versionResponse=await getVersion(this.transport),this.versionResponse}catch(r){return processErrorResponse(r)}}async appInfo(){return this.transport.send(176,1,0,0).then(r=>{const n=r.slice(-2),u=n[0]*256+n[1];let s="err",f="err",d=0,g=0;if(r[0]===1){const l=r[1];s=r.slice(2,2+l).toString("ascii");let m=2+l;const A=r[m];m+=1,f=r.slice(m,m+A).toString("ascii"),m+=A;const N=r[m];m+=1,d=N,g=r[m]}return{return_code:u,error_message:errorCodeToString(u),appName:s,appVersion:f,flagLen:d,flagsValue:g,flag_recovery:(g&1)!==0,flag_signed_mcu_code:(g&2)!==0,flag_onboarded:(g&4)!==0,flag_pin_validated:(g&128)!==0}},processErrorResponse)}async deviceInfo(){return this.transport.send(224,1,0,0,Buffer.from([]),[L.NoError,28160]).then(r=>{const n=r.slice(-2),u=n[0]*256+n[1];if(u===28160)return{return_code:u,error_message:"This command is only available in the Dashboard"};const s=r.slice(0,4).toString("hex");let f=4;const d=r[f];f+=1;const g=r.slice(f,f+d).toString();f+=d;const l=r[f];f+=1;const m=r.slice(f,f+l).toString("hex");f+=l;const A=r[f];f+=1;let N=r.slice(f,f+A);N[A-1]===0&&(N=r.slice(f,f+A-1));const I=N.toString();return{return_code:u,error_message:errorCodeToString(u),targetId:s,seVersion:g,flag:m,mcuVersion:I}},processErrorResponse)}async publicKey(r){try{const n=await this.serializePath(r);switch(this.versionResponse.major){case 2:{const u=Buffer.concat([THORChainApp.serializeHRP("thor"),n]);return await publicKeyv2(this,u)}default:return{return_code:25600,error_message:"App Version is not supported"}}}catch(n){return processErrorResponse(n)}}async getAddressAndPubKey(r,n){try{return await this.serializePath(r).then(u=>{const s=Buffer.concat([THORChainApp.serializeHRP(n),u]);return this.transport.send(CLA,INS.GET_ADDR_SECP256K1,P1_VALUES.ONLY_RETRIEVE,0,s,[L.NoError]).then(f=>{const d=f.slice(-2),g=d[0]*256+d[1],l=Buffer.from(f.slice(0,33));return{bech32_address:Buffer.from(f.slice(33,-2)).toString(),compressed_pk:l,return_code:g,error_message:errorCodeToString(g)}},processErrorResponse)}).catch(u=>processErrorResponse(u))}catch(u){return processErrorResponse(u)}}async showAddressAndPubKey(r,n){try{return await this.serializePath(r).then(u=>{const s=Buffer.concat([THORChainApp.serializeHRP(n),u]);return this.transport.send(CLA,INS.GET_ADDR_SECP256K1,P1_VALUES.SHOW_ADDRESS_IN_DEVICE,0,s,[L.NoError]).then(f=>{const d=f.slice(-2),g=d[0]*256+d[1],l=Buffer.from(f.slice(0,33));return{bech32_address:Buffer.from(f.slice(33,-2)).toString(),compressed_pk:l,return_code:g,error_message:errorCodeToString(g)}},processErrorResponse)}).catch(u=>processErrorResponse(u))}catch(u){return processErrorResponse(u)}}async signSendChunk(r,n,u){switch(this.versionResponse.major){case 2:return signSendChunkv2(this,r,n,u);default:return{return_code:25600,error_message:"App Version is not supported"}}}async sign(r,n){return this.signGetChunks(r,n).then(u=>this.signSendChunk(1,u.length,u[0]).then(async s=>{let f={return_code:s.return_code,error_message:s.error_message,signature:null};for(let d=1;d<u.length&&(f=await this.signSendChunk(1+d,u.length,u[d]),f.return_code===L.NoError);d+=1);return{return_code:f.return_code,error_message:f.error_message,signature:f.signature}},processErrorResponse),processErrorResponse)}}const signUTXOTransaction=async({psbt:e,inputUtxos:r,btcApp:n,derivationPath:u},s)=>{const f=r.map(A=>{const N=bitcoinjsLib.Transaction.fromHex(A.txHex||"");return[n.splitTransaction(N.toHex(),N.hasWitnesses()),A.index,void 0,void 0]}),d=e.data.globalMap.unsignedTx.toBuffer().toString("hex"),g=n.splitTransaction(d,!0),l=n.serializeTransactionOutputs(g).toString("hex"),m={additionals:["bech32"],associatedKeysets:f.map(()=>u),inputs:f,outputScriptHex:l,segwit:!0,useTrustedInputForSegwit:!0};return n.createPaymentTransactionNew({...m,...s})};class CommonLedgerInterface{constructor(){K(this,"ledgerTimeout",5e4);K(this,"derivationPath",[]);K(this,"transport");K(this,"ledgerApp");K(this,"chain","thor");K(this,"checkOrCreateTransportAndLedger",async()=>{if(!(this.transport&&this.ledgerApp))try{switch(this.transport||(this.transport=await getLedgerTransport()),this.chain){case"bnb":return this.ledgerApp||(this.ledgerApp=new BinanceApp(this.transport));case"thor":return this.ledgerApp||(this.ledgerApp=new THORChainApp(this.transport));case"cosmos":{const{default:r}=await Promise.resolve().then(()=>require("./Cosmos-3e84d32a.cjs"));return this.ledgerApp||(this.ledgerApp=new r(this.transport))}}}catch(r){throw console.error(r),new Error("Cannot create transport or ledger client")}})}}class UTXOLedgerInterface{constructor(){K(this,"addressNetwork",bitcoinjsLib.networks.bitcoin);K(this,"btcApp",null);K(this,"chain","btc");K(this,"derivationPath","");K(this,"ledgerApp");K(this,"additionalSignParams");K(this,"transport",null);K(this,"walletFormat","bech32");K(this,"connect",async()=>{await this.checkBtcAppAndCreateTransportWebUSB(!1);const{default:r}=await Promise.resolve().then(()=>require("./Btc-e5231862.cjs"));this.btcApp=new r(this.transport)});K(this,"signTransaction",async(r,n)=>(await this.checkBtcAppAndCreateTransportWebUSB(),signUTXOTransaction({psbt:r,derivationPath:this.derivationPath,btcApp:this.btcApp,inputUtxos:n},this.additionalSignParams)));K(this,"getAddress",async()=>{await this.checkBtcAppAndCreateTransportWebUSB();const{bitcoinAddress:r}=await this.btcApp.getWalletPublicKey(this.derivationPath,{format:this.walletFormat});if(!r)throw new Error(`Cannot get ${this.chain} address from ledger derivation path: ${this.derivationPath}`);return this.chain==="bch"&&this.walletFormat==="legacy"?bchaddrjs.toCashAddress(r).replace(/(bchtest:|bitcoincash:)/,""):r});K(this,"checkBtcAppAndCreateTransportWebUSB",async(r=!0)=>{if(r&&!this.btcApp){const n=JSON.stringify({checkBtcApp:r,btcApp:this.btcApp});throw new Error(`Ledger connection failed: 
${n}`)}this.transport||(this.transport=await getLedgerTransport())});K(this,"getExtendedPublicKey",async(r="84'/0'/0'",n=76067358)=>(await this.checkBtcAppAndCreateTransportWebUSB(),this.btcApp.getWalletXpub({path:r,xpubVersion:n})))}}const encodeAddress=(e,r="tbnb",n="hex")=>base.bech32.encode(r,base.bech32.toWords(Buffer.isBuffer(e)?e:Buffer.from(e,n))),ab2hexstring=e=>{if(typeof e!="object")throw new Error("ab2hexstring expects an array");let r="";for(let n=0;n<e.length;n++){let u=e[n].toString(16);u=u.length===0?"00":u.length===1?"0"+u:u,r+=u}return r},sha256ripemd160=e=>{if(typeof e!="string")throw new Error("sha256ripemd160 expects a string");if(e.length%2!==0)throw new Error(`invalid hex string length: ${e}`);const r=cryptoJs.enc.Hex.parse(e),n=cryptoJs.SHA256(r);return cryptoJs.RIPEMD160(n).toString()},getAddressFromPublicKey=(e,r)=>{const f=new require$$1$2.ec("secp256k1").keyFromPublic(e,"hex").getPublic().encodeCompressed(),d=ab2hexstring(f),g=sha256ripemd160(d);return encodeAddress(g,r)};class BinanceLedger extends CommonLedgerInterface{constructor(n=q.BNB){super();K(this,"connect",async()=>{await this.checkOrCreateTransportAndLedger();const n=await this.ledgerApp.getPublicKey(this.derivationPath),u=getAddressFromPublicKey(n.pk,this.chain);return await this.ledgerApp.showAddress(),u});this.chain="bnb",this.derivationPath=n}}class BitcoinLedger extends UTXOLedgerInterface{constructor(r=q.BTC){super(),this.addressNetwork=bitcoinjsLib.networks.bitcoin,this.chain="btc",this.derivationPath=derivationPathToString(r),this.walletFormat=getWalletFormatFor(this.derivationPath)}}class BitcoinCashLedger extends UTXOLedgerInterface{constructor(r=q.BCH){super(),this.additionalSignParams={segwit:!1,additionals:["abc"],sigHashType:65},this.addressNetwork=coininfo.bitcoincash.main.toBitcoinJS(),this.chain="bch",this.derivationPath=derivationPathToString(r),this.walletFormat=getWalletFormatFor(this.derivationPath)}}class CosmosLedger extends CommonLedgerInterface{constructor(n=q.GAIA){super();K(this,"pubKey",null);K(this,"derivationPath");K(this,"connect",async()=>{await this.checkOrCreateTransportAndLedger();const{publicKey:n,address:u}=await this.getAddressAndPubKey();return this.pubKey=Buffer.from(n,"hex").toString("base64"),u});K(this,"getAddressAndPubKey",async()=>(await this.checkOrCreateTransportAndLedger(),await this.ledgerApp.getAddress(this.derivationPath,this.chain)));K(this,"signTransaction",async(n,u="0")=>{await this.checkOrCreateTransportAndLedger();const{return_code:s,error_message:f,signature:d}=await this.ledgerApp.sign(this.derivationPath,n);if(!this.pubKey)throw new Error("Public Key not found");return this.validateResponse(s,f),[{pub_key:{type:"tendermint/PubKeySecp256k1",value:this.pubKey},sequence:u,signature:d}]});K(this,"signAmino",async(n,u)=>{await this.checkOrCreateTransportAndLedger();const s=await this.getAccounts();if(s.findIndex(I=>I.address===n)===-1)throw new Error(`Address ${n} not found in wallet`);const{encodeSecp256k1Signature:d,serializeSignDoc:g}=await import("@cosmjs/amino"),{Secp256k1Signature:l}=await import("@cosmjs/crypto"),m=g(u),A=await this.ledgerApp.sign(this.derivationPath,m);this.validateResponse(A.return_code,A.error_message);const N=l.fromDer(A.signature).toFixedLength();return{signed:u,signature:d(s[0].pubkey,N)}});K(this,"getAccounts",async()=>{await this.checkOrCreateTransportAndLedger();const n=await this.getAddressAndPubKey();return[{address:n.address,algo:"secp256k1",pubkey:Buffer.from(n.publicKey,"hex")}]});K(this,"validateResponse",(n,u)=>{if(n!==L.NoError)throw new Error(`${n}: ${u}`)});this.chain="cosmos",this.derivationPath=derivationPathToString(n)}}class DogecoinLedger extends UTXOLedgerInterface{constructor(r=q.DOGE){super(),this.additionalSignParams={additionals:[],segwit:!1,useTrustedInputForSegwit:!1},this.addressNetwork=coininfo.dogecoin.main.toBitcoinJS(),this.chain="doge",this.walletFormat="legacy",this.derivationPath=derivationPathToString(r)}}class EthereumLedger extends EthereumLikeLedgerInterface{constructor({provider:n,derivationPath:u=q.ETH,chainId:s}){super(n);K(this,"connect",n=>new EthereumLedger({provider:n,derivationPath:this.derivationPath,chainId:this.chainId}));this.chainId=s||T.Ethereum,this.chain="eth",this.derivationPath=typeof u=="string"?u:derivationPathToString(u)}}class LitecoinLedger extends UTXOLedgerInterface{constructor(r=q.LTC){super(),this.addressNetwork=coininfo.litecoin.main.toBitcoinJS(),this.chain="ltc",this.derivationPath=derivationPathToString(r),this.walletFormat=getWalletFormatFor(this.derivationPath)}}const getSignature=e=>{if(e.length<64)throw new Error("Invalid Signature: Too short");if(e[0]!==48)throw new Error("Invalid Ledger Signature TLV encoding: expected first byte 0x30");if(e[1]+2!==e.length)throw new Error("Invalid Signature: signature length does not match TLV");if(e[2]!==2)throw new Error("Invalid Ledger Signature TLV encoding: expected length type 0x02");const r=e[3];let n=e.slice(4,r+4);if(n.length===33&&n[0]===0)n=n.slice(1,33);else if(n.length===33)throw new Error('Invalid signature: "r" too long');for(;n.length<32;)n.unshift(0);if(e[r+4]!==2)throw new Error("Invalid Ledger Signature TLV encoding: expected length type 0x02");const u=e[r+5];if(4+r+2+u!==e.length)throw new Error("Invalid Ledger Signature: TLV byte lengths do not match message length");let s=e.slice(r+6,e.length);if(s.length===33&&s[0]===0)s=s.slice(1,33);else if(s.length===33)throw new Error('Invalid signature: "s" too long');for(;s.length<32;)s.unshift(0);if(n.length!==32||s.length!==32)throw new Error("Invalid signatures: must be 32 bytes each");return base64Js.fromByteArray(Buffer.concat([n,s]))};class THORChainLedger extends CommonLedgerInterface{constructor(n=q.THOR){super();K(this,"pubKey",null);K(this,"derivationPath");K(this,"connect",async()=>{await this.checkOrCreateTransportAndLedger();const{compressed_pk:n,bech32_address:u}=await this.getAddressAndPubKey();return this.pubKey=base64Js.fromByteArray(n),u});K(this,"getAddressAndPubKey",async()=>{await this.checkOrCreateTransportAndLedger();const n=await this.ledgerApp.getAddressAndPubKey(this.derivationPath,this.chain);return this.validateResponse(n.return_code,n.error_message),n});K(this,"showAddressAndPubKey",async()=>{await this.checkOrCreateTransportAndLedger();const n=await this.ledgerApp.showAddressAndPubKey(this.derivationPath,this.chain);return this.validateResponse(n.return_code,n.error_message),n});K(this,"signTransaction",async(n,u="0")=>{await this.checkOrCreateTransportAndLedger();const{return_code:s,error_message:f,signature:d}=await this.ledgerApp.sign(this.derivationPath,n);if(!this.pubKey)throw new Error("Public Key not found");return this.validateResponse(s,f),[{pub_key:{type:"tendermint/PubKeySecp256k1",value:this.pubKey},sequence:u,signature:getSignature(d)}]});K(this,"validateResponse",(n,u)=>{if(n!==L.NoError)throw new Error(`${n} ${u}`)});this.chain="thor",this.derivationPath=n}get pubkey(){return this.pubKey}}const getLedgerClient=async({chain:e,derivationPath:r})=>{switch(e){case i.THORChain:return new THORChainLedger(r);case i.Binance:return new BinanceLedger(r);case i.Cosmos:return new CosmosLedger(r);case i.Bitcoin:return new BitcoinLedger(r);case i.BitcoinCash:return new BitcoinCashLedger(r);case i.Dogecoin:return new DogecoinLedger(r);case i.Litecoin:return new LitecoinLedger(r);case i.Ethereum:case i.Avalanche:{const{getProvider:n}=await import("@pioneer-platform/toolbox-evm"),u={provider:n(e),derivationPath:r};return e===i.Avalanche?new AvalancheLedger(u):new EthereumLedger(u)}}};i.Avalanche,i.Binance,i.Bitcoin,i.BitcoinCash,i.Cosmos,i.Dogecoin,i.Ethereum,i.Litecoin,i.THORChain;const THORCHAIN_DEPOSIT_GAS_FEE="500000000",THORCHAIN_SEND_GAS_FEE="500000000",reduceMemo=(e,r="t")=>{if(!(e!=null&&e.includes("=:")))return e;const n=e.includes(`:${r}:`)?e.split(`:${r}:`)[0]:e;return n.substring(0,n.lastIndexOf(":"))},recursivelyOrderKeys=e=>{if(Array.isArray(e))return e.forEach((n,u)=>{e[u]=recursivelyOrderKeys(n)}),e;if(typeof e!="object")return e;const r={};return Object.keys(e).sort().forEach(n=>r[n]=recursivelyOrderKeys(e[n])),r},stringifyKeysInOrder=e=>JSON.stringify(recursivelyOrderKeys(e)),getToolbox=async({api:e,rpcUrl:r,address:n,chain:u,covalentApiKey:s,ethplorerApiKey:f,utxoApiKey:d,signer:g,derivationPath:l,stagenet:m=!1})=>{const A={apiKey:d,rpcUrl:r,apiClient:e};switch(u){case i.Bitcoin:{if(!d)throw new Error("UTXO API key is not defined");const{BTCToolbox:N}=await import("@pioneer-platform/toolbox-utxo"),I=N(A);return{...I,transfer:async P=>{const k=P.feeRate||(await I.getFeeRates())[G.Average],{psbt:S,inputs:h}=await I.buildTx({...P,sender:n,feeRate:k,fetchTxHex:!0}),w=await g.signTransaction(S,h);return I.broadcastTx(w)}}}case i.BitcoinCash:{if(!d)throw new Error("UTXO API key is not defined");const{BCHToolbox:N}=await import("@pioneer-platform/toolbox-utxo"),I=N(A);return{...I,transfer:async P=>{const k=(await I.getFeeRates())[G.Average],{psbt:S,inputs:h}=await I.buildTx({...P,feeRate:k,memo:reduceMemo(P.memo),sender:n,fetchTxHex:!0}),w=await g.signTransaction(S,h);return I.broadcastTx(w)}}}case i.Dogecoin:{if(!d)throw new Error("UTXO API key is not defined");const{DOGEToolbox:N}=await import("@pioneer-platform/toolbox-utxo"),I=N(A);return{...I,transfer:async P=>{const k=(await I.getFeeRates())[G.Average],{psbt:S,inputs:h}=await I.buildTx({...P,feeRate:k,memo:reduceMemo(P.memo),sender:n,fetchTxHex:!0}),w=await g.signTransaction(S,h);return I.broadcastTx(w)}}}case i.Litecoin:{if(!d)throw new Error("UTXO API key is not defined");const{LTCToolbox:N}=await import("@pioneer-platform/toolbox-utxo"),I=N(A);return{...I,transfer:async P=>{const k=await(await I.getFeeRates())[G.Average],{psbt:S,inputs:h}=await I.buildTx({...P,feeRate:k,memo:reduceMemo(P.memo),sender:n,fetchTxHex:!0}),w=await g.signTransaction(S,h);return I.broadcastTx(w)}}}case i.Binance:{const{BinanceToolbox:N}=await import("@pioneer-platform/toolbox-cosmos"),I=N({stagenet:!1});return{...I,transfer:async P=>{var a;const{transaction:k,signMsg:S}=await I.createTransactionAndSignMsg({...P,to:P.recipient,amount:P.amount.amount().toString(),asset:P.asset.symbol}),h=k.getSignBytes(S),w=await g.ledgerApp.getPublicKey(l),B=await g.ledgerApp.sign(h,l),D=I.getPublicKey(w.pk.toString("hex")),C=k.addSignature(D,B.signature);return(a=(await I.sendRawTransaction(C.serialize(),!0))[0])==null?void 0:a.hash}}}case i.Cosmos:{const{getDenom:N,GaiaToolbox:I}=await import("@pioneer-platform/toolbox-cosmos");return{...I(),transfer:async({asset:k,amount:S,recipient:h,memo:w})=>{const B=n;if(!k)throw new Error("invalid asset");const D="0.007uatom",J={typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:{amount:[{amount:S.amount().toString(),denom:N(k)}],fromAddress:B,toAddress:h}},{GasPrice:a,SigningStargateClient:c}=await import("@cosmjs/stargate");return(await(await c.connectWithSigner(_.Cosmos,g,{gasPrice:a.fromString(D)})).signAndBroadcast(n,[J],"auto",w)).transactionHash}}}case i.Ethereum:{if(!f)throw new Error("Ethplorer API key is not defined");const{ETHToolbox:N,getProvider:I}=await import("@pioneer-platform/toolbox-evm");return N({api:e,signer:g,provider:I(i.Ethereum,r),ethplorerApiKey:f})}case i.Avalanche:{if(!s)throw new Error("Covalent API key is not defined");const{AVAXToolbox:N,getProvider:I}=await import("@pioneer-platform/toolbox-evm");return N({api:e,signer:g,provider:I(i.Avalanche,r),covalentApiKey:s})}case i.THORChain:{const{ThorchainToolbox:N}=await import("@pioneer-platform/toolbox-cosmos"),I=N({stagenet:!1});return{...I,deposit:async({asset:k,amount:S,memo:h})=>{var ne;const w=await I.getAccount(n);if(!k)throw new Error("invalid asset to deposit");if(!w)throw new Error("invalid account");if(!g.pubkey)throw new Error("Account pubkey not found");const B=recursivelyOrderKeys([I.createDepositMessage(k,S,n,h)]),D={amount:[],gas:THORCHAIN_DEPOSIT_GAS_FEE},C=((ne=w.sequence)==null?void 0:ne.toString())||"0",J=stringifyKeysInOrder({account_number:w.accountNumber.toString(),chain_id:T.THORChain,fee:D,memo:h,msgs:B,sequence:C}),a=await g.signTransaction(J,C);if(!a)throw new Error("tx signing failed");const c=await I.createDefaultAminoTypes(),y=await I.createDefaultRegistry(),F={typeUrl:"/cosmos.tx.v1beta1.TxBody",value:{messages:[c.fromAmino(I.createDepositMessage(k,S,n,h,!0))],memo:h}},$=signing.SignMode.SIGN_MODE_LEGACY_AMINO_JSON,V=y.encode(F),te=math.Int53.fromString(D.gas).toNumber(),ae=protoSigning.encodePubkey({type:"tendermint/PubKeySecp256k1",value:g.pubkey}),ie=protoSigning.makeAuthInfoBytes([{pubkey:ae,sequence:Number(C)}],D.amount,te,void 0,void 0,$),se=tx.TxRaw.fromPartial({bodyBytes:V,authInfoBytes:ie,signatures:[encoding.fromBase64(a[0].signature)]}),ee=tx.TxRaw.encode(se).finish();return(await(await stargate.StargateClient.connect(m?_.THORChainStagenet:_.THORChain)).broadcastTx(ee)).transactionHash},transfer:async({memo:k="",amount:S,asset:h,recipient:w})=>{const B=await I.getAccount(n);if(!B)throw new Error("invalid account");if(!h)throw new Error("invalid asset");if(!g.pubkey)throw new Error("Account pubkey not found");const{accountNumber:D,sequence:C="0"}=B,a={type:"thorchain/MsgSend",value:{amount:[{amount:S.amount().toString(),denom:h==null?void 0:h.symbol.toLowerCase()}],from_address:n,to_address:w}},c={amount:[],gas:THORCHAIN_SEND_GAS_FEE},y=stringifyKeysInOrder({account_number:D==null?void 0:D.toString(),chain_id:T.THORChain,fee:c,memo:k,msgs:[a],sequence:C==null?void 0:C.toString()}),F=await g.signTransaction(y,C==null?void 0:C.toString());if(!F)throw new Error("tx signing failed");const $={msg:[a],fee:c,memo:k,signatures:F},V=await I.createDefaultAminoTypes(),te=await I.createDefaultRegistry(),ae={typeUrl:"/cosmos.tx.v1beta1.TxBody",value:{messages:$.msg.map(pe=>V.fromAmino(pe)),memo:k}},ie=signing.SignMode.SIGN_MODE_LEGACY_AMINO_JSON,se=te.encode(ae),ee=math.Int53.fromString(c.gas).toNumber(),ue=protoSigning.encodePubkey({type:"tendermint/PubKeySecp256k1",value:g.pubkey}),re=protoSigning.makeAuthInfoBytes([{pubkey:ue,sequence:Number(C)}],c.amount,ee,void 0,void 0,ie),ne=tx.TxRaw.fromPartial({bodyBytes:se,authInfoBytes:re,signatures:[encoding.fromBase64(F[0].signature)]}),ce=tx.TxRaw.encode(ne).finish();return(await(await stargate.StargateClient.connect(m?_.THORChainStagenet:_.THORChain)).broadcastTx(ce)).transactionHash}}}default:throw new Error("Unsupported chain")}},connectLedger=({addChain:e,config:{covalentApiKey:r,ethplorerApiKey:n,utxoApiKey:u,stagenet:s},apis:f,rpcUrls:d})=>async(g,l)=>{const m=await getLedgerClient({chain:g,derivationPath:l});if(!m)return;const A=await getLedgerAddress({chain:g,ledgerClient:m}),N=await getToolbox({address:A,api:f[g],chain:g,covalentApiKey:r,derivationPath:l,ethplorerApiKey:n,rpcUrl:d[g],signer:m,utxoApiKey:u,stagenet:s});return e({chain:g,walletMethods:{...N,getAddress:()=>A},wallet:{address:A,balance:[],walletType:U.LEDGER}}),!0},ledgerWallet={connectMethodName:"connectLedger",connect:connectLedger};exports.RIPEMD160=RIPEMD160$1;exports.commonjsGlobal=commonjsGlobal;exports.getDefaultExportFromCjs=getDefaultExportFromCjs;exports.getDerivationPathFor=getDerivationPathFor;exports.hashBase=hashBase;exports.inherits_browserExports=inherits_browserExports;exports.ledgerWallet=ledgerWallet;exports.readableBrowserExports=readableBrowserExports;exports.ripemd160=ripemd160;exports.safeBufferExports=safeBufferExports;
