(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Slate=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var copy=require("es5-ext/object/copy"),normalizeOptions=require("es5-ext/object/normalize-options"),ensureCallable=require("es5-ext/object/valid-callable"),map=require("es5-ext/object/map"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty,define;define=function(name,desc,options){var value=validValue(desc)&&callable(desc.value),dgs;dgs=copy(desc);delete dgs.writable;delete dgs.value;dgs.get=function(){if(!options.overwriteDefinition&&hasOwnProperty.call(this,name))return value;desc.value=bind.call(value,options.resolveContext?options.resolveContext(this):this);defineProperty(this,name,desc);return this[name]};return dgs};module.exports=function(props){var options=normalizeOptions(arguments[1]);if(options.resolveContext!=null)ensureCallable(options.resolveContext);return map(props,function(desc,name){return define(name,desc,options)})}},{"es5-ext/object/copy":16,"es5-ext/object/map":24,"es5-ext/object/normalize-options":25,"es5-ext/object/valid-callable":30,"es5-ext/object/valid-value":31}],2:[function(require,module,exports){"use strict";var assign=require("es5-ext/object/assign"),normalizeOpts=require("es5-ext/object/normalize-options"),isCallable=require("es5-ext/object/is-callable"),contains=require("es5-ext/string/#/contains"),d;d=module.exports=function(dscr,value){var c,e,w,options,desc;if(arguments.length<2||typeof dscr!=="string"){options=value;value=dscr;dscr=null}else{options=arguments[2]}if(dscr==null){c=w=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e");w=contains.call(dscr,"w")}desc={value:value,configurable:c,enumerable:e,writable:w};return!options?desc:assign(normalizeOpts(options),desc)};d.gs=function(dscr,get,set){var c,e,options,desc;if(typeof dscr!=="string"){options=set;set=get;get=dscr;dscr=null}else{options=arguments[3]}if(get==null){get=undefined}else if(!isCallable(get)){options=get;get=set=undefined}else if(set==null){set=undefined}else if(!isCallable(set)){options=set;set=undefined}if(dscr==null){c=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e")}desc={get:get,set:set,configurable:c,enumerable:e};return!options?desc:assign(normalizeOpts(options),desc)}},{"es5-ext/object/assign":13,"es5-ext/object/is-callable":19,"es5-ext/object/normalize-options":25,"es5-ext/string/#/contains":32}],3:[function(require,module,exports){"use strict";var GROUP_LEFT_TO_RIGHT,GROUP_RIGHT_TO_LEFT,EXPRESSION_LEFT_TO_RIGHT,EXPRESSION_RIGHT_TO_LEFT;GROUP_LEFT_TO_RIGHT="A-Za-zÀ-ÖØ-ö"+"ø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜"+"︀-﹯﻽-￿";GROUP_RIGHT_TO_LEFT="֑-߿יִ-﷽ﹰ-ﻼ";EXPRESSION_LEFT_TO_RIGHT=new RegExp("^[^"+GROUP_RIGHT_TO_LEFT+"]*["+GROUP_LEFT_TO_RIGHT+"]");EXPRESSION_RIGHT_TO_LEFT=new RegExp("^[^"+GROUP_LEFT_TO_RIGHT+"]*["+GROUP_RIGHT_TO_LEFT+"]");function direction(value){value=value.toString();if(EXPRESSION_RIGHT_TO_LEFT.test(value)){return"rtl"}if(EXPRESSION_LEFT_TO_RIGHT.test(value)){return"ltr"}return"neutral"}module.exports=direction},{}],4:[function(require,module,exports){"use strict";var value=require("../../object/valid-value");module.exports=function(){value(this).length=0;return this}},{"../../object/valid-value":31}],5:[function(require,module,exports){"use strict";var toPosInt=require("../../number/to-pos-integer"),value=require("../../object/valid-value"),indexOf=Array.prototype.indexOf,hasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(searchElement){var i,l,fromIndex,val;if(searchElement===searchElement){return indexOf.apply(this,arguments)}l=toPosInt(value(this).length);fromIndex=arguments[1];if(isNaN(fromIndex))fromIndex=0;else if(fromIndex>=0)fromIndex=floor(fromIndex);else fromIndex=toPosInt(this.length)-floor(abs(fromIndex));for(i=fromIndex;i<l;++i){if(hasOwnProperty.call(this,i)){val=this[i];if(val!==val)return i}}return-1}},{"../../number/to-pos-integer":11,"../../object/valid-value":31}],6:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call(function(){return arguments}());module.exports=function(x){return toString.call(x)===id}},{}],7:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Math.sign:require("./shim")},{"./is-implemented":8,"./shim":9}],8:[function(require,module,exports){"use strict";module.exports=function(){var sign=Math.sign;if(typeof sign!=="function")return false;return sign(10)===1&&sign(-20)===-1}},{}],9:[function(require,module,exports){"use strict";module.exports=function(value){value=Number(value);if(isNaN(value)||value===0)return value;return value>0?1:-1}},{}],10:[function(require,module,exports){"use strict";var sign=require("../math/sign"),abs=Math.abs,floor=Math.floor;module.exports=function(value){if(isNaN(value))return 0;value=Number(value);if(value===0||!isFinite(value))return value;return sign(value)*floor(abs(value))}},{"../math/sign":7}],11:[function(require,module,exports){"use strict";var toInteger=require("./to-integer"),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}},{"./to-integer":10}],12:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),value=require("./valid-value"),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,propertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];obj=Object(value(obj));callable(cb);list=keys(obj);if(compareFn){list.sort(typeof compareFn==="function"?bind.call(compareFn,obj):undefined)}if(typeof method!=="function")method=list[method];return call.call(method,list,function(key,index){if(!propertyIsEnumerable.call(obj,key))return defVal;return call.call(cb,thisArg,obj[key],key,obj,index)})}}},{"./valid-callable":30,"./valid-value":31}],13:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim")},{"./is-implemented":14,"./shim":15}],14:[function(require,module,exports){"use strict";module.exports=function(){var assign=Object.assign,obj;if(typeof assign!=="function")return false;obj={foo:"raz"};assign(obj,{bar:"dwa"},{trzy:"trzy"});return obj.foo+obj.bar+obj.trzy==="razdwatrzy"}},{}],15:[function(require,module,exports){"use strict";var keys=require("../keys"),value=require("../valid-value"),max=Math.max;module.exports=function(dest,src){var error,i,l=max(arguments.length,2),assign;dest=Object(value(dest));assign=function(key){try{dest[key]=src[key]}catch(e){if(!error)error=e}};for(i=1;i<l;++i){src=arguments[i];keys(src).forEach(assign)}if(error!==undefined)throw error;return dest}},{"../keys":21,"../valid-value":31}],16:[function(require,module,exports){"use strict";var assign=require("./assign"),value=require("./valid-value");module.exports=function(obj){var copy=Object(value(obj));if(copy!==obj)return copy;return assign({},obj)}},{"./assign":13,"./valid-value":31}],17:[function(require,module,exports){"use strict";var create=Object.create,shim;if(!require("./set-prototype-of/is-implemented")()){shim=require("./set-prototype-of/shim")}module.exports=function(){var nullObject,props,desc;if(!shim)return create;if(shim.level!==1)return create;nullObject={};props={};desc={configurable:false,enumerable:false,writable:true,value:undefined};Object.getOwnPropertyNames(Object.prototype).forEach(function(name){if(name==="__proto__"){props[name]={configurable:true,enumerable:false,writable:true,value:undefined};return}props[name]=desc});Object.defineProperties(nullObject,props);Object.defineProperty(shim,"nullPolyfill",{configurable:false,enumerable:false,writable:false,value:nullObject});return function(prototype,props){return create(prototype===null?nullObject:prototype,props)}}()},{"./set-prototype-of/is-implemented":28,"./set-prototype-of/shim":29}],18:[function(require,module,exports){"use strict";module.exports=require("./_iterate")("forEach")},{"./_iterate":12}],19:[function(require,module,exports){"use strict";module.exports=function(obj){return typeof obj==="function"}},{}],20:[function(require,module,exports){"use strict";var map={function:true,object:true};module.exports=function(x){return x!=null&&map[typeof x]||false}},{}],21:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim")},{"./is-implemented":22,"./shim":23}],22:[function(require,module,exports){"use strict";module.exports=function(){try{Object.keys("primitive");return true}catch(e){return false}}},{}],23:[function(require,module,exports){"use strict";var keys=Object.keys;module.exports=function(object){return keys(object==null?object:Object(object))}},{}],24:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),forEach=require("./for-each"),call=Function.prototype.call;module.exports=function(obj,cb){var o={},thisArg=arguments[2];callable(cb);forEach(obj,function(value,key,obj,index){o[key]=call.call(cb,thisArg,value,key,obj,index)});return o}},{"./for-each":18,"./valid-callable":30}],25:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;var process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(options){var result=create(null);forEach.call(arguments,function(options){if(options==null)return;process(Object(options),result)});return result}},{}],26:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(arg){var set=create(null);forEach.call(arguments,function(name){set[name]=true});return set}},{}],27:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.setPrototypeOf:require("./shim")},{"./is-implemented":28,"./shim":29}],28:[function(require,module,exports){"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,x={};module.exports=function(){var setPrototypeOf=Object.setPrototypeOf,customCreate=arguments[0]||create;if(typeof setPrototypeOf!=="function")return false;return getPrototypeOf(setPrototypeOf(customCreate(null),x))===x}},{}],29:[function(require,module,exports){"use strict";var isObject=require("../is-object"),value=require("../valid-value"),isPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:true,enumerable:false,writable:true,value:undefined},validate;validate=function(obj,prototype){value(obj);if(prototype===null||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")};module.exports=function(status){var fn,set;if(!status)return null;if(status.level===2){if(status.set){set=status.set;fn=function(obj,prototype){set.call(validate(obj,prototype),prototype);return obj}}else{fn=function(obj,prototype){validate(obj,prototype).__proto__=prototype;return obj}}}else{fn=function self(obj,prototype){var isNullBase;validate(obj,prototype);isNullBase=isPrototypeOf.call(self.nullPolyfill,obj);if(isNullBase)delete self.nullPolyfill.__proto__;if(prototype===null)prototype=self.nullPolyfill;obj.__proto__=prototype;if(isNullBase)defineProperty(self.nullPolyfill,"__proto__",nullDesc);return obj}}return Object.defineProperty(fn,"level",{configurable:false,enumerable:false,writable:false,value:status.level})}(function(){var x=Object.create(null),y={},set,desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{set=desc.set;set.call(x,y)}catch(ignore){}if(Object.getPrototypeOf(x)===y)return{set:set,level:2}}x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:2};x={};x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:1};return false}());require("../create")},{"../create":17,"../is-object":20,"../valid-value":31}],30:[function(require,module,exports){"use strict";module.exports=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn}},{}],31:[function(require,module,exports){"use strict";module.exports=function(value){if(value==null)throw new TypeError("Cannot use null or undefined");return value}},{}],32:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim")},{"./is-implemented":33,"./shim":34}],33:[function(require,module,exports){"use strict";var str="razdwatrzy";module.exports=function(){if(typeof str.contains!=="function")return false;return str.contains("dwa")===true&&str.contains("foo")===false}},{}],34:[function(require,module,exports){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},{}],35:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call("");module.exports=function(x){return typeof x==="string"||x&&typeof x==="object"&&(x instanceof String||toString.call(x)===id)||false}},{}],36:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),contains=require("es5-ext/string/#/contains"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,ArrayIterator;ArrayIterator=module.exports=function(arr,kind){if(!(this instanceof ArrayIterator))return new ArrayIterator(arr,kind);Iterator.call(this,arr);if(!kind)kind="value";else if(contains.call(kind,"key+value"))kind="key+value";else if(contains.call(kind,"key"))kind="key";else kind="value";defineProperty(this,"__kind__",d("",kind))};if(setPrototypeOf)setPrototypeOf(ArrayIterator,Iterator);ArrayIterator.prototype=Object.create(Iterator.prototype,{constructor:d(ArrayIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__list__[i];if(this.__kind__==="key+value")return[i,this.__list__[i]];return i}),toString:d(function(){return"[object Array Iterator]"})})},{"./":39,d:2,"es5-ext/object/set-prototype-of":27,"es5-ext/string/#/contains":32}],37:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),callable=require("es5-ext/object/valid-callable"),isString=require("es5-ext/string/is-string"),get=require("./get"),isArray=Array.isArray,call=Function.prototype.call,some=Array.prototype.some;module.exports=function(iterable,cb){var mode,thisArg=arguments[2],result,doBreak,broken,i,l,char,code;if(isArray(iterable)||isArguments(iterable))mode="array";else if(isString(iterable))mode="string";else iterable=get(iterable);callable(cb);doBreak=function(){broken=true};if(mode==="array"){some.call(iterable,function(value){call.call(cb,thisArg,value,doBreak);if(broken)return true});return}if(mode==="string"){l=iterable.length;for(i=0;i<l;++i){char=iterable[i];if(i+1<l){code=char.charCodeAt(0);if(code>=55296&&code<=56319)char+=iterable[++i]}call.call(cb,thisArg,char,doBreak);if(broken)break}return}result=iterable.next();while(!result.done){call.call(cb,thisArg,result.value,doBreak);if(broken)return;result=iterable.next()}}},{"./get":38,"es5-ext/function/is-arguments":6,"es5-ext/object/valid-callable":30,"es5-ext/string/is-string":35}],38:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),ArrayIterator=require("./array"),StringIterator=require("./string"),iterable=require("./valid-iterable"),iteratorSymbol=require("es6-symbol").iterator;module.exports=function(obj){if(typeof iterable(obj)[iteratorSymbol]==="function")return obj[iteratorSymbol]();if(isArguments(obj))return new ArrayIterator(obj);if(isString(obj))return new StringIterator(obj);return new ArrayIterator(obj)}},{"./array":36,"./string":41,"./valid-iterable":42,"es5-ext/function/is-arguments":6,"es5-ext/string/is-string":35,"es6-symbol":49}],39:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),assign=require("es5-ext/object/assign"),callable=require("es5-ext/object/valid-callable"),value=require("es5-ext/object/valid-value"),d=require("d"),autoBind=require("d/auto-bind"),Symbol=require("es6-symbol"),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,Iterator;module.exports=Iterator=function(list,context){if(!(this instanceof Iterator))return new Iterator(list,context);defineProperties(this,{__list__:d("w",value(list)),__context__:d("w",context),__nextIndex__:d("w",0)});if(!context)return;callable(context.on);context.on("_add",this._onAdd);context.on("_delete",this._onDelete);context.on("_clear",this._onClear)};defineProperties(Iterator.prototype,assign({constructor:d(Iterator),_next:d(function(){var i;if(!this.__list__)return;if(this.__redo__){i=this.__redo__.shift();if(i!==undefined)return i}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(i){if(i===undefined)return{done:true,value:undefined};return{done:false,value:this._resolve(i)}}),_resolve:d(function(i){return this.__list__[i]}),_unBind:d(function(){this.__list__=null;delete this.__redo__;if(!this.__context__)return;this.__context__.off("_add",this._onAdd);this.__context__.off("_delete",this._onDelete);this.__context__.off("_clear",this._onClear);this.__context__=null}),toString:d(function(){return"[object Iterator]"})},autoBind({_onAdd:d(function(index){if(index>=this.__nextIndex__)return;++this.__nextIndex__;if(!this.__redo__){defineProperty(this,"__redo__",d("c",[index]));return}this.__redo__.forEach(function(redo,i){if(redo>=index)this.__redo__[i]=++redo},this);this.__redo__.push(index)}),_onDelete:d(function(index){var i;if(index>=this.__nextIndex__)return;--this.__nextIndex__;if(!this.__redo__)return;i=this.__redo__.indexOf(index);if(i!==-1)this.__redo__.splice(i,1);this.__redo__.forEach(function(redo,i){if(redo>index)this.__redo__[i]=--redo},this)}),_onClear:d(function(){if(this.__redo__)clear.call(this.__redo__);this.__nextIndex__=0})})));defineProperty(Iterator.prototype,Symbol.iterator,d(function(){return this}));defineProperty(Iterator.prototype,Symbol.toStringTag,d("","Iterator"))},{d:2,"d/auto-bind":1,"es5-ext/array/#/clear":4,"es5-ext/object/assign":13,"es5-ext/object/valid-callable":30,"es5-ext/object/valid-value":31,"es6-symbol":49}],40:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),iteratorSymbol=require("es6-symbol").iterator,isArray=Array.isArray;module.exports=function(value){if(value==null)return false;if(isArray(value))return true;if(isString(value))return true;if(isArguments(value))return true;return typeof value[iteratorSymbol]==="function"}},{"es5-ext/function/is-arguments":6,"es5-ext/string/is-string":35,"es6-symbol":49}],41:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,StringIterator;StringIterator=module.exports=function(str){if(!(this instanceof StringIterator))return new StringIterator(str);str=String(str);Iterator.call(this,str);defineProperty(this,"__length__",d("",str.length))};if(setPrototypeOf)setPrototypeOf(StringIterator,Iterator);StringIterator.prototype=Object.create(Iterator.prototype,{constructor:d(StringIterator),_next:d(function(){if(!this.__list__)return;if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}),_resolve:d(function(i){var char=this.__list__[i],code;if(this.__nextIndex__===this.__length__)return char;code=char.charCodeAt(0);if(code>=55296&&code<=56319)return char+this.__list__[this.__nextIndex__++];return char}),toString:d(function(){return"[object String Iterator]"})})},{"./":39,d:2,"es5-ext/object/set-prototype-of":27}],42:[function(require,module,exports){"use strict";var isIterable=require("./is-iterable");module.exports=function(value){if(!isIterable(value))throw new TypeError(value+" is not iterable");return value}},{"./is-iterable":40}],43:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Map:require("./polyfill")},{"./is-implemented":44,"./polyfill":48}],44:[function(require,module,exports){"use strict";module.exports=function(){var map,iterator,result;if(typeof Map!=="function")return false;try{map=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return false}if(String(map)!=="[object Map]")return false;if(map.size!==3)return false;if(typeof map.clear!=="function")return false;if(typeof map.delete!=="function")return false;if(typeof map.entries!=="function")return false;if(typeof map.forEach!=="function")return false;if(typeof map.get!=="function")return false;if(typeof map.has!=="function")return false;if(typeof map.keys!=="function")return false;if(typeof map.set!=="function")return false;if(typeof map.values!=="function")return false;iterator=map.entries();result=iterator.next();if(result.done!==false)return false;if(!result.value)return false;if(result.value[0]!=="raz")return false;if(result.value[1]!=="one")return false;return true}},{}],45:[function(require,module,exports){"use strict";module.exports=function(){if(typeof Map==="undefined")return false;return Object.prototype.toString.call(new Map)==="[object Map]"}()},{}],46:[function(require,module,exports){"use strict";module.exports=require("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":26}],47:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("es6-iterator"),toStringTagSymbol=require("es6-symbol").toStringTag,kinds=require("./iterator-kinds"),defineProperties=Object.defineProperties,unBind=Iterator.prototype._unBind,MapIterator;MapIterator=module.exports=function(map,kind){if(!(this instanceof MapIterator))return new MapIterator(map,kind);Iterator.call(this,map.__mapKeysData__,map);if(!kind||!kinds[kind])kind="key+value";defineProperties(this,{__kind__:d("",kind),__values__:d("w",map.__mapValuesData__)})};if(setPrototypeOf)setPrototypeOf(MapIterator,Iterator);MapIterator.prototype=Object.create(Iterator.prototype,{constructor:d(MapIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__values__[i];if(this.__kind__==="key")return this.__list__[i];return[this.__list__[i],this.__values__[i]]}),_unBind:d(function(){this.__values__=null;unBind.call(this)}),toString:d(function(){return"[object Map Iterator]"})});Object.defineProperty(MapIterator.prototype,toStringTagSymbol,d("c","Map Iterator"))},{"./iterator-kinds":46,d:2,"es5-ext/object/set-prototype-of":27,"es6-iterator":39,"es6-symbol":49}],48:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),eIndexOf=require("es5-ext/array/#/e-index-of"),setPrototypeOf=require("es5-ext/object/set-prototype-of"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),d=require("d"),ee=require("event-emitter"),Symbol=require("es6-symbol"),iterator=require("es6-iterator/valid-iterable"),forOf=require("es6-iterator/for-of"),Iterator=require("./lib/iterator"),isNative=require("./is-native-implemented"),call=Function.prototype.call,defineProperties=Object.defineProperties,getPrototypeOf=Object.getPrototypeOf,MapPoly;module.exports=MapPoly=function(){var iterable=arguments[0],keys,values,self;if(!(this instanceof MapPoly))throw new TypeError("Constructor requires 'new'");if(isNative&&setPrototypeOf&&Map!==MapPoly){self=setPrototypeOf(new Map,getPrototypeOf(this))}else{self=this}if(iterable!=null)iterator(iterable);defineProperties(self,{__mapKeysData__:d("c",keys=[]),__mapValuesData__:d("c",values=[])});if(!iterable)return self;forOf(iterable,function(value){var key=validValue(value)[0];value=value[1];if(eIndexOf.call(keys,key)!==-1)return;keys.push(key);values.push(value)},self);return self};if(isNative){if(setPrototypeOf)setPrototypeOf(MapPoly,Map);MapPoly.prototype=Object.create(Map.prototype,{constructor:d(MapPoly)})}ee(defineProperties(MapPoly.prototype,{clear:d(function(){if(!this.__mapKeysData__.length)return;clear.call(this.__mapKeysData__);clear.call(this.__mapValuesData__);this.emit("_clear")}),delete:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return false;this.__mapKeysData__.splice(index,1);this.__mapValuesData__.splice(index,1);this.emit("_delete",index,key);return true}),entries:d(function(){return new Iterator(this,"key+value")}),forEach:d(function(cb){var thisArg=arguments[1],iterator,result;callable(cb);iterator=this.entries();result=iterator._next();while(result!==undefined){call.call(cb,thisArg,this.__mapValuesData__[result],this.__mapKeysData__[result],this);result=iterator._next()}}),get:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return;return this.__mapValuesData__[index]}),has:d(function(key){return eIndexOf.call(this.__mapKeysData__,key)!==-1}),keys:d(function(){return new Iterator(this,"key")}),set:d(function(key,value){var index=eIndexOf.call(this.__mapKeysData__,key),emit;if(index===-1){index=this.__mapKeysData__.push(key)-1;emit=true}this.__mapValuesData__[index]=value;if(emit)this.emit("_add",index,key);return this}),size:d.gs(function(){return this.__mapKeysData__.length}),values:d(function(){return new Iterator(this,"value")}),toString:d(function(){return"[object Map]"})}));Object.defineProperty(MapPoly.prototype,Symbol.iterator,d(function(){return this.entries()}));Object.defineProperty(MapPoly.prototype,Symbol.toStringTag,d("c","Map"))},{"./is-native-implemented":45,"./lib/iterator":47,d:2,"es5-ext/array/#/clear":4,"es5-ext/array/#/e-index-of":5,"es5-ext/object/set-prototype-of":27,"es5-ext/object/valid-callable":30,"es5-ext/object/valid-value":31,"es6-iterator/for-of":37,"es6-iterator/valid-iterable":42,"es6-symbol":49,"event-emitter":55}],49:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Symbol:require("./polyfill")},{"./is-implemented":50,"./polyfill":52}],50:[function(require,module,exports){"use strict";var validTypes={object:true,symbol:true};module.exports=function(){var symbol;if(typeof Symbol!=="function")return false;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return false}if(!validTypes[typeof Symbol.iterator])return false;if(!validTypes[typeof Symbol.toPrimitive])return false;if(!validTypes[typeof Symbol.toStringTag])return false;return true}},{}],51:[function(require,module,exports){"use strict";module.exports=function(x){if(!x)return false;if(typeof x==="symbol")return true;if(!x.constructor)return false;if(x.constructor.name!=="Symbol")return false;return x[x.constructor.toStringTag]==="Symbol"}},{}],52:[function(require,module,exports){"use strict";var d=require("d"),validateSymbol=require("./validate-symbol"),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty,objPrototype=Object.prototype,NativeSymbol,SymbolPolyfill,HiddenSymbol,globalSymbols=create(null),isNativeSafe;if(typeof Symbol==="function"){NativeSymbol=Symbol;try{String(NativeSymbol());isNativeSafe=true}catch(ignore){}}var generateName=function(){var created=create(null);return function(desc){var postfix=0,name,ie11BugWorkaround;while(created[desc+(postfix||"")])++postfix;desc+=postfix||"";created[desc]=true;name="@@"+desc;defineProperty(objPrototype,name,d.gs(null,function(value){if(ie11BugWorkaround)return;ie11BugWorkaround=true;defineProperty(this,name,d(value));ie11BugWorkaround=false}));return name}}();HiddenSymbol=function Symbol(description){if(this instanceof HiddenSymbol)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill(description)};module.exports=SymbolPolyfill=function Symbol(description){var symbol;if(this instanceof Symbol)throw new TypeError("Symbol is not a constructor");if(isNativeSafe)return NativeSymbol(description);symbol=create(HiddenSymbol.prototype);description=description===undefined?"":String(description);return defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))})};defineProperties(SymbolPolyfill,{for:d(function(key){if(globalSymbols[key])return globalSymbols[key];return globalSymbols[key]=SymbolPolyfill(String(key))}),keyFor:d(function(s){var key;validateSymbol(s);for(key in globalSymbols)if(globalSymbols[key]===s)return key}),hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))});defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",function(){return this.__name__})});defineProperties(SymbolPolyfill.prototype,{toString:d(function(){return"Symbol ("+validateSymbol(this).__description__+")"}),valueOf:d(function(){return validateSymbol(this)})});defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",function(){var symbol=validateSymbol(this);if(typeof symbol==="symbol")return symbol;return symbol.toString()}));defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol"));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]))},{"./validate-symbol":53,d:2}],53:[function(require,module,exports){"use strict";var isSymbol=require("./is-symbol");module.exports=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value}},{"./is-symbol":51}],54:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}
var regexSymbolWithCombiningMarks=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g;var regexSurrogatePair=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g;var reverse=function(string){string=string.replace(regexSymbolWithCombiningMarks,function($0,$1,$2){return reverse($2)+$1}).replace(regexSurrogatePair,"$2$1");var result="";var index=string.length;while(index--){result+=string.charAt(index)}return result};var esrever={version:"0.2.0",reverse:reverse};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return esrever})}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=esrever}else{for(var key in esrever){esrever.hasOwnProperty(key)&&(freeExports[key]=esrever[key])}}}else{root.esrever=esrever}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],55:[function(require,module,exports){"use strict";var d=require("d"),callable=require("es5-ext/object/valid-callable"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:true,enumerable:false,writable:true},on,once,off,emit,methods,descriptors,base;on=function(type,listener){var data;callable(listener);if(!hasOwnProperty.call(this,"__ee__")){data=descriptor.value=create(null);defineProperty(this,"__ee__",descriptor);descriptor.value=null}else{data=this.__ee__}if(!data[type])data[type]=listener;else if(typeof data[type]==="object")data[type].push(listener);else data[type]=[data[type],listener];return this};once=function(type,listener){var once,self;callable(listener);self=this;on.call(this,type,once=function(){off.call(self,type,once);apply.call(listener,this,arguments)});once.__eeOnceListener__=listener;return this};off=function(type,listener){var data,listeners,candidate,i;callable(listener);if(!hasOwnProperty.call(this,"__ee__"))return this;data=this.__ee__;if(!data[type])return this;listeners=data[type];if(typeof listeners==="object"){for(i=0;candidate=listeners[i];++i){if(candidate===listener||candidate.__eeOnceListener__===listener){if(listeners.length===2)data[type]=listeners[i?0:1];else listeners.splice(i,1)}}}else{if(listeners===listener||listeners.__eeOnceListener__===listener){delete data[type]}}return this};emit=function(type){var i,l,listener,listeners,args;if(!hasOwnProperty.call(this,"__ee__"))return;listeners=this.__ee__[type];if(!listeners)return;if(typeof listeners==="object"){l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i)args[i-1]=arguments[i];listeners=listeners.slice();for(i=0;listener=listeners[i];++i){apply.call(listener,this,args)}}else{switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i){args[i-1]=arguments[i]}apply.call(listeners,this,args)}}};methods={on:on,once:once,off:off,emit:emit};descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)};base=defineProperties({},descriptors);module.exports=exports=function(o){return o==null?create(base):defineProperties(Object(o),descriptors)};exports.methods=methods},{d:2,"es5-ext/object/valid-callable":30}],56:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;var toString=Object.prototype.toString;function isEmpty(val){if(val==null)return true;if("boolean"==typeof val)return false;if("number"==typeof val)return val===0;if("string"==typeof val)return val.length===0;if("function"==typeof val)return val.length===0;if(Array.isArray(val))return val.length===0;if(val instanceof Error)return val.message==="";if(val.toString==toString){switch(val.toString()){case"[object File]":case"[object Map]":case"[object Set]":{return val.size===0}case"[object Object]":{for(var key in val){if(has.call(val,key))return false}return true}}}return false}module.exports=isEmpty},{}],57:[function(require,module,exports){"use strict";var isObject=require("isobject");function isObjectObject(o){return isObject(o)===true&&Object.prototype.toString.call(o)==="[object Object]"}module.exports=function isPlainObject(o){var ctor,prot;if(isObjectObject(o)===false)return false;ctor=o.constructor;if(typeof ctor!=="function")return false;prot=ctor.prototype;if(isObjectObject(prot)===false)return false;if(prot.hasOwnProperty("isPrototypeOf")===false){return false}return true}},{isobject:58}],58:[function(require,module,exports){"use strict";module.exports=function isObject(val){return val!=null&&typeof val==="object"&&Array.isArray(val)===false}},{}],59:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var DataView=getNative(root,"DataView");module.exports=DataView},{"./_getNative":118,"./_root":155}],60:[function(require,module,exports){var hashClear=require("./_hashClear"),hashDelete=require("./_hashDelete"),hashGet=require("./_hashGet"),hashHas=require("./_hashHas"),hashSet=require("./_hashSet");function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},{"./_hashClear":124,"./_hashDelete":125,"./_hashGet":126,"./_hashHas":127,"./_hashSet":128}],61:[function(require,module,exports){var listCacheClear=require("./_listCacheClear"),listCacheDelete=require("./_listCacheDelete"),listCacheGet=require("./_listCacheGet"),listCacheHas=require("./_listCacheHas"),listCacheSet=require("./_listCacheSet");function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},{"./_listCacheClear":136,"./_listCacheDelete":137,"./_listCacheGet":138,"./_listCacheHas":139,"./_listCacheSet":140}],62:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Map=getNative(root,"Map");module.exports=Map},{"./_getNative":118,"./_root":155}],63:[function(require,module,exports){var mapCacheClear=require("./_mapCacheClear"),mapCacheDelete=require("./_mapCacheDelete"),mapCacheGet=require("./_mapCacheGet"),mapCacheHas=require("./_mapCacheHas"),mapCacheSet=require("./_mapCacheSet");function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},{"./_mapCacheClear":141,"./_mapCacheDelete":142,"./_mapCacheGet":143,"./_mapCacheHas":144,"./_mapCacheSet":145}],64:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Promise=getNative(root,"Promise");module.exports=Promise},{"./_getNative":118,"./_root":155}],65:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Set=getNative(root,"Set");module.exports=Set},{"./_getNative":118,"./_root":155}],66:[function(require,module,exports){var MapCache=require("./_MapCache"),setCacheAdd=require("./_setCacheAdd"),setCacheHas=require("./_setCacheHas");function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;module.exports=SetCache},{"./_MapCache":63,"./_setCacheAdd":156,"./_setCacheHas":157}],67:[function(require,module,exports){var ListCache=require("./_ListCache"),stackClear=require("./_stackClear"),stackDelete=require("./_stackDelete"),stackGet=require("./_stackGet"),stackHas=require("./_stackHas"),stackSet=require("./_stackSet");function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;module.exports=Stack},{"./_ListCache":61,"./_stackClear":161,"./_stackDelete":162,"./_stackGet":163,"./_stackHas":164,"./_stackSet":165}],68:[function(require,module,exports){var root=require("./_root");var Symbol=root.Symbol;module.exports=Symbol},{"./_root":155}],69:[function(require,module,exports){var root=require("./_root");var Uint8Array=root.Uint8Array;module.exports=Uint8Array},{"./_root":155}],70:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var WeakMap=getNative(root,"WeakMap");module.exports=WeakMap},{"./_getNative":118,"./_root":155}],71:[function(require,module,exports){function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}module.exports=apply},{}],72:[function(require,module,exports){function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}module.exports=arrayFilter},{}],73:[function(require,module,exports){var baseTimes=require("./_baseTimes"),isArguments=require("./isArguments"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isIndex=require("./_isIndex"),isTypedArray=require("./isTypedArray");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}module.exports=arrayLikeKeys},{"./_baseTimes":102,"./_isIndex":130,"./isArguments":177,"./isArray":178,"./isBuffer":180,"./isTypedArray":187}],74:[function(require,module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},{}],75:[function(require,module,exports){function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}module.exports=arrayPush},{}],76:[function(require,module,exports){function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}module.exports=arraySome},{}],77:[function(require,module,exports){var baseAssignValue=require("./_baseAssignValue"),eq=require("./eq");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},{"./_baseAssignValue":79,"./eq":170}],78:[function(require,module,exports){var eq=require("./eq");function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},{"./eq":170}],79:[function(require,module,exports){var defineProperty=require("./_defineProperty");function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},{"./_defineProperty":109}],80:[function(require,module,exports){function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}module.exports=baseFindIndex},{}],81:[function(require,module,exports){var arrayPush=require("./_arrayPush"),isFlattenable=require("./_isFlattenable");function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}module.exports=baseFlatten},{"./_arrayPush":75,"./_isFlattenable":129}],82:[function(require,module,exports){var castPath=require("./_castPath"),toKey=require("./_toKey");function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}module.exports=baseGet},{"./_castPath":106,"./_toKey":167}],83:[function(require,module,exports){var arrayPush=require("./_arrayPush"),isArray=require("./isArray");function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}module.exports=baseGetAllKeys},{"./_arrayPush":75,"./isArray":178}],84:[function(require,module,exports){var Symbol=require("./_Symbol"),getRawTag=require("./_getRawTag"),objectToString=require("./_objectToString");var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},{"./_Symbol":68,"./_getRawTag":119,"./_objectToString":152}],85:[function(require,module,exports){function baseHasIn(object,key){return object!=null&&key in Object(object)}module.exports=baseHasIn},{}],86:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}module.exports=baseIsArguments},{"./_baseGetTag":84,"./isObjectLike":185}],87:[function(require,module,exports){var baseIsEqualDeep=require("./_baseIsEqualDeep"),isObjectLike=require("./isObjectLike");function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}module.exports=baseIsEqual},{"./_baseIsEqualDeep":88,"./isObjectLike":185}],88:[function(require,module,exports){var Stack=require("./_Stack"),equalArrays=require("./_equalArrays"),equalByTag=require("./_equalByTag"),equalObjects=require("./_equalObjects"),getTag=require("./_getTag"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isTypedArray=require("./isTypedArray");var COMPARE_PARTIAL_FLAG=1;var argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}module.exports=baseIsEqualDeep},{"./_Stack":67,"./_equalArrays":110,"./_equalByTag":111,"./_equalObjects":112,"./_getTag":121,"./isArray":178,"./isBuffer":180,"./isTypedArray":187}],89:[function(require,module,exports){var Stack=require("./_Stack"),baseIsEqual=require("./_baseIsEqual");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false}}}return true}module.exports=baseIsMatch},{"./_Stack":67,"./_baseIsEqual":87}],90:[function(require,module,exports){var isFunction=require("./isFunction"),isMasked=require("./_isMasked"),isObject=require("./isObject"),toSource=require("./_toSource");var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},{"./_isMasked":133,"./_toSource":168,"./isFunction":182,"./isObject":184}],91:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isLength=require("./isLength"),isObjectLike=require("./isObjectLike");var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}module.exports=baseIsTypedArray},{"./_baseGetTag":84,"./isLength":183,"./isObjectLike":185}],92:[function(require,module,exports){var baseMatches=require("./_baseMatches"),baseMatchesProperty=require("./_baseMatchesProperty"),identity=require("./identity"),isArray=require("./isArray"),property=require("./property");function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if(typeof value=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}module.exports=baseIteratee},{"./_baseMatches":94,"./_baseMatchesProperty":95,"./identity":176,"./isArray":178,"./property":191}],93:[function(require,module,exports){var isPrototype=require("./_isPrototype"),nativeKeys=require("./_nativeKeys");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}module.exports=baseKeys},{"./_isPrototype":134,"./_nativeKeys":150}],94:[function(require,module,exports){var baseIsMatch=require("./_baseIsMatch"),getMatchData=require("./_getMatchData"),matchesStrictComparable=require("./_matchesStrictComparable");function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}module.exports=baseMatches},{"./_baseIsMatch":89,"./_getMatchData":117,"./_matchesStrictComparable":147}],95:[function(require,module,exports){var baseIsEqual=require("./_baseIsEqual"),get=require("./get"),hasIn=require("./hasIn"),isKey=require("./_isKey"),isStrictComparable=require("./_isStrictComparable"),matchesStrictComparable=require("./_matchesStrictComparable"),toKey=require("./_toKey");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}module.exports=baseMatchesProperty},{"./_baseIsEqual":87,"./_isKey":131,"./_isStrictComparable":135,"./_matchesStrictComparable":147,"./_toKey":167,"./get":174,"./hasIn":175}],96:[function(require,module,exports){var basePickBy=require("./_basePickBy"),hasIn=require("./hasIn");function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}module.exports=basePick},{"./_basePickBy":97,"./hasIn":175}],97:[function(require,module,exports){var baseGet=require("./_baseGet"),baseSet=require("./_baseSet"),castPath=require("./_castPath");function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value)}}return result}module.exports=basePickBy},{"./_baseGet":82,"./_baseSet":100,"./_castPath":106}],98:[function(require,module,exports){function baseProperty(key){return function(object){return object==null?undefined:object[key]}}module.exports=baseProperty},{}],99:[function(require,module,exports){var baseGet=require("./_baseGet");function basePropertyDeep(path){return function(object){return baseGet(object,path)}}module.exports=basePropertyDeep},{"./_baseGet":82}],100:[function(require,module,exports){var assignValue=require("./_assignValue"),castPath=require("./_castPath"),isIndex=require("./_isIndex"),isObject=require("./isObject"),toKey=require("./_toKey");function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},{"./_assignValue":77,"./_castPath":106,"./_isIndex":130,"./_toKey":167,"./isObject":184}],101:[function(require,module,exports){var constant=require("./constant"),defineProperty=require("./_defineProperty"),identity=require("./identity");var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};module.exports=baseSetToString},{"./_defineProperty":109,"./constant":169,"./identity":176}],102:[function(require,module,exports){function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}module.exports=baseTimes},{}],103:[function(require,module,exports){var Symbol=require("./_Symbol"),arrayMap=require("./_arrayMap"),isArray=require("./isArray"),isSymbol=require("./isSymbol");var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},{"./_Symbol":68,"./_arrayMap":74,"./isArray":178,"./isSymbol":186}],104:[function(require,module,exports){function baseUnary(func){return function(value){return func(value)}}module.exports=baseUnary},{}],105:[function(require,module,exports){function cacheHas(cache,key){return cache.has(key)}module.exports=cacheHas},{}],106:[function(require,module,exports){var isArray=require("./isArray"),isKey=require("./_isKey"),stringToPath=require("./_stringToPath"),toString=require("./toString");function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},{"./_isKey":131,"./_stringToPath":166,"./isArray":178,"./toString":197}],107:[function(require,module,exports){var root=require("./_root");var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},{"./_root":155}],108:[function(require,module,exports){var baseIteratee=require("./_baseIteratee"),isArrayLike=require("./isArrayLike"),keys=require("./keys");function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=baseIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}module.exports=createFind},{"./_baseIteratee":92,"./isArrayLike":179,"./keys":188}],109:[function(require,module,exports){var getNative=require("./_getNative");var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},{"./_getNative":118}],110:[function(require,module,exports){var SetCache=require("./_SetCache"),arraySome=require("./_arraySome"),cacheHas=require("./_cacheHas");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}module.exports=equalArrays},{"./_SetCache":66,"./_arraySome":76,"./_cacheHas":105}],111:[function(require,module,exports){var Symbol=require("./_Symbol"),Uint8Array=require("./_Uint8Array"),eq=require("./eq"),equalArrays=require("./_equalArrays"),mapToArray=require("./_mapToArray"),setToArray=require("./_setToArray");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]";var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}module.exports=equalByTag},{"./_Symbol":68,"./_Uint8Array":69,"./_equalArrays":110,"./_mapToArray":146,"./_setToArray":158,"./eq":170}],112:[function(require,module,exports){var getAllKeys=require("./_getAllKeys");var COMPARE_PARTIAL_FLAG=1
;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}module.exports=equalObjects},{"./_getAllKeys":115}],113:[function(require,module,exports){var flatten=require("./flatten"),overRest=require("./_overRest"),setToString=require("./_setToString");function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}module.exports=flatRest},{"./_overRest":154,"./_setToString":159,"./flatten":173}],114:[function(require,module,exports){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],115:[function(require,module,exports){var baseGetAllKeys=require("./_baseGetAllKeys"),getSymbols=require("./_getSymbols"),keys=require("./keys");function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}module.exports=getAllKeys},{"./_baseGetAllKeys":83,"./_getSymbols":120,"./keys":188}],116:[function(require,module,exports){var isKeyable=require("./_isKeyable");function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},{"./_isKeyable":132}],117:[function(require,module,exports){var isStrictComparable=require("./_isStrictComparable"),keys=require("./keys");function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}module.exports=getMatchData},{"./_isStrictComparable":135,"./keys":188}],118:[function(require,module,exports){var baseIsNative=require("./_baseIsNative"),getValue=require("./_getValue");function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},{"./_baseIsNative":90,"./_getValue":122}],119:[function(require,module,exports){var Symbol=require("./_Symbol");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},{"./_Symbol":68}],120:[function(require,module,exports){var arrayFilter=require("./_arrayFilter"),stubArray=require("./stubArray");var objectProto=Object.prototype;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};module.exports=getSymbols},{"./_arrayFilter":72,"./stubArray":192}],121:[function(require,module,exports){var DataView=require("./_DataView"),Map=require("./_Map"),Promise=require("./_Promise"),Set=require("./_Set"),WeakMap=require("./_WeakMap"),baseGetTag=require("./_baseGetTag"),toSource=require("./_toSource");var mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]";var dataViewTag="[object DataView]";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}module.exports=getTag},{"./_DataView":59,"./_Map":62,"./_Promise":64,"./_Set":65,"./_WeakMap":70,"./_baseGetTag":84,"./_toSource":168}],122:[function(require,module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},{}],123:[function(require,module,exports){var castPath=require("./_castPath"),isArguments=require("./isArguments"),isArray=require("./isArray"),isIndex=require("./_isIndex"),isLength=require("./isLength"),toKey=require("./_toKey");function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}module.exports=hasPath},{"./_castPath":106,"./_isIndex":130,"./_toKey":167,"./isArguments":177,"./isArray":178,"./isLength":183}],124:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},{"./_nativeCreate":149}],125:[function(require,module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},{}],126:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},{"./_nativeCreate":149}],127:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},{"./_nativeCreate":149}],128:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},{"./_nativeCreate":149}],129:[function(require,module,exports){var Symbol=require("./_Symbol"),isArguments=require("./isArguments"),isArray=require("./isArray");var spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined;function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}module.exports=isFlattenable},{"./_Symbol":68,"./isArguments":177,"./isArray":178}],130:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},{}],131:[function(require,module,exports){var isArray=require("./isArray"),isSymbol=require("./isSymbol");var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},{"./isArray":178,"./isSymbol":186}],132:[function(require,module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},{}],133:[function(require,module,exports){var coreJsData=require("./_coreJsData");var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},{"./_coreJsData":107}],134:[function(require,module,exports){var objectProto=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}module.exports=isPrototype},{}],135:[function(require,module,exports){var isObject=require("./isObject");function isStrictComparable(value){return value===value&&!isObject(value)}module.exports=isStrictComparable},{"./isObject":184}],136:[function(require,module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},{}],137:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},{"./_assocIndexOf":78}],138:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},{"./_assocIndexOf":78}],139:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},{"./_assocIndexOf":78}],140:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},{"./_assocIndexOf":78}],141:[function(require,module,exports){var Hash=require("./_Hash"),ListCache=require("./_ListCache"),Map=require("./_Map");function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},{"./_Hash":60,"./_ListCache":61,"./_Map":62}],142:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},{"./_getMapData":116}],143:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},{"./_getMapData":116}],144:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},{"./_getMapData":116}],145:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},{"./_getMapData":116}],146:[function(require,module,exports){function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}module.exports=mapToArray},{}],147:[function(require,module,exports){function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}module.exports=matchesStrictComparable},{}],148:[function(require,module,exports){var memoize=require("./memoize");var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}module.exports=memoizeCapped},{"./memoize":189}],149:[function(require,module,exports){var getNative=require("./_getNative");var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},{"./_getNative":118}],150:[function(require,module,exports){var overArg=require("./_overArg");var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys},{"./_overArg":153}],151:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil},{"./_freeGlobal":114}],152:[function(require,module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},{}],153:[function(require,module,exports){function overArg(func,transform){return function(arg){return func(transform(arg))}}module.exports=overArg},{}],154:[function(require,module,exports){var apply=require("./_apply");var nativeMax=Math.max;function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}module.exports=overRest},{"./_apply":71}],155:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},{"./_freeGlobal":114}],156:[function(require,module,exports){var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}module.exports=setCacheAdd},{}],157:[function(require,module,exports){function setCacheHas(value){return this.__data__.has(value)}module.exports=setCacheHas},{}],158:[function(require,module,exports){function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}module.exports=setToArray},{}],159:[function(require,module,exports){var baseSetToString=require("./_baseSetToString"),shortOut=require("./_shortOut");var setToString=shortOut(baseSetToString);module.exports=setToString},{"./_baseSetToString":101,"./_shortOut":160}],160:[function(require,module,exports){var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}module.exports=shortOut},{}],161:[function(require,module,exports){var ListCache=require("./_ListCache");function stackClear(){this.__data__=new ListCache;this.size=0}module.exports=stackClear},{"./_ListCache":61}],162:[function(require,module,exports){function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}module.exports=stackDelete},{}],163:[function(require,module,exports){function stackGet(key){return this.__data__.get(key)}module.exports=stackGet},{}],164:[function(require,module,exports){function stackHas(key){return this.__data__.has(key)}module.exports=stackHas},{}],165:[function(require,module,exports){var ListCache=require("./_ListCache"),Map=require("./_Map"),MapCache=require("./_MapCache");var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}module.exports=stackSet},{"./_ListCache":61,"./_Map":62,"./_MapCache":63}],166:[function(require,module,exports){var memoizeCapped=require("./_memoizeCapped");var reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});module.exports=stringToPath},{"./_memoizeCapped":148}],167:[function(require,module,exports){var isSymbol=require("./isSymbol");var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},{"./isSymbol":186}],168:[function(require,module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},{}],169:[function(require,module,exports){function constant(value){return function(){return value}}module.exports=constant},{}],170:[function(require,module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},{}],171:[function(require,module,exports){var createFind=require("./_createFind"),findIndex=require("./findIndex");var find=createFind(findIndex);module.exports=find},{"./_createFind":108,"./findIndex":172}],172:[function(require,module,exports){var baseFindIndex=require("./_baseFindIndex"),baseIteratee=require("./_baseIteratee"),toInteger=require("./toInteger");var nativeMax=Math.max;function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseFindIndex(array,baseIteratee(predicate,3),index)}module.exports=findIndex},{"./_baseFindIndex":80,"./_baseIteratee":92,"./toInteger":195}],173:[function(require,module,exports){var baseFlatten=require("./_baseFlatten");function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}module.exports=flatten},{"./_baseFlatten":81}],174:[function(require,module,exports){var baseGet=require("./_baseGet");function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}module.exports=get},{"./_baseGet":82}],175:[function(require,module,exports){var baseHasIn=require("./_baseHasIn"),hasPath=require("./_hasPath");function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}module.exports=hasIn},{"./_baseHasIn":85,"./_hasPath":123}],176:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],177:[function(require,module,exports){var baseIsArguments=require("./_baseIsArguments"),isObjectLike=require("./isObjectLike");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},{"./_baseIsArguments":86,"./isObjectLike":185}],178:[function(require,module,exports){var isArray=Array.isArray;module.exports=isArray},{}],179:[function(require,module,exports){var isFunction=require("./isFunction"),isLength=require("./isLength");function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}module.exports=isArrayLike},{"./isFunction":182,"./isLength":183}],180:[function(require,module,exports){var root=require("./_root"),stubFalse=require("./stubFalse");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer},{"./_root":155,"./stubFalse":193}],181:[function(require,module,exports){var baseIsEqual=require("./_baseIsEqual");function isEqual(value,other){return baseIsEqual(value,other)}module.exports=isEqual},{"./_baseIsEqual":87}],182:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObject=require("./isObject");var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},{"./_baseGetTag":84,"./isObject":184}],183:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},{}],184:[function(require,module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},{}],185:[function(require,module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},{}],186:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},{"./_baseGetTag":84,"./isObjectLike":185}],187:[function(require,module,exports){var baseIsTypedArray=require("./_baseIsTypedArray"),baseUnary=require("./_baseUnary"),nodeUtil=require("./_nodeUtil");var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},{"./_baseIsTypedArray":91,"./_baseUnary":104,"./_nodeUtil":151}],188:[function(require,module,exports){var arrayLikeKeys=require("./_arrayLikeKeys"),baseKeys=require("./_baseKeys"),isArrayLike=require("./isArrayLike");function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=keys},{"./_arrayLikeKeys":73,"./_baseKeys":93,"./isArrayLike":179}],189:[function(require,module,exports){var MapCache=require("./_MapCache");var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},{"./_MapCache":63}],190:[function(require,module,exports){var basePick=require("./_basePick"),flatRest=require("./_flatRest");var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});module.exports=pick},{"./_basePick":96,"./_flatRest":113}],191:[function(require,module,exports){var baseProperty=require("./_baseProperty"),basePropertyDeep=require("./_basePropertyDeep"),isKey=require("./_isKey"),toKey=require("./_toKey");function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}module.exports=property},{"./_baseProperty":98,"./_basePropertyDeep":99,"./_isKey":131,"./_toKey":167}],192:[function(require,module,exports){function stubArray(){return[]}module.exports=stubArray},{}],193:[function(require,module,exports){function stubFalse(){return false}module.exports=stubFalse},{}],194:[function(require,module,exports){var toNumber=require("./toNumber");var INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308;function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}module.exports=toFinite},{"./toNumber":196}],195:[function(require,module,exports){var toFinite=require("./toFinite");function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}module.exports=toInteger},{"./toFinite":194}],196:[function(require,module,exports){var isObject=require("./isObject"),isSymbol=require("./isSymbol");var NAN=0/0;var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=toNumber},{"./isObject":184,"./isSymbol":186}],197:[function(require,module,exports){var baseToString=require("./_baseToString");function toString(value){return value==null?"":baseToString(value)}module.exports=toString},{"./_baseToString":103}],198:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],199:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(typeof val=="object"&&val&&typeof val.length=="number"){try{if(typeof val.callee=="function")return"arguments"}catch(ex){if(ex instanceof TypeError){return"arguments"}}}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}},{}],200:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var IS_DEV=typeof process!=="undefined"&&process.env&&process.env.NODE_ENV!=="production";function log(level,message){if(!IS_DEV){return}if(typeof console!="undefined"&&typeof console[level]=="function"){var _console;for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}(_console=console)[level].apply(_console,[message].concat(args))}}function warn(message){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}log.apply(undefined,["warn","Warning: "+message].concat(args))}function deprecate(version,message){for(var _len3=arguments.length,args=Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++){args[_key3-2]=arguments[_key3]}
log.apply(undefined,["warn","Deprecation (v"+version+"): "+message].concat(args))}exports.default={deprecate:deprecate,warn:warn}}).call(this,require("_process"))},{_process:198}],201:[function(require,module,exports){(function(process){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this,require("_process"))},{"./debug":202,_process:198}],202:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:203}],203:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],204:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),Changes={},PROXY_TRANSFORMS=["deleteBackward","deleteCharBackward","deleteLineBackward","deleteWordBackward","deleteForward","deleteCharForward","deleteWordForward","deleteLineForward","setBlock","setInline","splitInline","unwrapBlock","unwrapInline","wrapBlock","wrapInline"];PROXY_TRANSFORMS.forEach(function(e){Changes[e]=function(t){for(var a=arguments.length,n=Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];var s=t.state,l=s.selection;t[e+"AtRange"].apply(t,[l].concat(n))}}),Changes.addMark=function(e,t){t=_mark2.default.create(t);var a=e.state,n=a.document,r=a.selection;if(r.isExpanded)e.addMarkAtRange(r,t);else if(r.marks){var s=r.marks.add(t),l=r.set("marks",s);e.select(l)}else{var o=n.getActiveMarksAtRange(r).add(t),i=r.set("marks",o);e.select(i)}},Changes.delete=function(e){var t=e.state,a=t.selection;e.deleteAtRange(a),e.collapseToStart()},Changes.insertBlock=function(e,t){t=_block2.default.create(t);var a=e.state,n=a.selection;e.insertBlockAtRange(n,t);var r=e.state.document.getNode(t.key);r&&e.collapseToEndOf(r)},Changes.insertFragment=function(e,t){if(t.nodes.size){var a=e.state,n=a,r=n.document,s=n.selection,l=a,o=l.startText,i=l.endText,c=l.startInline,d=t.getLastText(),u=t.getClosestInline(d.key),k=r.getTexts().map(function(e){return e.key}),g=!c||s.hasEdgeAtStartOf(o)||s.hasEdgeAtEndOf(i);e.insertFragmentAtRange(s,t),a=e.state,r=a.document;var f=r.getTexts().filter(function(e){return!k.includes(e.key)}),m=g?f.last():f.takeLast(2).first();m&&u?e.select(s.collapseToEndOf(m)):m?e.select(s.collapseToStartOf(m).move(d.text.length)):e.select(s.collapseToStart().move(d.text.length))}},Changes.insertInline=function(e,t){t=_inline2.default.create(t);var a=e.state,n=a.selection;e.insertInlineAtRange(n,t);var r=e.state.document.getNode(t.key);r&&e.collapseToEndOf(r)},Changes.insertText=function(e,t,a){var n=e.state,r=n.document,s=n.selection;a=a||s.marks,e.insertTextAtRange(s,t,a),s.marks&&r!=e.state.document&&e.select({marks:null})},Changes.splitBlock=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=e.state,n=a.selection;e.splitBlockAtRange(n,t).collapseToEnd()},Changes.removeMark=function(e,t){t=_mark2.default.create(t);var a=e.state,n=a.document,r=a.selection;if(r.isExpanded)e.removeMarkAtRange(r,t);else if(r.marks){var s=r.marks.remove(t),l=r.set("marks",s);e.select(l)}else{var o=n.getActiveMarksAtRange(r).remove(t),i=r.set("marks",o);e.select(i)}},Changes.toggleMark=function(e,t){t=_mark2.default.create(t),e.state.activeMarks.has(t)?e.removeMark(t):e.addMark(t)},Changes.wrapText=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=e.state,r=n.selection;e.wrapTextAtRange(r,t,a),r.isCollapsed&&e.moveStart(0-t.length),e.moveEnd(0-a.length),r.isForward!=e.state.selection.isForward&&e.flip()},exports.default=Changes},{"../models/block":214,"../models/inline":220,"../models/mark":221}],205:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _immutable=window.Immutable,_block=require("../models/block"),_block2=_interopRequireDefault(_block),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("../models/node"),_node2=_interopRequireDefault(_node),_string=require("../utils/string"),_string2=_interopRequireDefault(_string),_core=require("../schemas/core"),_core2=_interopRequireDefault(_core),Changes={};Changes.addMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=t.startKey,l=t.startOffset,y=t.endKey,f=t.endOffset;s.getTextsAtRange(t).forEach(function(t){var o=t.key,r=0,i=t.text.length;o==d&&(r=l),o==y&&(i=f),o==d&&o==y&&(i=f-l),e.addMarkByKey(o,r,i,n,{normalize:a})})}},Changes.deleteAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.isCollapsed){e.snapshotSelection();var o=n.normalize,r=void 0===o||o,a=e.state,i=t.startKey,s=t.startOffset,d=t.endKey,l=t.endOffset,y=a.document,f=y.hasVoidParent(i),c=y.hasVoidParent(d),g=y.getClosestBlock(i),u=y.getClosestBlock(d),k=0==s&&0==l&&0==f&&i==g.getFirstText().key&&d==u.getFirstText().key;if(k){var m=y.getPreviousText(d);d=m.key,l=m.text.length,c=y.hasVoidParent(d)}for(;f;){var v=y.getClosestVoid(i),h=y.getNextText(i);if(e.removeNodeByKey(v.key,{normalize:!1}),i==d)return;if(!h)return;y=e.state.document,i=h.key,s=0,f=y.hasVoidParent(i)}for(;c;){var B=y.getClosestVoid(d),z=y.getPreviousText(d);e.removeNodeByKey(B.key,{normalize:!1}),y=e.state.document,d=z.key,l=z.text.length,c=y.hasVoidParent(d)}if(i==d&&k)return void e.removeNodeByKey(g.key);if(i==d){var K=s,A=l-s;return void e.removeTextByKey(i,K,A,{normalize:r})}y=e.state.document;var C=y.getCommonAncestor(i,d),p=C.getFurthestAncestor(i),x=C.getFurthestAncestor(d);e.splitDescendantsByKey(p.key,i,s,{normalize:!1}),e.splitDescendantsByKey(x.key,d,l,{normalize:!1}),y=e.state.document,C=y.getCommonAncestor(i,d),p=C.getFurthestAncestor(i),x=C.getFurthestAncestor(d);var N=y.getNextText(d),R=C.nodes.indexOf(p),O=C.nodes.indexOf(x),_=C.nodes.slice(R+1,O+1);if(g=y.getClosestBlock(i),u=y.getClosestBlock(N.key),_.forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})}),g.key!=u.key&&k)e.removeNodeByKey(g.key,{normalize:!1}),e.removeNodeByKey(u.key,{normalize:!1});else if(g.key!=u.key){u.nodes.forEach(function(t,n){var o=g.key,r=g.nodes.size+n;e.moveNodeByKey(t.key,o,r,{normalize:!1})});var E=y.getFurthestOnlyChildAncestor(u.key)||u;e.removeNodeByKey(E.key,{normalize:!1})}r&&e.normalizeNodeByKey(C.key,_core2.default)}},Changes.deleteCharBackwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i,y=s.text,f=_string2.default.getCharOffsetBackward(y,l);e.deleteBackwardAtRange(t,f,n)},Changes.deleteLineBackwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i;e.deleteBackwardAtRange(t,l,n)},Changes.deleteWordBackwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i,y=s.text,f=_string2.default.getWordOffsetBackward(y,l);e.deleteBackwardAtRange(t,f,n)},Changes.deleteBackwardAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=t,l=d.startKey,y=d.focusOffset;if(t.isExpanded)return void e.deleteAtRange(t,{normalize:a});var f=s.getClosestBlock(l);if(f&&f.isVoid)return void e.removeNodeByKey(f.key,{normalize:a});if(f&&!f.isVoid&&f.isEmpty&&1!==s.nodes.size)return void e.removeNodeByKey(f.key,{normalize:a});var c=s.getClosestInline(l);if(c&&c.isVoid)return void e.removeNodeByKey(c.key,{normalize:a});if(!t.isAtStartOf(s)){var g=s.getDescendant(l);if(t.isAtStartOf(g)){var u=s.getPreviousText(g.key),k=s.getClosestBlock(u.key),m=s.getClosestInline(u.key);if(k&&k.isVoid)return void e.removeNodeByKey(k.key,{normalize:a});if(m&&m.isVoid)return void e.removeNodeByKey(m.key,{normalize:a});if(1==n&&k!=f)return t=t.merge({anchorKey:u.key,anchorOffset:u.text.length}),void e.deleteAtRange(t,{normalize:a})}if(n<y)return t=t.merge({focusOffset:y-n,isBackward:!0}),void e.deleteAtRange(t,{normalize:a});for(var v=g,h=0,B=y;n>B;){v=s.getPreviousText(v.key);var z=B+v.text.length;if(n<=z){h=z-n;break}B=z}if(s.hasVoidParent(v.key)){var K=s.getClosestVoid(v.key);v=s.getNextText(K.key),h=0}t=t.merge({focusKey:v.key,focusOffset:h,isBackward:!0}),e.deleteAtRange(t,{normalize:a})}},Changes.deleteCharForwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i,y=s.text,f=_string2.default.getCharOffsetForward(y,l);e.deleteForwardAtRange(t,f,n)},Changes.deleteLineForwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i;e.deleteForwardAtRange(t,l,n)},Changes.deleteWordForwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i,y=s.text,f=_string2.default.getWordOffsetForward(y,l);e.deleteForwardAtRange(t,f,n)},Changes.deleteForwardAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=t,l=d.startKey,y=d.focusOffset;if(t.isExpanded)return void e.deleteAtRange(t,{normalize:a});var f=s.getClosestBlock(l);if(f&&f.isVoid)return void e.removeNodeByKey(f.key,{normalize:a});if(f&&!f.isVoid&&f.isEmpty&&1!==s.nodes.size)return void e.removeNodeByKey(f.key,{normalize:a});var c=s.getClosestInline(l);if(c&&c.isVoid)return void e.removeNodeByKey(c.key,{normalize:a});if(!t.isAtEndOf(s)){var g=s.getDescendant(l);if(t.isAtEndOf(g)){var u=s.getNextText(g.key),k=s.getClosestBlock(u.key),m=s.getClosestInline(u.key);if(k&&k.isVoid)return void e.removeNodeByKey(k.key,{normalize:a});if(m&&m.isVoid)return void e.removeNodeByKey(m.key,{normalize:a});if(1==n&&k!=f)return t=t.merge({focusKey:u.key,focusOffset:0}),void e.deleteAtRange(t,{normalize:a})}if(n<=g.text.length-y)return t=t.merge({focusOffset:y+n}),void e.deleteAtRange(t,{normalize:a});for(var v=g,h=y,B=g.text.length-y;n>B;){v=s.getNextText(v.key);var z=B+v.text.length;if(n<=z){h=n-B;break}B=z}if(s.hasVoidParent(v.key)){var K=s.getClosestVoid(v.key);v=s.getPreviousText(K.key),h=v.text.length}t=t.merge({focusKey:v.key,focusOffset:h}),e.deleteAtRange(t,{normalize:a})}},Changes.insertBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_block2.default.create(n);var r=o.normalize,a=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t),t=t.collapseToStart());var i=e.state,s=i.document,d=t,l=d.startKey,y=d.startOffset,f=s.getClosestBlock(l),c=s.getParent(f.key),g=c.nodes.indexOf(f);if(f.isVoid){var u=t.isAtEndOf(f)?1:0;e.insertNodeByKey(c.key,g+u,n,{normalize:a})}else f.isEmpty?(e.removeNodeByKey(f.key),e.insertNodeByKey(c.key,g,n,{normalize:a})):t.isAtStartOf(f)?e.insertNodeByKey(c.key,g,n,{normalize:a}):t.isAtEndOf(f)?e.insertNodeByKey(c.key,g+1,n,{normalize:a}):(e.splitDescendantsByKey(f.key,l,y,{normalize:!1}),e.insertNodeByKey(c.key,g+1,n,{normalize:a}));a&&e.normalizeNodeByKey(c.key,_core2.default)},Changes.insertFragmentAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;if(t.isExpanded&&(e.deleteAtRange(t,{normalize:!1}),t=t.collapseToStart()),n.nodes.size){n=n.mapDescendants(function(e){return e.regenerateKey()});var i=t,s=i.startKey,d=i.startOffset,l=e.state,y=l.document,f=y.getDescendant(s),c=y.getClosestBlock(f.key),g=c.getFurthestAncestor(f.key),u=t.isAtStartOf(c),k=y.getParent(c.key),m=k.nodes.indexOf(c),v=n.getBlocks(),h=v.first(),B=v.last();if(h==B&&h.isVoid)return void e.insertBlockAtRange(t,h,o);if(h!=B){var z=n.getFurthest(h.key,function(e){return 1==e.nodes.size}),K=z||h,A=k.nodes.indexOf(c);n=n.removeDescendant(K.key),n.nodes.forEach(function(t,n){var o=A+n+1;e.insertNodeByKey(k.key,o,t,{normalize:!1})})}if(0!=d&&e.splitDescendantsByKey(g.key,s,d,{normalize:!1}),y=e.state.document,f=y.getDescendant(s),c=y.getClosestBlock(s),g=c.getFurthestAncestor(f.key),h!=B){var C=u?g:c.getNextSibling(g.key),p=C?c.nodes.skipUntil(function(e){return e.key==C.key}):(0,_immutable.List)(),x=B.nodes.size;p.forEach(function(t,n){var o=x+n;e.moveNodeByKey(t.key,B.key,o,{normalize:!1})})}if(c.isEmpty)e.removeNodeByKey(c.key,{normalize:!1}),e.insertNodeByKey(k.key,m,h,{normalize:!1});else{var N=c.getFurthestAncestor(f.key),R=c.nodes.indexOf(N);h.nodes.forEach(function(t,n){var o=0==d?0:1,r=R+n+o;e.insertNodeByKey(c.key,r,t,{normalize:!1})})}a&&e.normalizeNodeByKey(k.key,_core2.default)}},Changes.insertInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;n=_inline2.default.create(n),t.isExpanded&&(e.deleteAtRange(t,{normalize:!1}),t=t.collapseToStart());var i=e.state,s=i.document,d=t,l=d.startKey,y=d.startOffset,f=s.getParent(l),c=s.assertDescendant(l),g=f.nodes.indexOf(c);f.isVoid||(e.splitNodeByKey(l,y,{normalize:!1}),e.insertNodeByKey(f.key,g+1,n,{normalize:!1}),a&&e.normalizeNodeByKey(f.key,_core2.default))},Changes.insertTextAtRange=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=r.normalize,i=e.state,s=i.document,d=t.startKey,l=t.startOffset;s.getParent(d).isVoid||(t.isExpanded&&e.deleteAtRange(t,{normalize:!1}),void 0!==a&&(a=t.isExpanded),e.insertTextByKey(d,l,n,o,{normalize:a}))},Changes.removeMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=s.getTextsAtRange(t),l=t.startKey,y=t.startOffset,f=t.endKey,c=t.endOffset;d.forEach(function(t){var o=t.key,r=0,i=t.text.length;o==l&&(r=y),o==f&&(i=c),o==l&&o==f&&(i=c-y),e.removeMarkByKey(o,r,i,n,{normalize:a})})}},Changes.setBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;e.state.document.getBlocksAtRange(t).forEach(function(t){e.setNodeByKey(t.key,n,{normalize:a})})},Changes.setInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;e.state.document.getInlinesAtRange(t).forEach(function(t){e.setNodeByKey(t.key,n,{normalize:a})})},Changes.splitBlockAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t,{normalize:a}),t=t.collapseToStart());for(var i=t,s=i.startKey,d=i.startOffset,l=e.state,y=l.document,f=y.assertDescendant(s),c=y.getClosestBlock(f.key),g=0;c&&"block"==c.kind&&g<n;)f=c,c=y.getClosestBlock(c.key),g++;e.splitDescendantsByKey(f.key,s,d,{normalize:a})},Changes.splitInlineAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t,{normalize:a}),t=t.collapseToStart());for(var i=t,s=i.startKey,d=i.startOffset,l=e.state,y=l.document,f=y.assertDescendant(s),c=y.getClosestInline(f.key),g=0;c&&"inline"==c.kind&&g<n;)f=c,c=y.getClosestInline(c.key),g++;e.splitDescendantsByKey(f.key,s,d,{normalize:a})},Changes.toggleMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){n=_mark2.default.create(n);var r=o.normalize,a=void 0===r||r;e.state.document.getActiveMarksAtRange(t).some(function(e){return e.equals(n)})?e.removeMarkAtRange(t,n,{normalize:a}):e.addMarkAtRange(t,n,{normalize:a})}},Changes.unwrapBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_node2.default.createProperties(n);var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=s.getBlocksAtRange(t);d.map(function(e){return s.getClosest(e.key,function(e){return"block"==e.kind&&((null==n.type||e.type==n.type)&&((null==n.isVoid||e.isVoid==n.isVoid)&&!(null!=n.data&&!e.data.isSuperset(n.data))))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var n=t.nodes.first(),o=t.nodes.last(),r=s.getParent(t.key),a=r.nodes.indexOf(t),i=t.nodes.filter(function(e){return d.some(function(t){return e==t||e.hasDescendant(t.key)})}),l=i.first(),y=i.last();if(n==l&&o==y)t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,r.key,a+n,{normalize:!1})}),e.removeNodeByKey(t.key,{normalize:!1});else if(o==y)t.nodes.skipUntil(function(e){return e==l}).forEach(function(t,n){e.moveNodeByKey(t.key,r.key,a+1+n,{normalize:!1})});else if(n==l)t.nodes.takeUntil(function(e){return e==y}).push(y).forEach(function(t,n){e.moveNodeByKey(t.key,r.key,a+n,{normalize:!1})});else{var f=l.getFirstText();e.splitDescendantsByKey(t.key,f.key,0,{normalize:!1}),s=e.state.document,i.forEach(function(t,n){if(0==n){var o=t;t=s.getNextBlock(t.key),e.removeNodeByKey(o.key,{normalize:!1})}e.moveNodeByKey(t.key,r.key,a+1+n,{normalize:!1})})}}),a&&e.normalizeDocument(_core2.default)},Changes.unwrapInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_node2.default.createProperties(n);var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document;s.getTextsAtRange(t).map(function(e){return s.getClosest(e.key,function(e){return!("inline"!=e.kind||null!=n.type&&e.type!=n.type||null!=n.isVoid&&e.isVoid!=n.isVoid||null!=n.data&&!e.data.isSuperset(n.data))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var n=e.state.document.getParent(t.key),o=n.nodes.indexOf(t);t.nodes.forEach(function(t,r){e.moveNodeByKey(t.key,n.key,o+r,{normalize:!1})})}),a&&e.normalizeDocument(_core2.default)},Changes.wrapBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_block2.default.create(n),n=n.set("nodes",n.nodes.clear());var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=s.getBlocksAtRange(t),l=d.first(),y=d.last(),f=void 0,c=void 0,g=void 0;if(1===d.length?(f=s.getParent(l.key),c=d):f=s.getClosest(l.key,function(e){return!!s.getClosest(y.key,function(t){return e==t})}),null==f&&(f=s),null==c){var u=f.nodes.reduce(function(e,t,n){return(t==l||t.hasDescendant(l.key))&&(e[0]=n),(t==y||t.hasDescendant(y.key))&&(e[1]=n),e},[]);g=u[0],c=f.nodes.slice(u[0],u[1]+1)}null==g&&(g=f.nodes.indexOf(c.first())),e.insertNodeByKey(f.key,g,n,{normalize:!1}),c.forEach(function(t,o){e.moveNodeByKey(t.key,n.key,o,{normalize:!1})}),a&&e.normalizeNodeByKey(f.key,_core2.default)},Changes.wrapInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e.state,a=r.document,i=o.normalize,s=void 0===i||i,d=t.startKey,l=t.startOffset,y=t.endKey,f=t.endOffset;if(t.isCollapsed){var c=a.getClosestInline(d);if(!c.isVoid)return;return e.wrapInlineByKey(c.key,n,o)}n=_inline2.default.create(n),n=n.set("nodes",n.nodes.clear());var g=a.getBlocksAtRange(t),u=a.getClosestBlock(d),k=a.getClosestBlock(y),m=u.getFurthestAncestor(d),v=k.getFurthestAncestor(y);e.splitDescendantsByKey(v.key,y,f,{normalize:!1}),e.splitDescendantsByKey(m.key,d,l,{normalize:!1}),a=e.state.document,u=a.getDescendant(u.key),k=a.getDescendant(k.key),m=u.getFurthestAncestor(d),v=k.getFurthestAncestor(y);var h=u.nodes.indexOf(m),B=k.nodes.indexOf(v);if(u==k){a=e.state.document,u=a.getClosestBlock(d),m=u.getFurthestAncestor(d);var z=a.getNextSibling(m.key),K=u.nodes.indexOf(z),A=d==y?z:u.getFurthestAncestor(y),C=u.nodes.skipUntil(function(e){return e==z}).takeUntil(function(e){return e==A}).push(A),p=n.regenerateKey();e.insertNodeByKey(u.key,K,p,{normalize:!1}),C.forEach(function(t,n){e.moveNodeByKey(t.key,p.key,n,{normalize:!1})}),s&&e.normalizeNodeByKey(u.key,_core2.default)}else{var x=u.nodes.slice(h+1),N=k.nodes.slice(0,B+1),R=n.regenerateKey(),O=n.regenerateKey();e.insertNodeByKey(u.key,h-1,R,{normalize:!1}),e.insertNodeByKey(k.key,B,O,{normalize:!1}),x.forEach(function(t,n){e.moveNodeByKey(t.key,R.key,n,{normalize:!1})}),N.forEach(function(t,n){e.moveNodeByKey(t.key,O.key,n,{normalize:!1})}),s&&e.normalizeNodeByKey(u.key,_core2.default).normalizeNodeByKey(k.key,_core2.default),g.slice(1,-1).forEach(function(t){var o=n.regenerateKey();e.insertNodeByKey(t.key,0,o,{normalize:!1}),t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,o.key,n,{normalize:!1})}),s&&e.normalizeNodeByKey(t.key,_core2.default)})}},Changes.wrapTextAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=r.normalize,i=void 0===a||a,s=t.startKey,d=t.endKey,l=t.collapseToStart(),y=t.collapseToEnd();s==d&&(y=y.move(n.length)),e.insertTextAtRange(l,n,[],{normalize:i}),e.insertTextAtRange(y,o,[],{normalize:i})},exports.default=Changes},{"../models/block":214,"../models/inline":220,"../models/mark":221,"../models/node":222,"../schemas/core":232,"../utils/string":237}],206:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("../models/node"),_node2=_interopRequireDefault(_node),_core=require("../schemas/core"),_core2=_interopRequireDefault(_core),Changes={};Changes.addMarkByKey=function(e,t,a,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};n=_mark2.default.create(n);var i=r.normalize,d=void 0===i||i,y=e.state,s=y.document,l=s.getPath(t),m=s.getNode(t),u=m.getRanges(),g=[],c=a,f=a+o,v=0;if(u.forEach(function(e){var t=v,a=t+e.text.length;if(v+=e.text.length,!(a<c||f<t||e.marks.has(n))){var o=Math.max(t,c),r=Math.min(a,f);g.push({type:"add_mark",path:l,offset:o,length:r-o,mark:n})}}),e.applyOperations(g),d){var h=s.getParent(t);e.normalizeNodeByKey(h.key,_core2.default)}},Changes.insertFragmentByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=n.normalize,i=void 0===r||r;o.nodes.forEach(function(o,n){e.insertNodeByKey(t,a+n,o)}),i&&e.normalizeNodeByKey(t,_core2.default)},Changes.insertNodeByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=n.normalize,i=void 0===r||r,d=e.state,y=d.document,s=y.getPath(t);e.applyOperation({type:"insert_node",path:[].concat(_toConsumableArray(s),[a]),node:o}),i&&e.normalizeNodeByKey(t,_core2.default)},Changes.insertTextByKey=function(e,t,a,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=r.normalize,d=void 0===i||i,y=e.state,s=y.document,l=s.getPath(t),m=s.getNode(t);if(n=n||m.getMarksAtIndex(a),e.applyOperation({type:"insert_text",path:l,offset:a,text:o,marks:n}),d){var u=s.getParent(t);e.normalizeNodeByKey(u.key,_core2.default)}},Changes.mergeNodeByKey=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.normalize,n=void 0===o||o,r=e.state,i=r.document,d=i.getPath(t),y=i.getPreviousSibling(t);if(!y)throw new Error('Unable to merge node with key "'+t+'", no previous key.');var s="text"==y.kind?y.text.length:y.nodes.size;if(e.applyOperation({type:"merge_node",path:d,position:s}),n){var l=i.getParent(t);e.normalizeNodeByKey(l.key,_core2.default)}},Changes.moveNodeByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=n.normalize,i=void 0===r||r,d=e.state,y=d.document,s=y.getPath(t),l=y.getPath(a);if(e.applyOperation({type:"move_node",path:s,newPath:[].concat(_toConsumableArray(l),[o])}),i){var m=y.getCommonAncestor(t,a);e.normalizeNodeByKey(m.key,_core2.default)}},Changes.removeMarkByKey=function(e,t,a,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};n=_mark2.default.create(n);var i=r.normalize,d=void 0===i||i,y=e.state,s=y.document,l=s.getPath(t),m=s.getNode(t),u=m.getRanges(),g=[],c=a,f=a+o,v=0;if(u.forEach(function(e){var t=v,a=t+e.text.length;if(v+=e.text.length,!(a<c||f<t)&&e.marks.has(n)){var o=Math.max(t,c),r=Math.min(a,f);g.push({type:"remove_mark",path:l,offset:o,length:r-o,mark:n})}}),e.applyOperations(g),d){var h=s.getParent(t);e.normalizeNodeByKey(h.key,_core2.default)}},Changes.removeNodeByKey=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.normalize,n=void 0===o||o,r=e.state,i=r.document,d=i.getPath(t),y=i.getNode(t);if(e.applyOperation({type:"remove_node",path:d,node:y}),n){var s=i.getParent(t);e.normalizeNodeByKey(s.key,_core2.default)}},Changes.removeTextByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=n.normalize,i=void 0===r||r,d=e.state,y=d.document,s=y.getPath(t),l=y.getNode(t),m=l.getRanges(),u=l.text,g=[],c=a,f=a+o,v=0;if(m.forEach(function(e){var t=v,a=t+e.text.length;if(v+=e.text.length,!(a<c||f<t)){var o=Math.max(t,c),n=Math.min(a,f),r=u.slice(o,n);g.push({type:"remove_text",path:s,offset:o,text:r,marks:e.marks})}}),e.applyOperations(g.reverse()),i){var h=y.getClosestBlock(t);e.normalizeNodeByKey(h.key,_core2.default)}},Changes.setMarkByKey=function(e,t,a,o,n,r){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};n=_mark2.default.create(n),r=_mark2.default.createProperties(r);var d=i.normalize,y=void 0===d||d,s=e.state,l=s.document,m=l.getPath(t);if(e.applyOperation({type:"set_mark",path:m,offset:a,length:o,mark:n,properties:r}),y){var u=l.getParent(t);e.normalizeNodeByKey(u.key,_core2.default)}},Changes.setNodeByKey=function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a=_node2.default.createProperties(a);var n=o.normalize,r=void 0===n||n,i=e.state,d=i.document,y=d.getPath(t),s=d.getNode(t);e.applyOperation({type:"set_node",path:y,node:s,properties:a}),r&&e.normalizeNodeByKey(s.key,_core2.default)},Changes.splitNodeByKey=function(e,t,a){
var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=o.normalize,r=void 0===n||n,i=e.state,d=i.document,y=d.getPath(t);if(e.applyOperation({type:"split_node",path:y,position:a}),r){var s=d.getParent(t);e.normalizeNodeByKey(s.key,_core2.default)}},Changes.splitDescendantsByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t==a)return void e.splitNodeByKey(a,o,n);var r=n.normalize,i=void 0===r||r,d=e.state,y=d.document,s=y.getNode(a),l=y.getAncestors(a),m=l.skipUntil(function(e){return e.key==t}).reverse().unshift(s),u=void 0;if(m.forEach(function(t){var a=u?t.nodes.indexOf(u)+1:o;u=t,e.splitNodeByKey(t.key,a,{normalize:!1})}),i){var g=y.getParent(t);e.normalizeNodeByKey(g.key,_core2.default)}},Changes.unwrapInlineByKey=function(e,t,a,o){var n=e.state,r=n.document,i=n.selection,d=r.assertDescendant(t),y=d.getFirstText(),s=d.getLastText(),l=i.moveToRangeOf(y,s);e.unwrapInlineAtRange(l,a,o)},Changes.unwrapBlockByKey=function(e,t,a,o){var n=e.state,r=n.document,i=n.selection,d=r.assertDescendant(t),y=d.getFirstText(),s=d.getLastText(),l=i.moveToRangeOf(y,s);e.unwrapBlockAtRange(l,a,o)},Changes.unwrapNodeByKey=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.normalize,n=void 0===o||o,r=e.state,i=r.document,d=i.getParent(t),y=d.getChild(t),s=d.nodes.indexOf(y),l=0===s,m=s===d.nodes.size-1,u=i.getParent(d.key),g=u.nodes.indexOf(d);1===d.nodes.size?(e.moveNodeByKey(t,u.key,g,{normalize:!1}),e.removeNodeByKey(d.key,a)):l?e.moveNodeByKey(t,u.key,g,a):m?e.moveNodeByKey(t,u.key,g+1,a):(e.splitNodeByKey(d.key,s,{normalize:!1}),e.moveNodeByKey(t,u.key,g+1,{normalize:!1}),n&&e.normalizeNodeByKey(u.key,_core2.default))},Changes.wrapInlineByKey=function(e,t,a,o){a=_inline2.default.create(a),a=a.set("nodes",a.nodes.clear());var n=e.state.document,r=n.assertDescendant(t),i=n.getParent(r.key),d=i.nodes.indexOf(r);e.insertNodeByKey(i.key,d,a,{normalize:!1}),e.moveNodeByKey(r.key,a.key,0,o)},Changes.wrapBlockByKey=function(e,t,a,o){a=_block2.default.create(a),a=a.set("nodes",a.nodes.clear());var n=e.state.document,r=n.assertDescendant(t),i=n.getParent(r.key),d=i.nodes.indexOf(r);e.insertNodeByKey(i.key,d,a,{normalize:!1}),e.moveNodeByKey(r.key,a.key,0,o)},exports.default=Changes},{"../models/block":214,"../models/inline":220,"../models/mark":221,"../models/node":222,"../schemas/core":232}],207:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_atCurrentRange=require("./at-current-range"),_atCurrentRange2=_interopRequireDefault(_atCurrentRange),_atRange=require("./at-range"),_atRange2=_interopRequireDefault(_atRange),_byKey=require("./by-key"),_byKey2=_interopRequireDefault(_byKey),_normalize=require("./normalize"),_normalize2=_interopRequireDefault(_normalize),_onHistory=require("./on-history"),_onHistory2=_interopRequireDefault(_onHistory),_onSelection=require("./on-selection"),_onSelection2=_interopRequireDefault(_onSelection),_onState=require("./on-state"),_onState2=_interopRequireDefault(_onState);exports.default=_extends({},_atCurrentRange2.default,_atRange2.default,_byKey2.default,_normalize2.default,_onHistory2.default,_onSelection2.default,_onState2.default)},{"./at-current-range":204,"./at-range":205,"./by-key":206,"./normalize":208,"./on-history":209,"./on-selection":210,"./on-state":211}],208:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function normalizeNodeAndChildren(e,n,a){if("text"==n.kind)return void normalizeNode(e,n,a);for(var t=n.nodes.toArray().map(function(e){return e.key});t.length;)!function(){for(var o=e.operations.length,r=void 0,i=(new _immutable.Set).asMutable();r=t[0];){var u=n.getChild(r);normalizeNodeAndChildren(e,u,a),i.add(r),t.shift()}i=i.asImmutable(),e.operations.length!=o&&(n=refindNode(e,n),n.nodes.forEach(function(e){i.has(e.key)||t.unshift(e.key)}))}();n&&normalizeNode(e,n,a)}function refindNode(e,n){var a=e.state,t=a.document;return"document"==n.kind?t:t.getDescendant(n.key)}function normalizeNode(e,n,a){function t(e,n){var i=n.validate(a);if(i){var u=i.value;if(i.rule.normalize(e,n,u),n=refindNode(e,n)){if(++r>o)throw new Error("A schema rule could not be validated after sufficient iterations. This is usually due to a `rule.validate` or `rule.normalize` function of a schema being incorrectly written, causing an infinite loop.");t(e,n)}}}var o=a.rules.length,r=0;t(e,n)}function assertSchema(e){if(!_schema2.default.isSchema(e))throw null==e?new Error("You must pass a `schema` object."):new Error("You passed an invalid `schema` object: "+e+".")}Object.defineProperty(exports,"__esModule",{value:!0});var _immutable=window.Immutable,_schema=require("../models/schema"),_schema2=_interopRequireDefault(_schema),Changes={};Changes.normalize=function(e,n){e.normalizeDocument(n)},Changes.normalizeDocument=function(e,n){var a=e.state,t=a.document;e.normalizeNodeByKey(t.key,n)},Changes.normalizeNodeByKey=function(e,n,a){if(assertSchema(a),a.hasValidators){normalizeNodeAndChildren(e,e.state.document.assertNode(n),a)}},exports.default=Changes},{"../models/schema":224}],209:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _invert=require("../operations/invert"),_invert2=_interopRequireDefault(_invert),Changes={};Changes.redo=function(e){var t=e.state,s=t,r=s.history;if(r){var o=r,a=o.undos,n=o.redos,i=n.peek();i&&(n=n.pop(),a=a.push(i),i.forEach(function(t){e.applyOperation(t,{save:!1})}),t=e.state,r=r.set("undos",a).set("redos",n),t=t.set("history",r),e.state=t)}},Changes.undo=function(e){var t=e.state,s=t,r=s.history;if(r){var o=r,a=o.undos,n=o.redos,i=a.peek();i&&(a=a.pop(),n=n.push(i),i.slice().reverse().map(_invert2.default).forEach(function(t){e.applyOperation(t,{save:!1})}),t=e.state,r=r.set("undos",a).set("redos",n),t=t.set("history",r),e.state=t)}},exports.default=Changes},{"../operations/invert":231}],210:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var o=[],a=!0,n=!1,s=void 0;try{for(var r,c=e[Symbol.iterator]();!(a=(r=c.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){n=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(n)throw s}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_isEmpty=require("is-empty"),_isEmpty2=_interopRequireDefault(_isEmpty),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_pick=require("lodash/pick"),_pick2=_interopRequireDefault(_pick),_selection=require("../models/selection"),_selection2=_interopRequireDefault(_selection),Changes={};Changes.select=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=_selection2.default.createProperties(t);var a=o.snapshot,n=void 0!==a&&a,s=e.state,r=s.document,c=s.selection,l={},i=c.toJSON(),f=c.merge(t).normalize(r);t=(0,_pick2.default)(f,Object.keys(t));for(var u in t)0==n&&t[u]==i[u]||(l[u]=t[u]);i.anchorPath=null==i.anchorKey?null:r.getPath(i.anchorKey),delete i.anchorKey,l.anchorKey&&(l.anchorPath=null==l.anchorKey?null:r.getPath(l.anchorKey),delete l.anchorKey),i.focusPath=null==i.focusKey?null:r.getPath(i.focusKey),delete i.focusKey,l.focusKey&&(l.focusPath=null==l.focusKey?null:r.getPath(l.focusKey),delete l.focusKey);var d=["anchorPath","anchorOffset","focusPath","focusOffset"].some(function(e){return l.hasOwnProperty(e)});i.marks&&t.marks==i.marks&&d&&(l.marks=null),(0,_isEmpty2.default)(l)||e.applyOperation({type:"set_selection",properties:l,selection:i},n?{skip:!1,merge:!1}:{})},Changes.selectAll=function(e){var t=e.state,o=t.document,a=t.selection,n=a.moveToRangeOf(o);e.select(n)},Changes.snapshotSelection=function(e){var t=e.state,o=t.selection;e.select(o,{snapshot:!0})},Changes.moveTo=function(e,t){_slateDevLogger2.default.deprecate("0.17.0","The `moveTo()` change is deprecated, please use `select()` instead."),e.select(t)},Changes.unsetMarks=function(e){_slateDevLogger2.default.deprecate("0.17.0","The `unsetMarks()` change is deprecated."),e.select({marks:null})},Changes.unsetSelection=function(e){_slateDevLogger2.default.deprecate("0.17.0","The `unsetSelection()` change is deprecated, please use `deselect()` instead."),e.select({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1})};var PROXY_TRANSFORMS=["blur","collapseTo","collapseToAnchor","collapseToEnd","collapseToEndOf","collapseToFocus","collapseToStart","collapseToStartOf","extend","extendTo","extendToEndOf","extendToStartOf","flip","focus","move","moveAnchor","moveAnchorOffsetTo","moveAnchorTo","moveAnchorToEndOf","moveAnchorToStartOf","moveEnd","moveEndOffsetTo","moveEndTo","moveFocus","moveFocusOffsetTo","moveFocusTo","moveFocusToEndOf","moveFocusToStartOf","moveOffsetsTo","moveStart","moveStartOffsetTo","moveStartTo","moveToEnd","moveToEndOf","moveToRangeOf","moveToStart","moveToStartOf","deselect"];PROXY_TRANSFORMS.forEach(function(e){Changes[e]=function(t){for(var o=arguments.length,a=Array(o>1?o-1:0),n=1;n<o;n++)a[n-1]=arguments[n];var s="deselect"!=e,r=t.state,c=r.document,l=r.selection,i=l[e].apply(l,a);s&&(i=i.normalize(c)),t.select(i)}});var PREFIXES=["moveTo","collapseTo","extendTo"],DIRECTIONS=["Next","Previous"],KINDS=["Block","Inline","Text"];PREFIXES.forEach(function(e){var t=["Start","End"];"moveTo"==e&&t.push("Range"),t.forEach(function(t){DIRECTIONS.forEach(function(o){KINDS.forEach(function(a){var n="get"+o+a,s="get"+a+"sAtRange",r="Next"==o?"last":"first",c=""+e+t+"Of";Changes[""+c+o+a]=function(e){var t=e.state,o=t.document,a=t.selection,l=o[s](a),i=l[r](),f=o[n](i.key);if(f){var u=a[c](f);e.select(u)}}})})})});var DEPRECATED_TRANSFORMS=[["extendBackward","extend","The `extendBackward(n)` change is deprecated, please use `extend(n)` instead with a negative offset."],["extendForward","extend","The `extendForward(n)` change is deprecated, please use `extend(n)` instead."],["moveBackward","move","The `moveBackward(n)` change is deprecated, please use `move(n)` instead with a negative offset."],["moveForward","move","The `moveForward(n)` change is deprecated, please use `move(n)` instead."],["moveStartOffset","moveStart","The `moveStartOffset(n)` change is deprecated, please use `moveStart(n)` instead."],["moveEndOffset","moveEnd","The `moveEndOffset(n)` change is deprecated, please use `moveEnd()` instead."],["moveToOffsets","moveOffsetsTo","The `moveToOffsets()` change is deprecated, please use `moveOffsetsTo()` instead."],["flipSelection","flip","The `flipSelection()` change is deprecated, please use `flip()` instead."]];DEPRECATED_TRANSFORMS.forEach(function(e){var t=_slicedToArray(e,3),o=t[0],a=t[1],n=t[2];Changes[o]=function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),s=1;s<t;s++)o[s-1]=arguments[s];_slateDevLogger2.default.deprecate("0.17.0",n);var r=e.state,c=r.document,l=r.selection,i=l[a].apply(l,o).normalize(c);e.select(i)}}),exports.default=Changes},{"../models/selection":225,"is-empty":56,"lodash/pick":190,"slate-dev-logger":200}],211:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Changes={};Changes.setData=function(e,t){var a=e.state,s=a.data;e.applyOperation({type:"set_data",properties:t,data:s})},exports.default=Changes},{}],212:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MODEL_TYPES={BLOCK:"@@__SLATE_BLOCK__@@",CHANGE:"@@__SLATE_CHANGE__@@",CHARACTER:"@@__SLATE_CHARACTER__@@",DOCUMENT:"@@__SLATE_DOCUMENT__@@",HISTORY:"@@__SLATE_HISTORY__@@",INLINE:"@@__SLATE_INLINE__@@",MARK:"@@__SLATE_MARK__@@",RANGE:"@@__SLATE_RANGE__@@",SCHEMA:"@@__SLATE_SCHEMA__@@",SELECTION:"@@__SLATE_SELECTION__@@",STACK:"@@__SLATE_STACK__@@",STATE:"@@__SLATE_STATE__@@",TEXT:"@@__SLATE_TEXT__@@"};exports.default=MODEL_TYPES},{}],213:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setKeyGenerator=exports.resetKeyGenerator=exports.Changes=exports.Text=exports.State=exports.Stack=exports.Selection=exports.Schema=exports.Range=exports.Operations=exports.Node=exports.Mark=exports.Inline=exports.History=exports.Document=exports.Data=exports.Character=exports.Block=void 0;var _block=require("./models/block"),_block2=_interopRequireDefault(_block),_character=require("./models/character"),_character2=_interopRequireDefault(_character),_data=require("./models/data"),_data2=_interopRequireDefault(_data),_document=require("./models/document"),_document2=_interopRequireDefault(_document),_history=require("./models/history"),_history2=_interopRequireDefault(_history),_inline=require("./models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("./models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("./models/node"),_node2=_interopRequireDefault(_node),_schema=require("./models/schema"),_schema2=_interopRequireDefault(_schema),_selection=require("./models/selection"),_selection2=_interopRequireDefault(_selection),_stack=require("./models/stack"),_stack2=_interopRequireDefault(_stack),_state=require("./models/state"),_state2=_interopRequireDefault(_state),_text=require("./models/text"),_text2=_interopRequireDefault(_text),_range=require("./models/range"),_range2=_interopRequireDefault(_range),_operations=require("./operations"),_operations2=_interopRequireDefault(_operations),_changes=require("./changes"),_changes2=_interopRequireDefault(_changes),_generateKey=require("./utils/generate-key");exports.Block=_block2.default,exports.Character=_character2.default,exports.Data=_data2.default,exports.Document=_document2.default,exports.History=_history2.default,exports.Inline=_inline2.default,exports.Mark=_mark2.default,exports.Node=_node2.default,exports.Operations=_operations2.default,exports.Range=_range2.default,exports.Schema=_schema2.default,exports.Selection=_selection2.default,exports.Stack=_stack2.default,exports.State=_state2.default,exports.Text=_text2.default,exports.Changes=_changes2.default,exports.resetKeyGenerator=_generateKey.resetKeyGenerator,exports.setKeyGenerator=_generateKey.setKeyGenerator,exports.default={Block:_block2.default,Character:_character2.default,Data:_data2.default,Document:_document2.default,History:_history2.default,Inline:_inline2.default,Mark:_mark2.default,Node:_node2.default,Operations:_operations2.default,Range:_range2.default,Schema:_schema2.default,Selection:_selection2.default,Stack:_stack2.default,State:_state2.default,Text:_text2.default,Changes:_changes2.default,resetKeyGenerator:_generateKey.resetKeyGenerator,setKeyGenerator:_generateKey.setKeyGenerator}},{"./changes":207,"./models/block":214,"./models/character":216,"./models/data":217,"./models/document":218,"./models/history":219,"./models/inline":220,"./models/mark":221,"./models/node":222,"./models/range":223,"./models/schema":224,"./models/selection":225,"./models/stack":226,"./models/state":227,"./models/text":228,"./operations":230,"./utils/generate-key":233}],214:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();require("./document");var _isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_node=require("./node"),_node2=_interopRequireDefault(_node),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),DEFAULTS={data:new _immutable.Map,isVoid:!1,key:void 0,nodes:new _immutable.List,type:void 0},Block=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={data:this.data.toJSON(),key:this.key,kind:this.kind,isVoid:this.isVoid,type:this.type,nodes:this.nodes.toArray().map(function(t){return t.toJSON(e)})};return e.preserveKeys||delete t.key,t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"kind",get:function(){return"block"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isBlock(e))return e;if("string"==typeof e&&(e={type:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e)){return new _immutable.List(e.map(t.create))}throw new Error("`Block.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isBlock(e))return e;var r=e.data,o=void 0===r?{}:r,n=e.isVoid,i=void 0!==n&&n,u=e.key,a=void 0===u?(0,_generateKey2.default)():u,s=e.type,l=e.nodes,c=void 0===l?[]:l;if("string"!=typeof s)throw new Error("`Block.fromJSON` requires a `type` string.");return 0==c.length&&(c=[{kind:"text",text:""}]),new t({key:a,type:s,isVoid:!!i,data:new _immutable.Map(o),nodes:new _immutable.List(c.map(_node2.default.fromJSON))})}},{key:"isBlock",value:function(e){return!(!e||!e[_modelTypes2.default.BLOCK])}},{key:"isBlockList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isBlock(e)})}}]),t}((0,_immutable.Record)(DEFAULTS));Block.fromJS=Block.fromJSON,Block.prototype[_modelTypes2.default.BLOCK]=!0,Object.getOwnPropertyNames(_node2.default.prototype).forEach(function(e){"constructor"!=e&&(Block.prototype[e]=_node2.default.prototype[e])}),exports.default=Block},{"../constants/model-types":212,"../utils/generate-key":233,"./document":218,"./node":222,"is-plain-object":57}],215:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_pick=require("lodash/pick"),_pick2=_interopRequireDefault(_pick),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_changes=require("../changes"),_changes2=_interopRequireDefault(_changes),_apply=require("../operations/apply"),_apply2=_interopRequireDefault(_apply),debug=(0,_debug2.default)("slate:change"),Change=function(){function e(t){_classCallCheck(this,e);var a=t.state;this.state=a,this.operations=[],this.flags=(0,_pick2.default)(t,["merge","save"])}return _createClass(e,null,[{key:"isChange",value:function(e){return!(!e||!e[_modelTypes2.default.CHANGE])}}]),_createClass(e,[{key:"applyOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.operations,n=this.flags,r=this.state,s=r,o=s.history;t=_extends({},n,t);var i=t,l=i.merge,u=void 0===l?0!=a.length||null:l,c=i.save,p=void 0===c||c,h=i.skip,d=void 0===h?null:h;return debug("apply",{operation:e,save:p,merge:u}),r=(0,_apply2.default)(r,e),o&&p&&(o=o.save(e,{merge:u,skip:d}),r=r.set("history",o)),this.state=r,this.operations.push(e),this}},{key:"applyOperations",value:function(e,t){var a=this;return e.forEach(function(e){return a.applyOperation(e,t)}),this}},{key:"call",value:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return e.apply(void 0,[this].concat(a)),this}},{key:"setOperationFlag",value:function(e,t){return this.flags[e]=t,this}},{key:"unsetOperationFlag",value:function(e){return delete this.flags[e],this}},{key:"apply",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _slateDevLogger2.default.deprecate("0.22.0","The `change.apply()` method is deprecrated and no longer necessary, as all operations are applied immediately when invoked. You can access the change's state, which is already pre-computed, directly via `change.state` instead."),this.state}},{key:"kind",get:function(){return"change"}}]),e}();Change.prototype[_modelTypes2.default.CHANGE]=!0,Object.keys(_changes2.default).forEach(function(e){Change.prototype[e]=function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return debug(e,{args:a}),this.call.apply(this,[_changes2.default[e]].concat(a)),this}}),["hasUndos","hasRedos","isBlurred","isFocused","isCollapsed","isExpanded","isBackward","isForward","startKey","endKey","startOffset","endOffset","anchorKey","focusKey","anchorOffset","focusOffset","startBlock","endBlock","anchorBlock","focusBlock","startInline","endInline","anchorInline","focusInline","startText","endText","anchorText","focusText","characters","marks","blocks","fragment","inlines","texts","isEmpty"].forEach(function(e){Object.defineProperty(Change.prototype,e,{get:function(){return _slateDevLogger2.default.deprecate("0.22.0","You attempted to access the `"+e+"` property of what was previously a `state` object but is now a `change` object. This syntax has been deprecated as plugins are now passed `change` objects instead of `state` objects."),this.state[e]}})}),Change.prototype.transform=function(){return _slateDevLogger2.default.deprecate("0.22.0","You attempted to call `.transform()` on what was previously a `state` object but is now already a `change` object. This syntax has been deprecated as plugins are now passed `change` objects instead of `state` objects."),this},exports.default=Change},{"../changes":207,"../constants/model-types":212,"../operations/apply":229,debug:201,"lodash/pick":190,"slate-dev-logger":200}],216:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),DEFAULTS={marks:new _immutable.Set,text:""},Character=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){return{kind:this.kind,marks:this.marks.toArray().map(function(e){return e.toJSON()}),text:this.text}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"character"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isCharacter(e))return e;if("string"==typeof e&&(e={text:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Character.create` only accepts objects, strings or characters, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("string"==typeof e&&(e=e.split("")),_immutable.List.isList(e)||Array.isArray(e)){return new _immutable.List(e.map(t.create))}throw new Error("`Block.createList` only accepts strings, arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var r=e.text,a=e.marks,n=void 0===a?[]:a;if("string"!=typeof r)throw new Error("`Character.fromJSON` requires a block `text` string.");return new t({text:r,marks:new _immutable.Set(n)})}},{key:"isCharacter",value:function(e){return!(!e||!e[_modelTypes2.default.CHARACTER])}},{key:"isCharacterList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isCharacter(e)})}},{key:"createListFromText",value:function(e){return _slateDevLogger2.default.deprecate("0.22.0","The `Character.createListFromText(string)` method is deprecated, use `Character.createList(string)` instead."),this.createList(e)}}]),t}((0,_immutable.Record)(DEFAULTS));Character.fromJS=Character.fromJSON,Character.prototype[_modelTypes2.default.CHARACTER]=!0,exports.default=Character},{"../constants/model-types":212,"is-plain-object":57,"slate-dev-logger":200}],217:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,Data=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_immutable.Map.isMap(t))return t;if((0,_isPlainObject2.default)(t))return e.fromJSON(t);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+t)}},{key:"fromJSON",value:function(e){return new _immutable.Map(e)}}]),e}();Data.fromJS=Data.fromJSON,exports.default=Data},{"is-plain-object":57}],218:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();require("./block"),require("./inline");var _isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_node=require("./node"),_node2=_interopRequireDefault(_node),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),DEFAULTS={data:new _immutable.Map,key:void 0,nodes:new _immutable.List},Document=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={data:this.data.toJSON(),key:this.key,kind:this.kind,nodes:this.nodes.toArray().map(function(t){return t.toJSON(e)})};return e.preserveKeys||delete t.key,t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"kind",get:function(){return"document"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isDocument(e))return e;if((_immutable.List.isList(e)||Array.isArray(e))&&(e={nodes:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isDocument(e))return e;var r=e.data,n=void 0===r?{}:r,o=e.key,i=void 0===o?(0,_generateKey2.default)():o,u=e.nodes,a=void 0===u?[]:u;return new t({key:i,data:new _immutable.Map(n),nodes:new _immutable.List(a.map(_node2.default.fromJSON))})}},{key:"isDocument",value:function(e){return!(!e||!e[_modelTypes2.default.DOCUMENT])}}]),t}((0,_immutable.Record)(DEFAULTS));Document.fromJS=Document.fromJSON,Document.prototype[_modelTypes2.default.DOCUMENT]=!0,Object.getOwnPropertyNames(_node2.default.prototype).forEach(function(e){"constructor"!=e&&(Document.prototype[e]=_node2.default.prototype[e])}),exports.default=Document},{"../constants/model-types":212,"../utils/generate-key":233,"./block":214,"./inline":220,"./node":222,"is-plain-object":57}],219:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function shouldMerge(e,t){return!!t&&("set_selection"==e.type&&"set_selection"==t.type||"insert_text"==e.type&&"insert_text"==t.type&&e.offset==t.offset+t.text.length&&(0,_isEqual2.default)(e.path,t.path)||"remove_text"==e.type&&"remove_text"==t.type&&e.offset+e.text.length==t.offset&&(0,_isEqual2.default)(e.path,t.path))}function shouldSkip(e,t){return!!t&&("set_selection"==e.type&&"set_selection"==t.type)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),debug=(0,_debug2.default)("slate:history"),DEFAULTS={redos:new _immutable.Stack,undos:new _immutable.Stack},History=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,o=r,n=o.undos,i=o.redos,u=t.merge,s=t.skip,l=n.peek(),a=l&&l[l.length-1];if(null==s&&(s=shouldSkip(e,a)),s)return r;if(null==u&&(u=shouldMerge(e,a)),debug("save",{operation:e,merge:u}),u){var c=l.slice();c.push(e),n=n.pop(),n=n.push(c)}else{var f=[e];n=n.push(f)}return n.length>100&&(n=n.take(100)),i=i.clear(),r=r.set("undos",n).set("redos",i)}},{key:"toJSON",value:function(){return{kind:this.kind,redos:this.redos.toJSON(),undos:this.undos.toJSON()}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"history"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isHistory(e))return e;if((0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`History.create` only accepts objects or histories, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var r=e.redos,o=void 0===r?[]:r,n=e.undos,i=void 0===n?[]:n;return new t({redos:new _immutable.Stack(o),undos:new _immutable.Stack(i)})}},{key:"isHistory",value:function(e){return!(!e||!e[_modelTypes2.default.HISTORY])}}]),t}((0,_immutable.Record)(DEFAULTS));History.fromJS=History.fromJSON,History.prototype[_modelTypes2.default.HISTORY]=!0,exports.default=History},{"../constants/model-types":212,debug:201,"is-plain-object":57,"lodash/isEqual":181}],220:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();require("./document");var _isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_node=require("./node"),_node2=_interopRequireDefault(_node),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),DEFAULTS={data:new _immutable.Map,isVoid:!1,key:void 0,nodes:new _immutable.List,type:void 0},Inline=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={data:this.data.toJSON(),key:this.key,kind:this.kind,isVoid:this.isVoid,type:this.type,nodes:this.nodes.toArray().map(function(t){return t.toJSON(e)})};return e.preserveKeys||delete t.key,t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"kind",get:function(){return"inline"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isInline(e))return e;if("string"==typeof e&&(e={type:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e)){return new _immutable.List(e.map(t.create))}throw new Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isInline(e))return e;var n=e.data,r=void 0===n?{}:n,i=e.isVoid,o=void 0!==i&&i,u=e.key,a=void 0===u?(0,_generateKey2.default)():u,s=e.type,l=e.nodes,c=void 0===l?[]:l;if("string"!=typeof s)throw new Error("`Inline.fromJS` requires a `type` string.");return 0==c.length&&(c=[{kind:"text",text:""}]),new t({key:a,type:s,isVoid:!!o,data:new _immutable.Map(r),nodes:new _immutable.List(c.map(_node2.default.fromJSON))})}},{key:"isInline",value:function(e){return!(!e||!e[_modelTypes2.default.INLINE])}},{key:"isInlineList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isInline(e)})}}]),t}((0,_immutable.Record)(DEFAULTS));Inline.fromJS=Inline.fromJSON,Inline.prototype[_modelTypes2.default.INLINE]=!0,Object.getOwnPropertyNames(_node2.default.prototype).forEach(function(e){"constructor"!=e&&(Inline.prototype[e]=_node2.default.prototype[e])}),exports.default=Inline},{"../constants/model-types":212,"../utils/generate-key":233,"./document":218,"./node":222,"is-plain-object":57}],221:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_data=require("./data"),_data2=_interopRequireDefault(_data),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize),DEFAULTS={data:new _immutable.Map,type:void 0},Mark=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getComponent",value:function(e){return e.__getComponent(this)}},{key:"toJSON",value:function(){return{data:this.data.toJSON(),kind:this.kind,type:this.type}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"mark"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return e;if("string"==typeof e&&(e={type:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"createSet",value:function(e){if(_immutable.Set.isSet(e)||Array.isArray(e)){return new _immutable.Set(e.map(t.create))}if(null==e)return new _immutable.Set;throw new Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return{data:e.data,type:e.type};if("string"==typeof e)return{type:e};if((0,_isPlainObject2.default)(e)){var r={};return"type"in e&&(r.type=e.type),"data"in e&&(r.data=_data2.default.create(e.data)),r}throw new Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var r=e.data,n=void 0===r?{}:r,a=e.type;if("string"!=typeof a)throw new Error("`Mark.fromJS` requires a `type` string.");return new t({type:a,data:new _immutable.Map(n)})}},{key:"isMark",value:function(e){return!(!e||!e[_modelTypes2.default.MARK])}},{key:"isMarkSet",value:function(e){return _immutable.Set.isSet(e)&&e.every(function(e){return t.isMark(e)})}}]),t}((0,_immutable.Record)(DEFAULTS));Mark.fromJS=Mark.fromJSON,Mark.prototype[_modelTypes2.default.MARK]=!0,(0,_memoize2.default)(Mark.prototype,["getComponent"],{takesArguments:!0}),exports.default=Mark},{"../constants/model-types":212,"../utils/memoize":236,"./data":217,"is-plain-object":57}],222:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function normalizeKey(e){if("string"==typeof e)return e;if(_slateDevLogger2.default.deprecate("0.14.0","An object was passed to a Node method instead of a `key` string. This was previously supported, but is being deprecated because it can have a negative impact on performance. The object in question was:",e),Node.isNode(e))return e.key;throw new Error("Invalid `key` argument! It must be either a block, an inline, a text, or a string. You passed: "+e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_direction=require("direction"),_direction2=_interopRequireDefault(_direction),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_immutable=window.Immutable,_block=require("./block"),_block2=_interopRequireDefault(_block),_data=require("./data"),_data2=_interopRequireDefault(_data),_document=require("./document"),_document2=_interopRequireDefault(_document),_inline=require("./inline"),_inline2=_interopRequireDefault(_inline),_text=require("./text"),_text2=_interopRequireDefault(_text),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_isIndexInRange=require("../utils/is-index-in-range"),_isIndexInRange2=_interopRequireDefault(_isIndexInRange),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize),Node=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"areDescendantsSorted",value:function(e,t){e=normalizeKey(e),t=normalizeKey(t);var n=void 0;return this.forEachDescendant(function(r){return r.key===e?(n=!0,!1):r.key===t?(n=!1,!1):void 0}),n}},{key:"assertChild",value:function(e){var t=this.getChild(e);if(!t)throw e=normalizeKey(e),new Error('Could not find a child node with key "'+e+'".');return t}},{key:"assertDescendant",value:function(e){var t=this.getDescendant(e);if(!t)throw e=normalizeKey(e),new Error('Could not find a descendant node with key "'+e+'".');return t}},{key:"assertNode",value:function(e){var t=this.getNode(e);if(!t)throw e=normalizeKey(e),new Error('Could not find a node with key "'+e+'".');return t}},{key:"assertPath",value:function(e){var t=this.getDescendantAtPath(e);if(!t)throw new Error('Could not find a descendant at path "'+e+'".');return t}},{key:"filterDescendants",value:function(e){var t=[];return this.forEachDescendant(function(n,r,s){e(n,r,s)&&t.push(n)}),(0,_immutable.List)(t)}},{key:"findDescendant",value:function(e){var t=null;return this.forEachDescendant(function(n,r,s){if(e(n,r,s))return t=n,!1}),t}},{key:"forEachDescendant",value:function(e){var t=void 0;return this.nodes.forEach(function(n,r,s){return!1===e(n,r,s)?(t=!1,!1):"text"!=n.kind?t=n.forEachDescendant(e):void 0}),t}},{key:"getAncestors",value:function(e){if((e=normalizeKey(e))==this.key)return(0,_immutable.List)();if(this.hasChild(e))return(0,_immutable.List)([this]);var t=void 0;return this.nodes.find(function(n){return"text"!=n.kind&&(t=n.getAncestors(e))}),t?t.unshift(this):null}},{key:"getBlocks",value:function(){var e=this.getBlocksAsArray();return new _immutable.List(e)}},{key:"getBlocksAsArray",value:function(){return this.nodes.reduce(function(e,t){return"block"!=t.kind?e:t.isLeafBlock()?(e.push(t),e):e.concat(t.getBlocksAsArray())},[])}},{key:"getBlocksAtRange",value:function(e){var t=this.getBlocksAtRangeAsArray(e);return new _immutable.List(new _immutable.OrderedSet(t))}},{key:"getBlocksAtRangeAsArray",value:function(e){if(e=e.normalize(this),e.isUnset)return[];var t=e,n=t.startKey,r=t.endKey,s=this.getClosestBlock(n);if(n==r)return[s];var i=this.getClosestBlock(r),a=this.getBlocksAsArray(),o=a.indexOf(s),u=a.indexOf(i);return a.slice(o,u+1)}},{key:"getBlocksByType",value:function(e){var t=this.getBlocksByTypeAsArray(e);return new _immutable.List(t)}},{key:"getBlocksByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,n){return"block"!=n.kind?t:n.isLeafBlock()&&n.type==e?(t.push(n),t):t.concat(n.getBlocksByTypeAsArray(e))},[])}},{key:"getCharacters",value:function(){var e=this.getCharactersAsArray();return new _immutable.List(e)}},{key:"getCharactersAsArray",value:function(){return this.nodes.reduce(function(e,t){return"text"==t.kind?e.concat(t.characters.toArray()):e.concat(t.getCharactersAsArray())},[])}},{key:"getCharactersAtRange",value:function(e){var t=this.getCharactersAtRangeAsArray(e);return new _immutable.List(t)}},{key:"getCharactersAtRangeAsArray",value:function(e){return e=e.normalize(this),e.isUnset?[]:this.getTextsAtRange(e).reduce(function(t,n){var r=n.characters.filter(function(t,r){return(0,_isIndexInRange2.default)(r,n,e)}).toArray();return t.concat(r)},[])}},{key:"getChild",value:function(e){return e=normalizeKey(e),this.nodes.find(function(t){return t.key==e})}},{key:"getClosest",value:function(e,t){e=normalizeKey(e);var n=this.getAncestors(e);if(!n)throw new Error('Could not find a descendant node with key "'+e+'".');return n.rest().findLast(t)}},{key:"getClosestBlock",value:function(e){return this.getClosest(e,function(e){return"block"==e.kind})}},{key:"getClosestInline",value:function(e){return this.getClosest(e,function(e){return"inline"==e.kind})}},{key:"getClosestVoid",value:function(e){return this.getClosest(e,function(e){return e.isVoid})}},{key:"getCommonAncestor",value:function(e,t){if(e=normalizeKey(e),t=normalizeKey(t),e==this.key)return this;if(t==this.key)return this;this.assertDescendant(e),this.assertDescendant(t);for(var n=new _immutable.List,r=this.getParent(e),s=this.getParent(t);r;)n=n.push(r),r=this.getParent(r.key);for(;s;){if(n.includes(s))return s;s=this.getParent(s.key)}}},{key:"getComponent",value:function(e){return e.__getComponent(this)}},{key:"getDecorators",value:function(e){return e.__getDecorators(this)}},{key:"getDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.assertDescendant(e),this.hasChild(e)?t:this.getFurthestAncestor(e).getDepth(e,t+1)}},{key:"getDescendant",value:function(e){e=normalizeKey(e);var t=null,n=this.nodes.find(function(n){return n.key===e?n:"text"!==n.kind&&(t=n.getDescendant(e))});return t||n}},{key:"getDescendantAtPath",value:function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n];if(!t)return;if(!t.nodes)return;t=t.nodes.get(r)}return t}},{key:"getDescendantDecorators",value:function(e,t){if(!t.hasDecorators)return[];for(var n=this.assertDescendant(e),r=this.getFurthestAncestor(e),s=[];r!=n;)s=s.concat(r.getDecorators(t)),r=r.getFurthestAncestor(e);return s=s.concat(n.getDecorators(t))}},{key:"getFirstText",value:function(){var e=null,t=this.nodes.find(function(t){return"text"==t.kind||(e=t.getFirstText())});return e||t}},{key:"getFragmentAtRange",value:function(e){if(e=e.normalize(this),e.isUnset)return _document2.default.create();for(var t=this,n=e,r=n.startKey,s=n.startOffset,i=n.endKey,a=n.endOffset,o=t.assertDescendant(r),u=t.assertDescendant(i),d=o,c=void 0,l=void 0;l=t.getParent(d.key);){var f=l.nodes.indexOf(d),h="text"==d.kind?s:d.nodes.indexOf(c);l=l.splitNode(f,h),t=t.updateNode(l),c=l.nodes.get(f+1),d=l}for(d=u;l=t.getParent(d.key);){var g=l.nodes.indexOf(d),y="text"==d.kind?a:d.nodes.indexOf(c);l=l.splitNode(g,y),t=t.updateNode(l),c=l.nodes.get(g+1),d=l}var k=t.getNextText(r),v=t.getNextSibling(t.getFurthestAncestor(r).key),A=r==i?t.getFurthestAncestor(k.key):t.getFurthestAncestor(i),m=t.nodes.indexOf(v),p=t.nodes.indexOf(A),x=t.nodes.slice(m,p+1);return _document2.default.create({nodes:x})}},{key:"getFurthest",value:function(e,t){var n=this.getAncestors(e);if(!n)throw e=normalizeKey(e),new Error('Could not find a descendant node with key "'+e+'".');return n.rest().find(t)}},{key:"getFurthestBlock",value:function(e){return this.getFurthest(e,function(e){return"block"==e.kind})}},{key:"getFurthestInline",value:function(e){return this.getFurthest(e,function(e){return"inline"==e.kind})}},{key:"getFurthestAncestor",value:function(e){return e=normalizeKey(e),this.nodes.find(function(t){return t.key==e||"text"!=t.kind&&t.hasDescendant(e)})}},{key:"getFurthestOnlyChildAncestor",value:function(e){var t=this.getAncestors(e);if(!t)throw e=normalizeKey(e),new Error('Could not find a descendant node with key "'+e+'".');return t.skipLast().reverse().takeUntil(function(e){return e.nodes.size>1}).last()}},{key:"getInlines",value:function(){var e=this.getInlinesAsArray();return new _immutable.List(e)}},{key:"getInlinesAsArray",value:function(){var e=[];return this.nodes.forEach(function(t){"text"!=t.kind&&(t.isLeafInline()?e.push(t):e=e.concat(t.getInlinesAsArray()))}),e}},{key:"getInlinesAtRange",value:function(e){var t=this.getInlinesAtRangeAsArray(e);return new _immutable.List(new _immutable.OrderedSet(t))}},{key:"getInlinesAtRangeAsArray",value:function(e){var t=this;return e=e.normalize(this),e.isUnset?[]:this.getTextsAtRangeAsArray(e).map(function(e){return t.getClosestInline(e.key)}).filter(function(e){return e})}},{key:"getInlinesByType",value:function(e){var t=this.getInlinesByTypeAsArray(e);return new _immutable.List(t)}},{key:"getInlinesByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,n){return"text"==n.kind?t:n.isLeafInline()&&n.type==e?(t.push(n),t):t.concat(n.getInlinesByTypeAsArray(e))},[])}},{key:"getKeys",value:function(){var e=[];return this.forEachDescendant(function(t){e.push(t.key)}),new _immutable.Set(e)}},{key:"getLastText",value:function(){var e=null,t=this.nodes.findLast(function(t){return"text"==t.kind||(e=t.getLastText())});return e||t}},{key:"getMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.Set(e)}},{key:"getOrderedMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.OrderedSet(e)}},{key:"getMarksAsArray",value:function(){return this.nodes.reduce(function(e,t){return e.concat(t.getMarksAsArray())},[])}},{key:"getMarksAtRange",value:function(e){var t=this.getMarksAtRangeAsArray(e);return new _immutable.Set(t)}},{key:"getOrderedMarksAtRange",value:function(e){var t=this.getMarksAtRangeAsArray(e);return new _immutable.OrderedSet(t)}},{key:"getActiveMarksAtRange",value:function(e){var t=this.getActiveMarksAtRangeAsArray(e);return new _immutable.Set(t)}},{key:"getMarksAtRangeAsArray",value:function(e){if(e=e.normalize(this),e.isUnset)return[];var t=e,n=t.startKey,r=t.startOffset;if(e.isCollapsed&&0==r){var s=this.getPreviousText(n);if(!s||0==s.text.length)return[];return s.characters.get(s.text.length-1).marks.toArray()}if(e.isCollapsed){return this.getDescendant(n).characters.get(e.startOffset-1).marks.toArray()}return this.getCharactersAtRange(e).reduce(function(e,t){return t.marks.toArray().forEach(function(t){return e.push(t)}),e},[])}},{key:"getActiveMarksAtRangeAsArray",value:function(e){if(e=e.normalize(this),e.isUnset)return[];var t=e,n=t.startKey,r=t.startOffset;if(e.isCollapsed&&0==r){var s=this.getPreviousText(n);if(!s||!s.length)return[];return s.characters.get(s.length-1).marks.toArray()}if(e.isCollapsed){return this.getDescendant(n).characters.get(e.startOffset-1).marks.toArray()}var i=this.getCharactersAtRange(e),a=i.first();if(!a)return[];var o=a.marks;return i.slice(1).forEach(function(e){return o=o.intersect(e.marks),0!=o.size}),o.toArray()}},{key:"getMarksByType",value:function(e){var t=this.getMarksByTypeAsArray(e);return new _immutable.Set(t)}},{key:"getOrderedMarksByType",value:function(e){var t=this.getMarksByTypeAsArray(e);return new _immutable.OrderedSet(t)}},{key:"getMarksByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,n){return"text"==n.kind?t.concat(n.getMarksAsArray().filter(function(t){return t.type==e})):t.concat(n.getMarksByTypeAsArray(e))},[])}},{key:"getNextBlock",value:function(e){var t=this.assertDescendant(e),n=void 0;if("block"==t.kind)n=t.getLastText();else{n=this.getClosestBlock(e).getLastText()}var r=this.getNextText(n.key);return r?this.getClosestBlock(r.key):null}},{key:"getNextSibling",value:function(e){e=normalizeKey(e);var t=this.getParent(e),n=t.nodes.skipUntil(function(t){return t.key==e});if(0==n.size)throw new Error('Could not find a child node with key "'+e+'".');return n.get(1)}},{key:"getNextText",value:function(e){return e=normalizeKey(e),this.getTexts().skipUntil(function(t){return t.key==e}).get(1)}},{key:"getNode",value:function(e){return e=normalizeKey(e),this.key==e?this:this.getDescendant(e)}},{key:"getNodeAtPath",value:function(e){return e.length?this.getDescendantAtPath(e):this}},{key:"getOffset",value:function(e){this.assertDescendant(e);var t=this.getFurthestAncestor(e),n=this.nodes.takeUntil(function(e){return e==t}).reduce(function(e,t){return e+t.text.length},0);return this.hasChild(e)?n:n+t.getOffset(e)}},{key:"getOffsetAtRange",value:function(e){if(e=e.normalize(this),e.isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(e.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var t=e,n=t.startKey,r=t.startOffset;return this.getOffset(n)+r}},{key:"getParent",value:function(e){if(this.hasChild(e))return this;var t=null;return this.nodes.find(function(n){return"text"!=n.kind&&(t=n.getParent(e))}),t}},{key:"getPath",value:function(e){var t=this.assertNode(e),n=this.getAncestors(e),r=[];return n.reverse().forEach(function(e){var n=e.nodes.indexOf(t);r.unshift(n),t=e}),r}},{key:"getPreviousBlock",value:function(e){var t=this.assertDescendant(e),n=void 0;if("block"==t.kind)n=t.getFirstText();else{n=this.getClosestBlock(e).getFirstText()}var r=this.getPreviousText(n.key);return r?this.getClosestBlock(r.key):null}},{key:"getPreviousSibling",value:function(e){e=normalizeKey(e);var t=this.getParent(e),n=t.nodes.takeUntil(function(t){return t.key==e});if(n.size==t.nodes.size)throw new Error('Could not find a child node with key "'+e+'".');return n.last()}},{key:"getPreviousText",value:function(e){return e=normalizeKey(e),this.getTexts().takeUntil(function(t){return t.key==e}).last()}},{key:"getSelectionIndexes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.startKey,r=e.endKey;if(!t||e.isBlurred)return null;if(n==r){var s=this.getFurthestAncestor(n),i=s?this.nodes.indexOf(s):null;return{start:i,end:i+1}}var a=null,o=null;return this.nodes.forEach(function(e,t){return"text"==e.kind?(null==a&&e.key==n&&(a=t),null==o&&e.key==r&&(o=t+1)):(null==a&&e.hasDescendant(n)&&(a=t),null==o&&e.hasDescendant(r)&&(o=t+1)),null!=a&&null!=o}),t&&null==a&&(a=0),t&&null==o&&(o=this.nodes.size),null==a?null:{start:a,end:o}}},{key:"getText",value:function(){return this.nodes.reduce(function(e,t){return e+t.text},"")}},{key:"getTextAtOffset",value:function(e){if(0==e)return this.getFirstText();if(e==this.text.length)return this.getLastText();if(e<0||e>this.text.length)return null;var t=0;return this.getTexts().find(function(n,r,s){return(t+=n.text.length)>e})}},{key:"getTextDirection",value:function(){var e=(0,_direction2.default)(this.text);return"neutral"==e?void 0:e}},{key:"getTexts",value:function(){var e=this.getTextsAsArray();return new _immutable.List(e)}},{key:"getTextsAsArray",value:function(){var e=[];return this.nodes.forEach(function(t){"text"==t.kind?e.push(t):e=e.concat(t.getTextsAsArray())}),e}},{key:"getTextsAtRange",value:function(e){var t=this.getTextsAtRangeAsArray(e);return new _immutable.List(t)}},{key:"getTextsAtRangeAsArray",value:function(e){if(e=e.normalize(this),e.isUnset)return[];var t=e,n=t.startKey,r=t.endKey,s=this.getDescendant(n);if(n==r)return[s];var i=this.getDescendant(r),a=this.getTextsAsArray(),o=a.indexOf(s),u=a.indexOf(i);return a.slice(o,u+1)}},{key:"hasChild",value:function(e){return!!this.getChild(e)}},{key:"hasDescendant",value:function(e){return!!this.getDescendant(e)}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"hasVoidParent",value:function(e){return!!this.getClosest(e,function(e){return e.isVoid})}},{key:"insertNode",value:function(e,t){var n=this.getKeys();n.contains(t.key)&&(t=t.regenerateKey()),"text"!=t.kind&&(t=t.mapDescendants(function(e){return n.contains(e.key)?e.regenerateKey():e}));var r=this.nodes.insert(e,t);return this.set("nodes",r)}},{key:"isInRange",value:function(e){e=e.normalize(this);var t=this,n=e,r=n.startKey,s=n.endKey,i=n.isCollapsed;if(t.key==r||t.key==s||t.hasDescendant(r)||t.hasDescendant(s))return!0;if(i)return!1;var a=t.getTextsAtRange(e),o=!1;return a.forEach(function(e){return t.hasDescendant(e.key)&&(o=!0),o}),o}},{key:"isLeafBlock",value:function(){return"block"==this.kind&&this.nodes.every(function(e){return"block"!=e.kind})}},{key:"isLeafInline",value:function(){return"inline"==this.kind&&this.nodes.every(function(e){return"inline"!=e.kind})}},{key:"mergeNode",value:function(e,t){var n=this,r=n.nodes.get(e),s=n.nodes.get(t);if(r.kind!=s.kind)throw new Error('Tried to merge two nodes of different kinds: "'+r.kind+'" and "'+s.kind+'".');if("text"==r.kind){var i=r.characters.concat(s.characters);r=r.set("characters",i)}else{var a=r.nodes.concat(s.nodes);r=r.set("nodes",a)}return n=n.removeNode(t),n=n.removeNode(e),n=n.insertNode(e,r)}},{key:"mapChildren",value:function(e){var t=this,n=this.nodes;return n.forEach(function(r,s){var i=e(r,s,t.nodes);i!=r&&(n=n.set(i.key,i))}),this.set("nodes",n)}},{key:"mapDescendants",value:function(e){var t=this,n=this.nodes;return n.forEach(function(r,s){var i=r;if("text"!=i.kind&&(i=i.mapDescendants(e)),(i=e(i,s,t.nodes))!=r){var a=n.indexOf(r);n=n.set(a,i)}}),this.set("nodes",n)}},{key:"regenerateKey",value:function(){var e=(0,_generateKey2.default)();return this.set("key",e)}},{key:"removeDescendant",value:function(e){e=normalizeKey(e);var t=this,n=t.getParent(e);if(!n)throw new Error('Could not find a descendant node with key "'+e+'".');var r=n.nodes.findIndex(function(t){return t.key===e}),s=n.nodes.splice(r,1);return n=n.set("nodes",s),t=t.updateNode(n)}},{key:"removeNode",value:function(e){var t=this.nodes.splice(e,1);return this.set("nodes",t)}},{key:"splitNode",value:function(e,t){var n=this,r=n.nodes.get(e),s=void 0,i=void 0;if("text"==r.kind){var a=r.characters.take(t),o=r.characters.skip(t);s=r.set("characters",a),i=r.set("characters",o).regenerateKey()}else{var u=r.nodes.take(t),d=r.nodes.skip(t);s=r.set("nodes",u),i=r.set("nodes",d).regenerateKey()}return n=n.removeNode(e),n=n.insertNode(e,i),n=n.insertNode(e,s)}},{key:"updateNode",value:function(e){if(e.key==this.key)return e;var t=this.assertDescendant(e.key);return this.getAncestors(e.key).reverse().forEach(function(n){var r=n,s=r.nodes,i=s.indexOf(t);t=n,s=s.set(i,e),n=n.set("nodes",s),e=n}),e}},{key:"validate",value:function(e){return e.__validate(this)}},{key:"areDescendantSorted",value:function(e,t){return _slateDevLogger2.default.deprecate("0.19.0","The Node.areDescendantSorted(first, second) method is deprecated, please use `Node.areDescendantsSorted(first, second) instead."),this.areDescendantsSorted(e,t)}},{key:"concatChildren",value:function(e){return _slateDevLogger2.default.deprecate("0.19.0","The `Node.concatChildren(nodes)` method is deprecated."),e=this.nodes.concat(e),this.set("nodes",e)}},{key:"decorateTexts",value:function(e){return _slateDevLogger2.default.deprecate("0.19.0","The `Node.decorateTexts(decorator) method is deprecated."),this.mapDescendants(function(t){return"text"==t.kind?t.decorateCharacters(e):t})}},{key:"filterDescendantsDeep",value:function(e){return _slateDevLogger2.default.deprecate("0.19.0","The Node.filterDescendantsDeep(iterator) method is deprecated."),this.nodes.reduce(function(t,n,r,s){return"text"!=n.kind&&(t=t.concat(n.filterDescendantsDeep(e))),e(n,r,s)&&(t=t.push(n)),t},new _immutable.List)}},{key:"findDescendantDeep",value:function(e){_slateDevLogger2.default.deprecate("0.19.0","The Node.findDescendantDeep(iterator) method is deprecated.");var t=void 0;return this.forEachDescendant(function(n){if(e(n))return t=n,!1}),t}},{key:"getChildrenBetween",value:function(e,t){return _slateDevLogger2.default.deprecate("0.19.0","The `Node.getChildrenBetween(start, end)` method is deprecated."),e=this.assertChild(e),e=this.nodes.indexOf(e),t=this.assertChild(t),t=this.nodes.indexOf(t),this.nodes.slice(e+1,t)}},{key:"getChildrenBetweenIncluding",value:function(e,t){return _slateDevLogger2.default.deprecate("0.19.0","The `Node.getChildrenBetweenIncluding(start, end)` method is deprecated."),e=this.assertChild(e),e=this.nodes.indexOf(e),t=this.assertChild(t),t=this.nodes.indexOf(t),this.nodes.slice(e,t+1)}},{key:"getHighestChild",value:function(e){
return _slateDevLogger2.default.deprecate("0.19.0","The `Node.getHighestChild(key) method is deprecated, please use `Node.getFurthestAncestor(key) instead."),this.getFurthestAncestor(e)}},{key:"getHighestOnlyChildParent",value:function(e){return _slateDevLogger2.default.deprecate("0.19.0","The `Node.getHighestOnlyChildParent(key)` method is deprecated, please use `Node.getFurthestOnlyChildAncestor` instead."),this.getFurthestOnlyChildAncestor(e)}},{key:"isInlineSplitAtRange",value:function(e){if(_slateDevLogger2.default.deprecate("0.19.0","The `Node.isInlineSplitAtRange(range)` method is deprecated."),e=e.normalize(this),e.isExpanded)throw new Error;var t=e,n=t.startKey,r=this.getFurthestInline(n)||this.getDescendant(n);return e.isAtStartOf(r)||e.isAtEndOf(r)}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isNode(t))return t;if((0,_isPlainObject2.default)(t))switch(t.kind){case"block":return _block2.default.create(t);case"document":return _document2.default.create(t);case"inline":return _inline2.default.create(t);case"text":return _text2.default.create(t);default:throw new Error("`Node.create` requires a `kind` string.")}throw new Error("`Node.create` only accepts objects or nodes but you passed it: "+t)}},{key:"createList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(t)||Array.isArray(t)){return new _immutable.List(t.map(e.create))}throw new Error("`Node.createList` only accepts lists or arrays, but you passed it: "+t)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_block2.default.isBlock(e)||_inline2.default.isInline(e))return{data:e.data,isVoid:e.isVoid,type:e.type};if("string"==typeof e)return{type:e};if((0,_isPlainObject2.default)(e)){var t={};return"type"in e&&(t.type=e.type),"data"in e&&(t.data=_data2.default.create(e.data)),"isVoid"in e&&(t.isVoid=e.isVoid),t}throw new Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var t=e.kind;switch(t){case"block":return _block2.default.fromJSON(e);case"document":return _document2.default.fromJSON(e);case"inline":return _inline2.default.fromJSON(e);case"text":return _text2.default.fromJSON(e);default:throw new Error("`Node.fromJSON` requires a `kind` of either 'block', 'document', 'inline' or 'text', but you passed: "+t)}}},{key:"isNode",value:function(e){return _block2.default.isBlock(e)||_document2.default.isDocument(e)||_inline2.default.isInline(e)||_text2.default.isText(e)}},{key:"isNodeList",value:function(t){return _immutable.List.isList(t)&&t.every(function(t){return e.isNode(t)})}}]),e}();Node.fromJS=Node.fromJSON,(0,_memoize2.default)(Node.prototype,["getBlocks","getBlocksAsArray","getCharacters","getCharactersAsArray","getFirstText","getInlines","getInlinesAsArray","getKeys","getLastText","getMarks","getOrderedMarks","getMarksAsArray","getText","getTextDirection","getTexts","getTextsAsArray","isLeafBlock","isLeafInline"],{takesArguments:!1}),(0,_memoize2.default)(Node.prototype,["areDescendantsSorted","getActiveMarksAtRange","getActiveMarksAtRangeAsArray","getAncestors","getBlocksAtRange","getBlocksAtRangeAsArray","getBlocksByType","getBlocksByTypeAsArray","getCharactersAtRange","getCharactersAtRangeAsArray","getChild","getChildrenBetween","getChildrenBetweenIncluding","getClosestBlock","getClosestInline","getClosestVoid","getCommonAncestor","getComponent","getDecorators","getDepth","getDescendant","getDescendantAtPath","getDescendantDecorators","getFragmentAtRange","getFurthestBlock","getFurthestInline","getFurthestAncestor","getFurthestOnlyChildAncestor","getInlinesAtRange","getInlinesAtRangeAsArray","getInlinesByType","getInlinesByTypeAsArray","getMarksAtRange","getOrderedMarksAtRange","getMarksAtRangeAsArray","getMarksByType","getOrderedMarksByType","getMarksByTypeAsArray","getNextBlock","getNextSibling","getNextText","getNode","getNodeAtPath","getOffset","getOffsetAtRange","getParent","getPath","getPreviousBlock","getPreviousSibling","getPreviousText","getTextAtOffset","getTextsAtRange","getTextsAtRangeAsArray","hasChild","hasDescendant","hasNode","hasVoidParent","isInlineSplitAtRange","validate"],{takesArguments:!0}),exports.default=Node},{"../utils/generate-key":233,"../utils/is-index-in-range":234,"../utils/memoize":236,"./block":214,"./data":217,"./document":218,"./inline":220,"./text":228,direction:3,"is-plain-object":57,"slate-dev-logger":200}],223:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_character=require("./character"),_character2=_interopRequireDefault(_character),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),DEFAULTS={marks:new _immutable.Set,text:""},Range=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getCharacters",value:function(){var e=this.marks;return _character2.default.createList(this.text.split("").map(function(t){return _character2.default.create({text:t,marks:e})}))}},{key:"toJSON",value:function(){return{kind:this.kind,marks:this.marks.toArray().map(function(e){return e.toJSON()}),text:this.text}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"range"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isRange(e))return e;if("string"==typeof e&&(e={text:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Range.create` only accepts objects, strings or ranges, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e)){return new _immutable.List(e.map(t.create))}throw new Error("`Range.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var r=e.text,n=void 0===r?"":r,a=e.marks,i=void 0===a?[]:a;return new t({text:n,marks:new _immutable.Set(i.map(_mark2.default.fromJSON))})}},{key:"isRange",value:function(e){return!(!e||!e[_modelTypes2.default.RANGE])}},{key:"isRangeList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isRange(e)})}}]),t}((0,_immutable.Record)(DEFAULTS));Range.fromJS=Range.fromJSON,Range.prototype[_modelTypes2.default.RANGE]=!0,exports.default=Range},{"../constants/model-types":212,"./character":216,"./mark":221,"is-plain-object":57}],224:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function normalizeProperties(e){var t=e.rules,r=void 0===t?[]:t,n=e.nodes,o=e.marks;if(n){var a=normalizeNodes(n);r=r.concat(a)}if(o){var i=normalizeMarks(o);r=r.concat(i)}return e.transform&&(_slateDevLogger2.default.deprecate("0.22.0","The `schema.transform` property has been deprecated in favor of `schema.change`."),e.change=e.transform,delete e.transform),{rules:r}}function normalizeNodes(e){var t=[];for(var r in e)!function(r){var n=e[r];("function"==(0,_typeOf2.default)(n)||(0,_isReactComponent2.default)(n))&&(n={render:n}),n.match=function(e){return("block"==e.kind||"inline"==e.kind)&&e.type==r},t.push(n)}(r);return t}function normalizeMarks(e){var t=[];for(var r in e)!function(r){var n=e[r];n.render||n.decorator||n.validate||(n={render:n}),n.render=normalizeMarkComponent(n.render),n.match=function(e){return"mark"==e.kind&&e.type==r},t.push(n)}(r);return t}function normalizeMarkComponent(e){if((0,_isReactComponent2.default)(e))return e;switch((0,_typeOf2.default)(e)){case"function":return e;case"object":return function(t){return _react2.default.createElement("span",{style:e},t.children)};case"string":return function(t){return _react2.default.createElement("span",{className:e},t.children)}}}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_react=window.React,_react2=_interopRequireDefault(_react),_find=require("lodash/find"),_find2=_interopRequireDefault(_find),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_typeOf=require("type-of"),_typeOf2=_interopRequireDefault(_typeOf),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_isReactComponent=require("../utils/is-react-component"),_isReactComponent2=_interopRequireDefault(_isReactComponent),DEFAULTS={rules:[]},Schema=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"__getComponent",value:function(e){var t=(0,_find2.default)(this.rules,function(t){return t.render&&t.match(e)});if(t)return t.render}},{key:"__getDecorators",value:function(e){return this.rules.filter(function(t){return t.decorate&&t.match(e)}).map(function(t){return function(r){return t.decorate(r,e)}})}},{key:"__validate",value:function(e){var t=void 0,r=(0,_find2.default)(this.rules,function(r){if(r.validate&&r.match(e))return t=r.validate(e)});if(t)return{rule:r,value:t}}},{key:"kind",get:function(){return"schema"}},{key:"hasValidators",get:function(){return this.rules.some(function(e){return e.validate})}},{key:"hasDecorators",get:function(){return this.rules.some(function(e){return e.decorate})}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSchema(e))return e;if((0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Schema.create` only accepts objects or schemas, but you passed it: "+e)}},{key:"isSchema",value:function(e){return!(!e||!e[_modelTypes2.default.SCHEMA])}},{key:"fromJSON",value:function(e){return e=normalizeProperties(e),new t(e)}}]),t}((0,_immutable.Record)(DEFAULTS));Schema.fromJS=Schema.fromJSON,Schema.prototype[_modelTypes2.default.SCHEMA]=!0,exports.default=Schema},{"../constants/model-types":212,"../utils/is-react-component":235,"is-plain-object":57,"lodash/find":171,"slate-dev-logger":200,"type-of":199}],225:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function getFirst(e){return"text"==e.kind?e:e.getFirstText()}function getLast(e){return"text"==e.kind?e:e.getLastText()}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var o=[],s=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(s=(i=a.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(e){n=!0,r=e}finally{try{!s&&a.return&&a.return()}finally{if(n)throw r}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,o,s){return o&&e(t.prototype,o),s&&e(t,s),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),DEFAULTS={anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:null,isFocused:!1,marks:null},Selection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"hasAnchorAtStartOf",value:function(e){if(0!=this.anchorOffset)return!1;var t=getFirst(e);return this.anchorKey==t.key}},{key:"hasAnchorAtEndOf",value:function(e){var t=getLast(e);return this.anchorKey==t.key&&this.anchorOffset==t.text.length}},{key:"hasAnchorBetween",value:function(e,t,o){return this.anchorOffset<=o&&t<=this.anchorOffset&&this.hasAnchorIn(e)}},{key:"hasAnchorIn",value:function(e){return"text"==e.kind?e.key==this.anchorKey:null!=this.anchorKey&&e.hasDescendant(this.anchorKey)}},{key:"hasFocusAtEndOf",value:function(e){var t=getLast(e);return this.focusKey==t.key&&this.focusOffset==t.text.length}},{key:"hasFocusAtStartOf",value:function(e){if(0!=this.focusOffset)return!1;var t=getFirst(e);return this.focusKey==t.key}},{key:"hasFocusBetween",value:function(e,t,o){return t<=this.focusOffset&&this.focusOffset<=o&&this.hasFocusIn(e)}},{key:"hasFocusIn",value:function(e){return"text"==e.kind?e.key==this.focusKey:null!=this.focusKey&&e.hasDescendant(this.focusKey)}},{key:"isAtStartOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtStartOf(e)}},{key:"isAtEndOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtEndOf(e)}},{key:"focus",value:function(){return this.merge({isFocused:!0})}},{key:"blur",value:function(){return this.merge({isFocused:!1})}},{key:"deselect",value:function(){return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1})}},{key:"flip",value:function(){return this.merge({anchorKey:this.focusKey,anchorOffset:this.focusOffset,focusKey:this.anchorKey,focusOffset:this.anchorOffset,isBackward:null==this.isBackward?null:!this.isBackward})}},{key:"moveAnchor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,o=this.focusKey,s=this.focusOffset,n=this.isBackward,r=this.anchorOffset+e;return this.merge({anchorOffset:r,isBackward:t==o?r>s:n})}},{key:"moveFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,o=this.anchorOffset,s=this.focusKey,n=this.isBackward,r=this.focusOffset+e;return this.merge({focusOffset:r,isBackward:s==t?o>r:n})}},{key:"moveAnchorTo",value:function(e,t){var o=this.anchorKey,s=this.focusKey,n=this.focusOffset,r=this.isBackward;return this.merge({anchorKey:e,anchorOffset:t,isBackward:e==s?t>n:e==o?r:null})}},{key:"moveFocusTo",value:function(e,t){var o=this.focusKey,s=this.anchorKey,n=this.anchorOffset,r=this.isBackward;return this.merge({focusKey:e,focusOffset:t,isBackward:e==s?n>t:e==o?r:null})}},{key:"moveAnchorOffsetTo",value:function(e){return this.merge({anchorOffset:e,isBackward:this.anchorKey==this.focusKey?e>this.focusOffset:this.isBackward})}},{key:"moveFocusOffsetTo",value:function(e){return this.merge({focusOffset:e,isBackward:this.anchorKey==this.focusKey?this.anchorOffset>e:this.isBackward})}},{key:"moveOffsetsTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.moveAnchorOffsetTo(e).moveFocusOffsetTo(t)}},{key:"moveToAnchor",value:function(){return this.moveFocusTo(this.anchorKey,this.anchorOffset)}},{key:"moveToFocus",value:function(){return this.moveAnchorTo(this.focusKey,this.focusOffset)}},{key:"moveAnchorToStartOf",value:function(e){return e=getFirst(e),this.moveAnchorTo(e.key,0)}},{key:"moveAnchorToEndOf",value:function(e){return e=getLast(e),this.moveAnchorTo(e.key,e.text.length)}},{key:"moveFocusToStartOf",value:function(e){return e=getFirst(e),this.moveFocusTo(e.key,0)}},{key:"moveFocusToEndOf",value:function(e){return e=getLast(e),this.moveFocusTo(e.key,e.text.length)}},{key:"moveToRangeOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.moveAnchorToStartOf(e).moveFocusToEndOf(t)}},{key:"normalize",value:function(e){var t=this,o=t.anchorKey,s=t.anchorOffset,n=t.focusKey,r=t.focusOffset,i=t.isBackward;if(null==o||null==n)return t.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:!1});var a=e.getDescendant(o),c=e.getDescendant(n);if(!a||!c){_slateDevLogger2.default.warn("The selection was invalid and was reset. The selection in question was:",t);var u=e.getFirstText();return t.merge({anchorKey:u?u.key:null,anchorOffset:0,focusKey:u?u.key:null,focusOffset:0,isBackward:!1})}if("text"!=a.kind){_slateDevLogger2.default.warn("The selection anchor was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",a);var f=a.getTextAtOffset(s);s-=a.getOffset(f.key),a=f}if("text"!=c.kind){_slateDevLogger2.default.warn("The selection focus was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",c);var h=c.getTextAtOffset(r);r-=c.getOffset(h.key),c=h}return null==i&&(i=a.key===c.key?s>r:!e.areDescendantsSorted(a.key,c.key)),t.merge({anchorKey:a.key,anchorOffset:s,focusKey:c.key,focusOffset:r,isBackward:i})}},{key:"toJSON",value:function(){return{anchorKey:this.anchorKey,anchorOffset:this.anchorOffset,focusKey:this.focusKey,focusOffset:this.focusOffset,isBackward:this.isBackward,isFocused:this.isFocused,kind:this.kind,marks:null==this.marks?null:this.marks.toArray().map(function(e){return e.toJSON()})}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"unset",value:function(){return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.unset` method is deprecated, please switch to using `Selection.deselect` instead."),this.deselect()}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.moveForward(n)` method is deprecated, please switch to using `Selection.move(n)` instead."),this.move(e)}},{key:"moveBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.moveBackward(n)` method is deprecated, please switch to using `Selection.move(-n)` (with a negative number) instead."),this.move(0-e)}},{key:"moveAnchorOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.moveAnchorOffset(n)` method is deprecated, please switch to using `Selection.moveAnchor(n)` instead."),this.moveAnchor(e)}},{key:"moveFocusOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.moveFocusOffset(n)` method is deprecated, please switch to using `Selection.moveFocus(n)` instead."),this.moveFocus(e)}},{key:"moveStartOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.moveStartOffset(n)` method is deprecated, please switch to using `Selection.moveStart(n)` instead."),this.moveStart(e)}},{key:"moveEndOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.moveEndOffset(n)` method is deprecated, please switch to using `Selection.moveEnd(n)` instead."),this.moveEnd(e)}},{key:"extendForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.extendForward(n)` method is deprecated, please switch to using `Selection.extend(n)` instead."),this.extend(e)}},{key:"extendBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.extendBackward(n)` method is deprecated, please switch to using `Selection.extend(-n)` (with a negative number) instead."),this.extend(0-e)}},{key:"moveToOffsets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return _slateDevLogger2.default.deprecate("0.17.0","The `Selection.moveToOffsets` method is deprecated, please switch to using `Selection.moveOffsetsTo` instead."),this.moveOffsetsTo(e,t)}},{key:"kind",get:function(){return"selection"}},{key:"isBlurred",get:function(){return!this.isFocused}},{key:"isCollapsed",get:function(){return this.anchorKey==this.focusKey&&this.anchorOffset==this.focusOffset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isForward",get:function(){return null==this.isBackward?null:!this.isBackward}},{key:"isSet",get:function(){return null!=this.anchorKey&&null!=this.focusKey}},{key:"isUnset",get:function(){return!this.isSet}},{key:"startKey",get:function(){return this.isBackward?this.focusKey:this.anchorKey}},{key:"startOffset",get:function(){return this.isBackward?this.focusOffset:this.anchorOffset}},{key:"endKey",get:function(){return this.isBackward?this.anchorKey:this.focusKey}},{key:"endOffset",get:function(){return this.isBackward?this.anchorOffset:this.focusOffset}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSelection(e))return e;if((0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Selection.create` only accepts objects or selections, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSelection(e))return{anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:e.isBackward,isFocused:e.isFocused,marks:e.marks};if((0,_isPlainObject2.default)(e)){var o={};return"anchorKey"in e&&(o.anchorKey=e.anchorKey),"anchorOffset"in e&&(o.anchorOffset=e.anchorOffset),"focusKey"in e&&(o.focusKey=e.focusKey),"focusOffset"in e&&(o.focusOffset=e.focusOffset),"isBackward"in e&&(o.isBackward=e.isBackward),"isFocused"in e&&(o.isFocused=e.isFocused),"marks"in e&&(o.marks=e.marks),o}throw new Error("`Selection.createProperties` only accepts objects or selections, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.anchorKey,s=void 0===o?null:o,n=e.anchorOffset,r=void 0===n?0:n,i=e.focusKey,a=void 0===i?null:i,c=e.focusOffset,u=void 0===c?0:c,f=e.isBackward,h=void 0===f?null:f,l=e.isFocused,d=void 0!==l&&l,v=e.marks;return new t({anchorKey:s,anchorOffset:r,focusKey:a,focusOffset:u,isBackward:h,isFocused:d,marks:void 0===v?null:v})}},{key:"isSelection",value:function(e){return!(!e||!e[_modelTypes2.default.SELECTION])}}]),t}((0,_immutable.Record)(DEFAULTS));Selection.fromJS=Selection.fromJSON,Selection.prototype[_modelTypes2.default.SELECTION]=!0;var MOVE_METHODS=[["move",""],["move","To"],["move","ToStartOf"],["move","ToEndOf"]];MOVE_METHODS.forEach(function(e){var t=_slicedToArray(e,2),o=t[0],s=t[1];Selection.prototype[""+o+s]=function(){var e;return(e=this[o+"Anchor"+s].apply(this,arguments))[o+"Focus"+s].apply(e,arguments)}});var EDGE_METHODS=[["has","AtStartOf",!0],["has","AtEndOf",!0],["has","Between",!0],["has","In",!0],["collapseTo",""],["move",""],["moveTo",""],["move","To"],["move","OffsetTo"]];EDGE_METHODS.forEach(function(e){var t=_slicedToArray(e,3),o=t[0],s=t[1],n=t[2],r=o+"Anchor"+s,i=o+"Focus"+s;Selection.prototype[o+"Start"+s]=function(){return this.isBackward?this[i].apply(this,arguments):this[r].apply(this,arguments)},Selection.prototype[o+"End"+s]=function(){return this.isBackward?this[r].apply(this,arguments):this[i].apply(this,arguments)},n&&(Selection.prototype[o+"Edge"+s]=function(){return this[r].apply(this,arguments)||this[i].apply(this,arguments)})});var ALIAS_METHODS=[["collapseTo","moveTo"],["collapseToAnchor","moveToAnchor"],["collapseToFocus","moveToFocus"],["collapseToStart","moveToStart"],["collapseToEnd","moveToEnd"],["collapseToStartOf","moveToStartOf"],["collapseToEndOf","moveToEndOf"],["extend","moveFocus"],["extendTo","moveFocusTo"],["extendToStartOf","moveFocusToStartOf"],["extendToEndOf","moveFocusToEndOf"]];ALIAS_METHODS.forEach(function(e){var t=_slicedToArray(e,2),o=t[0],s=t[1];Selection.prototype[o]=function(){return this[s].apply(this,arguments)}}),exports.default=Selection},{"../constants/model-types":212,"is-plain-object":57,"slate-dev-logger":200}],226:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function resolveSchema(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(null!=n.schema){var o=_schema3.default.create(n.schema);t=t.concat(o.rules)}}return _schema3.default.create({rules:t})}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_schema2=require("./schema"),_schema3=_interopRequireDefault(_schema2),debug=(0,_debug2.default)("slate:stack"),METHODS=["onBeforeInput","onBeforeChange","onBlur","onCopy","onCut","onDrop","onFocus","onKeyDown","onKeyUp","onPaste","onSelect","onChange"],DEFAULTS={plugins:[],schema:new _schema3.default},Stack=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(e,t,r){debug("render");for(var n=this.plugins.slice().reverse(),o=void 0,u=0;u<n.length;u++){var a=n[u];a.render&&(o=a.render(r,e,t),r.children=o)}return o}},{key:"renderPortal",value:function(e,t){debug("renderPortal");for(var r=[],n=0;n<this.plugins.length;n++){var o=this.plugins[n];if(o.renderPortal){var u=o.renderPortal(e,t);u&&r.push(u)}}return r}},{key:"kind",get:function(){return"stack"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.plugins;return new t({plugins:r,schema:resolveSchema(r)})}},{key:"isStack",value:function(e){return!(!e||!e[_modelTypes2.default.STACK])}}]),t}((0,_immutable.Record)(DEFAULTS));Stack.prototype[_modelTypes2.default.STACK]=!0;for(var _loop=function(e){var t=METHODS[e];Stack.prototype[t]=function(e,r){debug(t);for(var n=arguments.length,o=Array(n>2?n-2:0),u=2;u<n;u++)o[u-2]=arguments[u];for(var a=0;a<this.plugins.length;a++){var l=this.plugins[a];if(l[t]){if(null!=l[t].apply(l,o.concat([e,r])))break}}}},i=0;i<METHODS.length;i++)_loop(i);exports.default=Stack},{"../constants/model-types":212,"./schema":224,debug:201}],227:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_core=require("../schemas/core"),_core2=_interopRequireDefault(_core),_change=require("./change"),_change2=_interopRequireDefault(_change),_document=require("./document"),_document2=_interopRequireDefault(_document),_history=require("./history"),_history2=_interopRequireDefault(_history),_selection=require("./selection"),_selection2=_interopRequireDefault(_selection),DEFAULTS={document:_document2.default.create(),selection:_selection2.default.create(),history:_history2.default.create(),data:new _immutable.Map},State=function(e){function t(){return _classCallCheck(this,t),
_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _change2.default(_extends({},e,{state:this}))}},{key:"transform",value:function(){return _slateDevLogger2.default.deprecate("0.22.0","The `state.transform()` method has been deprecated in favor of `state.change()`."),this.change.apply(this,arguments)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={data:this.data.toJSON(),document:this.document.toJSON(e),kind:this.kind,history:this.history.toJSON(),selection:this.selection.toJSON()};if(e.preserveHistory||delete t.history,e.preserveSelection||delete t.selection,e.preserveStateData||delete t.data,e.preserveSelection&&!e.preserveKeys){var n=this.document,s=this.selection;t.selection.anchorPath=n.getPath(s.anchorKey),t.selection.focusPath=n.getPath(s.focusKey),delete t.selection.anchorKey,delete t.selection.focusKey}return t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"kind",get:function(){return"state"}},{key:"hasUndos",get:function(){return this.history.undos.size>0}},{key:"hasRedos",get:function(){return this.history.redos.size>0}},{key:"isBlurred",get:function(){return this.selection.isBlurred}},{key:"isFocused",get:function(){return this.selection.isFocused}},{key:"isCollapsed",get:function(){return this.selection.isCollapsed}},{key:"isExpanded",get:function(){return this.selection.isExpanded}},{key:"isBackward",get:function(){return this.selection.isBackward}},{key:"isForward",get:function(){return this.selection.isForward}},{key:"startKey",get:function(){return this.selection.startKey}},{key:"endKey",get:function(){return this.selection.endKey}},{key:"startOffset",get:function(){return this.selection.startOffset}},{key:"endOffset",get:function(){return this.selection.endOffset}},{key:"anchorKey",get:function(){return this.selection.anchorKey}},{key:"focusKey",get:function(){return this.selection.focusKey}},{key:"anchorOffset",get:function(){return this.selection.anchorOffset}},{key:"focusOffset",get:function(){return this.selection.focusOffset}},{key:"startBlock",get:function(){return this.selection.isUnset?null:this.document.getClosestBlock(this.selection.startKey)}},{key:"endBlock",get:function(){return this.selection.isUnset?null:this.document.getClosestBlock(this.selection.endKey)}},{key:"anchorBlock",get:function(){return this.selection.isUnset?null:this.document.getClosestBlock(this.selection.anchorKey)}},{key:"focusBlock",get:function(){return this.selection.isUnset?null:this.document.getClosestBlock(this.selection.focusKey)}},{key:"startInline",get:function(){return this.selection.isUnset?null:this.document.getClosestInline(this.selection.startKey)}},{key:"endInline",get:function(){return this.selection.isUnset?null:this.document.getClosestInline(this.selection.endKey)}},{key:"anchorInline",get:function(){return this.selection.isUnset?null:this.document.getClosestInline(this.selection.anchorKey)}},{key:"focusInline",get:function(){return this.selection.isUnset?null:this.document.getClosestInline(this.selection.focusKey)}},{key:"startText",get:function(){return this.selection.isUnset?null:this.document.getDescendant(this.selection.startKey)}},{key:"endText",get:function(){return this.selection.isUnset?null:this.document.getDescendant(this.selection.endKey)}},{key:"anchorText",get:function(){return this.selection.isUnset?null:this.document.getDescendant(this.selection.anchorKey)}},{key:"focusText",get:function(){return this.selection.isUnset?null:this.document.getDescendant(this.selection.focusKey)}},{key:"characters",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getCharactersAtRange(this.selection)}},{key:"marks",get:function(){return this.selection.isUnset?new _immutable.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function(){return this.selection.isUnset?new _immutable.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getBlocksAtRange(this.selection)}},{key:"fragment",get:function(){return this.selection.isUnset?_document2.default.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getTextsAtRange(this.selection)}},{key:"isEmpty",get:function(){var e=this.startOffset,t=this.endOffset;return!!this.isCollapsed||(0==t||0==e)&&0==this.fragment.text.length}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.isState(e))return e;if((0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`State.create` only accepts objects or states, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.document,i=void 0===s?{}:s,o=e.selection,r=void 0===o?{}:o,c=new _immutable.Map;if(i=_document2.default.fromJSON(i),r=_selection2.default.fromJSON(r),n.plugins){var u=!0,l=!1,a=void 0;try{for(var h,f=n.plugins[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value;d.data&&(c=c.merge(d.data))}}catch(e){l=!0,a=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw a}}}if("data"in e&&(c=c.merge(e.data)),r.isUnset){var y=i.getFirstText();y&&(r=r.collapseToStartOf(y))}var g=new t({data:c,document:i,selection:r});return!1!==n.normalize&&(g=g.change({save:!1}).normalize(_core2.default).state),g}},{key:"isState",value:function(e){return!(!e||!e[_modelTypes2.default.STATE])}}]),t}((0,_immutable.Record)(DEFAULTS));State.fromJS=State.fromJSON,State.prototype[_modelTypes2.default.STATE]=!0,exports.default=State},{"../constants/model-types":212,"../schemas/core":232,"./change":215,"./document":218,"./history":219,"./selection":225,"is-plain-object":57,"slate-dev-logger":200}],228:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_immutable=window.Immutable,_character=require("./character"),_character2=_interopRequireDefault(_character),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),_range=require("./range"),_range2=_interopRequireDefault(_range),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize),DEFAULTS={characters:new _immutable.List,key:void 0},Text=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"addMark",value:function(e,t,r){var a=this.characters.map(function(a,n){if(n<e)return a;if(n>=e+t)return a;var i=a,u=i.marks;return u=u.add(r),a=a.set("marks",u)});return this.set("characters",a)}},{key:"getDecorations",value:function(e){var t=this,r=t.characters;if(0==r.size)return r;for(var a=0;a<e.length;a++){var n=e[a],i=n(t);r=r.merge(i)}return r}},{key:"getDecorators",value:function(e){return e.__getDecorators(this)}},{key:"getMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.OrderedSet(e)}},{key:"getMarksAsArray",value:function(){return this.characters.reduce(function(e,t){return e.concat(t.marks.toArray())},[])}},{key:"getMarksAtIndex",value:function(e){if(0==e)return _mark2.default.createSet();var t=this.characters,r=t.get(e-1);return r?r.marks:_mark2.default.createSet()}},{key:"getNode",value:function(e){return this.key==e?this:null}},{key:"getRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.getDecorations(e),r=[],a=void 0,n=void 0;return 0==t.size?r.push({}):t.forEach(function(e,t){var i=e.marks,u=e.text;if(0==t)return a=e,n={text:u,marks:i},void r.push(n);var s=a.marks;if((0,_immutable.is)(i,s))return a=e,void(n.text+=u);a=e,n={text:u,marks:i},r.push(n)},[]),r=new _immutable.List(r.map(function(e){return new _range2.default(e)}))}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"insertText",value:function(e,t,r){var a=this.characters,n=_character2.default.createList(t.split("").map(function(e){return{text:e,marks:r}}));return a=a.slice(0,e).concat(n).concat(a.slice(e)),this.set("characters",a)}},{key:"regenerateKey",value:function(){var e=(0,_generateKey2.default)();return this.set("key",e)}},{key:"removeMark",value:function(e,t,r){var a=this.characters.map(function(a,n){if(n<e)return a;if(n>=e+t)return a;var i=a,u=i.marks;return u=u.remove(r),a=a.set("marks",u)});return this.set("characters",a)}},{key:"removeText",value:function(e,t){var r=this.characters,a=e,n=e+t;return r=r.filterNot(function(e,t){return a<=t&&t<n}),this.set("characters",r)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={key:this.key,kind:this.kind,ranges:this.getRanges().toArray().map(function(e){return e.toJSON()})};return e.preserveKeys||delete t.key,t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"updateMark",value:function(e,t,r,a){var n=r.merge(a),i=this.characters.map(function(a,i){if(i<e)return a;if(i>=e+t)return a;var u=a,s=u.marks;return s.has(r)?(s=s.remove(r),s=s.add(n),a=a.set("marks",s)):a});return this.set("characters",i)}},{key:"validate",value:function(e){return e.__validate(this)}},{key:"kind",get:function(){return"text"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.characters.reduce(function(e,t){return e+t.text},"")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isText(e))return e;if("string"==typeof e&&(e={ranges:[{text:e}]}),(0,_isPlainObject2.default)(e)){if(e.text){var r=e,a=r.text,n=r.marks;e={key:r.key,ranges:[{text:a,marks:n}]}}return t.fromJSON(e)}throw new Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e)){return new _immutable.List(e.map(t.create))}throw new Error("`Text.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isText(e))return e;var r=e.ranges,a=void 0===r?[]:r,n=e.key,i=void 0===n?(0,_generateKey2.default)():n;return e.text&&(_slateDevLogger2.default.deprecate("0.23.0","Passing `object.text` to `Text.fromJSON` has been deprecated, please use `object.ranges` instead."),a=[{text:e.text}]),new t({characters:a.map(_range2.default.fromJSON).reduce(function(e,t){return e.concat(t.getCharacters())},new _immutable.List),key:i})}},{key:"isText",value:function(e){return!(!e||!e[_modelTypes2.default.TEXT])}},{key:"isTextList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isText(e)})}},{key:"createFromString",value:function(e){return _slateDevLogger2.default.deprecate("0.22.0","The `Text.createFromString(string)` method is deprecated, use `Text.create(string)` instead."),t.create(e)}},{key:"createFromRanges",value:function(e){return _slateDevLogger2.default.deprecate("0.22.0","The `Text.createFromRanges(ranges)` method is deprecated, use `Text.create(ranges)` instead."),t.create(e)}}]),t}((0,_immutable.Record)(DEFAULTS));Text.fromJS=Text.fromJSON,Text.prototype[_modelTypes2.default.TEXT]=!0,(0,_memoize2.default)(Text.prototype,["getMarks","getMarksAsArray"],{takesArguments:!1}),(0,_memoize2.default)(Text.prototype,["getDecorations","getDecorators","getMarksAtIndex","getRanges","validate"],{takesArguments:!0}),exports.default=Text},{"../constants/model-types":212,"../utils/generate-key":233,"../utils/memoize":236,"./character":216,"./mark":221,"./range":223,"is-plain-object":57,"slate-dev-logger":200}],229:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function applyOperation(e,t){var o=t.type,r=APPLIERS[o];if(!r)throw new Error('Unknown operation type: "'+o+'".');return debug(o,t),e=r(e,t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_node=require("../models/node"),_node2=_interopRequireDefault(_node),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),debug=(0,_debug2.default)("slate:operation:apply"),APPLIERS={add_mark:function(e,t){var o=t.path,r=t.offset,n=t.length,a=_mark2.default.create(t.mark),s=e,d=s.document,u=d.assertPath(o);return u=u.addMark(r,n,a),d=d.updateNode(u),e=e.set("document",d)},insert_node:function(e,t){var o=t.path,r=_node2.default.create(t.node),n=o[o.length-1],a=o.slice(0,-1),s=e,d=s.document,u=d.assertPath(a);return u=u.insertNode(n,r),d=d.updateNode(u),e=e.set("document",d)},insert_text:function(e,t){var o=t.path,r=t.offset,n=t.text,a=t.marks;Array.isArray(a)&&(a=_mark2.default.createSet(a));var s=e,d=s.document,u=s.selection,i=u,c=i.anchorKey,l=i.focusKey,f=i.anchorOffset,h=i.focusOffset,m=d.assertPath(o);return m=m.insertText(r,n,a),d=d.updateNode(m),c==m.key&&f>=r&&(u=u.moveAnchor(n.length)),l==m.key&&h>=r&&(u=u.moveFocus(n.length)),e=e.set("document",d).set("selection",u)},merge_node:function(e,t){var o=t.path,r=o.slice(0,o.length-1).concat([o[o.length-1]-1]),n=e,a=n.document,s=n.selection,d=a.assertPath(r),u=a.assertPath(o),i=a.getParent(d.key),c=i.nodes.indexOf(d),l=i.nodes.indexOf(u);if(i=i.mergeNode(c,l),a=a.updateNode(i),"text"==d.kind){var f=s,h=f.anchorKey,m=f.anchorOffset,p=f.focusKey,v=f.focusOffset,g=!1;h==u.key&&(s=s.moveAnchorTo(d.key,d.text.length+m),g=!0),p==u.key&&(s=s.moveFocusTo(d.key,d.text.length+v),g=!0),g&&(s=s.normalize(a))}return e=e.set("document",a).set("selection",s)},move_node:function(e,t){var o=t.path,r=t.newPath,n=r[r.length-1],a=r.slice(0,-1),s=o.slice(0,-1),d=o[o.length-1],u=e,i=u.document,c=i.assertPath(o),l=i.getParent(c.key);l=l.removeNode(d),i=i.updateNode(l);var f=void 0;return s.every(function(e,t){return e===a[t]})&&s.length===a.length?f=l:s.every(function(e,t){return e===a[t]})&&d<a[s.length]?(a[s.length]--,f=i.assertPath(a)):f=i.assertPath(a),f=f.insertNode(n,c),i=i.updateNode(f),e=e.set("document",i)},remove_mark:function(e,t){var o=t.path,r=t.offset,n=t.length,a=_mark2.default.create(t.mark),s=e,d=s.document,u=d.assertPath(o);return u=u.removeMark(r,n,a),d=d.updateNode(u),e=e.set("document",d)},remove_node:function(e,t){var o=t.path,r=e,n=r.document,a=r.selection,s=a,d=s.startKey,u=s.endKey,i=n.assertPath(o);if(a.isSet){var c=i.hasNode(d),l=i.hasNode(u),f=!1;if(c){var h=n.getPreviousText(d),m=n.getNextText(d);h?(a=a.moveStartTo(h.key,h.text.length),f=!0):m?(a=a.moveStartTo(m.key,0),f=!0):a=a.deselect()}if(l){var p=n.getPreviousText(u),v=n.getNextText(u);p?(a=a.moveEndTo(p.key,p.text.length),f=!0):v?(a=a.moveEndTo(v.key,0),f=!0):a=a.deselect()}f&&(a=a.normalize(n))}var g=n.getParent(i.key),y=g.nodes.indexOf(i);return g=g.removeNode(y),n=n.updateNode(g),e=e.set("document",n).set("selection",a)},remove_text:function(e,t){var o=t.path,r=t.offset,n=t.text,a=n.length,s=r+a,d=e,u=d.document,i=d.selection,c=i,l=c.anchorKey,f=c.focusKey,h=c.anchorOffset,m=c.focusOffset,p=u.assertPath(o);return l==p.key&&h>=s&&(i=i.moveAnchor(-a)),f==p.key&&m>=s&&(i=i.moveFocus(-a)),p=p.removeText(r,a),u=u.updateNode(p),e=e.set("document",u).set("selection",i)},set_data:function(e,t){var o=t.properties,r=e,n=r.data;return n=n.merge(o),e=e.set("data",n)},set_mark:function(e,t){var o=t.path,r=t.offset,n=t.length,a=t.properties,s=_mark2.default.create(t.mark),d=e,u=d.document,i=u.assertPath(o);return i=i.updateMark(r,n,s,a),u=u.updateNode(i),e=e.set("document",u)},set_node:function(e,t){var o=t.path,r=t.properties,n=e,a=n.document,s=a.assertPath(o);return r.nodes&&r.nodes!=s.nodes&&(_slateDevLogger2.default.warn("Updating a Node's `nodes` property via `setNode()` is not allowed. Use the appropriate insertion and removal operations instead. The opeartion in question was:",t),delete r.nodes),r.key&&r.key!=s.key&&(_slateDevLogger2.default.warn("Updating a Node's `key` property via `setNode()` is not allowed. There should be no reason to do this. The opeartion in question was:",t),delete r.key),s=s.merge(r),a=a.updateNode(s),e=e.set("document",a)},set_selection:function(e,t){var o=_extends({},t.properties),r=e,n=r.document,a=r.selection;return null!=o.marks&&(o.marks=_mark2.default.createSet(o.marks)),void 0!==o.anchorPath&&(o.anchorKey=null===o.anchorPath?null:n.assertPath(o.anchorPath).key,delete o.anchorPath),void 0!==o.focusPath&&(o.focusKey=null===o.focusPath?null:n.assertPath(o.focusPath).key,delete o.focusPath),a=a.merge(o),a=a.normalize(n),e=e.set("selection",a)},split_node:function(e,t){var o=t.path,r=t.position,n=e,a=n.document,s=n.selection,d=a.assertPath(o),u=a.getParent(d.key),i=u.nodes.indexOf(d);u=u.splitNode(i,r),a=a.updateNode(u);var c=s,l=c.startKey,f=c.endKey,h=c.startOffset,m=c.endOffset,p=a.getNextText(d.key),v=!1;return d.key==l&&r<=h&&(s=s.moveStartTo(p.key,h-r),v=!0),d.key==f&&r<=m&&(s=s.moveEndTo(p.key,m-r),v=!0),v&&(s=s.normalize(a)),e=e.set("document",a).set("selection",s)}};exports.default=applyOperation},{"../models/mark":221,"../models/node":222,debug:201,"slate-dev-logger":200}],230:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _apply=require("./apply"),_apply2=_interopRequireDefault(_apply),_invert=require("./invert"),_invert2=_interopRequireDefault(_invert);exports.default={apply:_apply2.default,invert:_invert2.default}},{"./apply":229,"./invert":231}],231:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function invertOperation(e){var t=e.type;if(debug(t,e),"insert_node"==t)return _extends({},e,{type:"remove_node"});if("remove_node"==t)return _extends({},e,{type:"insert_node"});if("move_node"==t)return _extends({},e,{path:e.newPath,newPath:e.path});if("merge_node"==t){var r=e.path,n=r.length,i=n-1;return _extends({},e,{type:"split_node",path:r.slice(0,i).concat([r[i]-1])})}if("split_node"==t){var o=e.path,a=o.length,p=a-1;return _extends({},e,{type:"merge_node",path:o.slice(0,p).concat([o[p]+1])})}if("set_node"==t){var _=e.properties,s=e.node;return _extends({},e,{node:s.merge(_),properties:(0,_pick2.default)(s,Object.keys(_))})}if("insert_text"==t)return _extends({},e,{type:"remove_text"});if("remove_text"==t)return _extends({},e,{type:"insert_text"});if("add_mark"==t)return _extends({},e,{type:"remove_mark"});if("remove_mark"==t)return _extends({},e,{type:"add_mark"});if("set_mark"==t){var d=e.properties,u=e.mark;return _extends({},e,{mark:u.merge(d),properties:(0,_pick2.default)(u,Object.keys(d))})}if("set_selection"==t){var c=e.properties,f=e.selection;return _extends({},e,{selection:_extends({},f,c),properties:(0,_pick2.default)(f,Object.keys(c))})}if("set_data"==t){var l=e.properties,v=e.data;return _extends({},e,{data:v.merge(l),properties:(0,_pick2.default)(v,Object.keys(l))})}throw new Error('Unknown op type: "'+t+'".')}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_pick=require("lodash/pick"),_pick2=_interopRequireDefault(_pick),debug=(0,_debug2.default)("slate:operation:invert");exports.default=invertOperation},{debug:201,"lodash/pick":190}],232:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _immutable=window.Immutable,_schema=require("../models/schema"),_schema2=_interopRequireDefault(_schema),_text=require("../models/text"),_text2=_interopRequireDefault(_text),OPTS={normalize:!1},rules=[{match:function(e){return"document"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"block"!=e.kind});return n.size?n:null},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind},validate:function(e){var n=e.nodes.first();if(!n)return null;var t="block"==n.kind?["block"]:["inline","text"],i=e.nodes.filter(function(e){return!t.includes(e.kind)});return i.size?i:null},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"inline"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"inline"!=e.kind&&"text"!=e.kind});return n.size?n:null},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){return 0==e.nodes.size},normalize:function(e,n){var t=_text2.default.create();e.insertNodeByKey(n.key,0,t,OPTS)}},{match:function(e){return("inline"==e.kind||"block"==e.kind)&&e.isVoid},validate:function(e){return" "!==e.text||1!==e.nodes.size},normalize:function(e,n,t){var i=_text2.default.create(" "),r=n.nodes.size;e.insertNodeByKey(n.key,r,i,OPTS),n.nodes.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"inline"==e.kind&&""==e.text});return n.size?n:null},normalize:function(e,n,t){if(n.nodes.size==t.size){var i=_text2.default.create();e.insertNodeByKey(n.key,1,i,OPTS)}t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){var n=e.nodes.reduce(function(n,t,i){if("inline"!==t.kind)return n;var r=i>0?e.nodes.get(i-1):null,o=e.nodes.get(i+1),u=!r,l=!o||"inline"==o.kind;return(l||u)&&(n=n.push({insertAfter:l,insertBefore:u,index:i})),n},new _immutable.List);return n.size?n:null},normalize:function(e,n,t){var i=0;t.forEach(function(t){var r=t.index,o=t.insertAfter;t.insertBefore&&(e.insertNodeByKey(n.key,i+r,_text2.default.create(),OPTS),i++),o&&(e.insertNodeByKey(n.key,i+r+1,_text2.default.create(),OPTS),i++)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){var n=e.nodes.map(function(n,t){var i=e.nodes.get(t+1);if("text"==n.kind&&i&&"text"==i.kind)return i}).filter(Boolean);return n.size?n:null},normalize:function(e,n,t){t.reverse().forEach(function(n){return e.mergeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){var n=e.nodes;if(!(n.size<=1)){var t=n.filter(function(e,t){if("text"==e.kind&&!(e.text.length>0)){var i=t>0?n.get(t-1):null,r=n.get(t+1);if((i||"inline"!=r.kind)&&(r||"inline"!=i.kind)&&(!r||!i||"inline"!=r.kind||"inline"!=i.kind))return!0}});return t.size?t:null}},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}}],SCHEMA=_schema2.default.create({rules:rules});exports.default=SCHEMA},{"../models/schema":224,"../models/text":228}],233:[function(require,module,exports){"use strict";function generateKey(){return generate()}function setKeyGenerator(e){generate=e}function resetKeyGenerator(){n=0,generate=function(){return""+n++}}Object.defineProperty(exports,"__esModule",{value:!0});var n=void 0,generate=void 0;resetKeyGenerator(),exports.default=generateKey,exports.setKeyGenerator=setKeyGenerator,exports.resetKeyGenerator=resetKeyGenerator},{}],234:[function(require,module,exports){"use strict";function isIndexInRange(e,t,n){var s=n.startKey,r=n.startOffset,a=n.endKey,d=n.endOffset;return t.key==s&&t.key==a?r<=e&&e<d:t.key==s?r<=e:t.key!=a||e<d}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isIndexInRange},{}],235:[function(require,module,exports){"use strict";function isReactComponent(e){return e&&e.prototype&&e.prototype.isReactComponent}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isReactComponent},{}],236:[function(require,module,exports){(function(process){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function memoize(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_=r.takesArguments,a=void 0===_||_,n=0;n<t.length;n++)!function(r){var _=t[r],n=e[_];if(!n)throw new Error('Object does not have a property named "'+_+'".');e[_]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(IS_DEV){if(!ENABLED)return n.apply(this,t);CACHE_KEY!==this.__cache_key&&(this.__cache_key=CACHE_KEY,this.__cache=new _es6Map2.default)}this.__cache||(this.__cache=new _es6Map2.default);var i=void 0,o=void 0;if(a?(o=[_].concat(t),i=getIn(this.__cache,o)):i=this.__cache.get(_),i!==UNSET)return i===UNDEFINED?void 0:i;var s=n.apply(this,t),c=void 0===s?UNDEFINED:s;return a?this.__cache=setIn(this.__cache,o,c):this.__cache.set(_,c),s}}(n)}function getIn(e,t){for(var r=0;r<t.length;r++){var _=t[r];if((e=e.get(_))===UNSET)return UNSET}return e.get(LEAF)}function setIn(e,t,r){for(var _=e,a=void 0,n=0;n<t.length;n++){var i=t[n];a=_.get(i),a===UNSET&&(a=new _es6Map2.default,_.set(i,a)),_=a}return a.set(LEAF,r),e}function __clear(){++CACHE_KEY>=Number.MAX_SAFE_INTEGER&&(CACHE_KEY=0)}function __enable(e){ENABLED=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.__enable=exports.__clear=exports.default=void 0;var _es6Map=require("es6-map"),_es6Map2=_interopRequireDefault(_es6Map),IS_DEV="undefined"!=typeof process&&process.env&&!1,ENABLED=!0,CACHE_KEY=0,LEAF={},UNDEFINED={},UNSET=void 0;exports.default=memoize,exports.__clear=__clear,exports.__enable=__enable}).call(this,require("_process"))},{_process:198,"es6-map":43}],237:[function(require,module,exports){"use strict";function isSurrogate(u){return SURROGATE_START<=u&&u<=SURROGATE_END}function isWord(u,F){if(SPACE.test(u))return!1;if(CHAMELEON.test(u)){var e=F.charAt(0),r=getCharLength(e);e=F.slice(0,r);if(isWord(e,F.slice(r)))return!0}return!PUNCTUATION.test(u)}function getCharLength(u){return isSurrogate(u.charCodeAt(0))?2:1}function getCharOffset(u){return getCharLength(u.charAt(0))}function getCharOffsetBackward(u,F){return u=u.slice(0,F),u=(0,_esrever.reverse)(u),getCharOffset(u)}function getCharOffsetForward(u,F){return u=u.slice(F),getCharOffset(u)}function getWordOffset(u){for(var F=0,e=0,r=!1,t=void 0;t=u.charAt(e);){var A=getCharLength(t);t=u.slice(e,e+A);if(isWord(t,u.slice(e+A)))r=!0,F+=A;else{if(r)break;F+=A}e+=A}return F}function getWordOffsetBackward(u,F){return u=u.slice(0,F),u=(0,_esrever.reverse)(u),getWordOffset(u)}function getWordOffsetForward(u,F){return u=u.slice(F),getWordOffset(u)}Object.defineProperty(exports,"__esModule",{value:!0});var _esrever=require("esrever"),SURROGATE_START=55296,SURROGATE_END=57343,SPACE=/\s/,CHAMELEON=/['\u2018\u2019]/,PUNCTUATION=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;exports.default={getCharOffsetForward:getCharOffsetForward,getCharOffsetBackward:getCharOffsetBackward,getWordOffsetBackward:getWordOffsetBackward,getWordOffsetForward:getWordOffsetForward}},{esrever:54}]},{},[213])(213)});
